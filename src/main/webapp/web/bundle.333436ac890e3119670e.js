(window.webpackJsonp=window.webpackJsonp||[]).push([[2],Array(60).concat([function(e,t,n){"use strict";t.__esModule=!0;var a=function(){function e(e,t,n){this.$http=e,this.$httpParamSerializer=t,this.basePath="http://localhost/",this.defaultHeaders={},void 0!==n&&(this.basePath=n)}return e.prototype.addAppointment=function(e,t){var n={method:"POST",url:this.basePath+"/schedule/add",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.prototype.deleteAppointment=function(e,t){var n={method:"POST",url:this.basePath+"/schedule/deleteAppointment",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.prototype.fetchMonthlyData=function(e,t,n,a){var o=this.basePath+"/schedule/fetchMonthly/{providerNo}/{year}/{month}".replace("{year}",encodeURIComponent(String(e))).replace("{month}",encodeURIComponent(String(t))).replace("{providerNo}",encodeURIComponent(String(n))),r=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter year was null or undefined when calling fetchMonthlyData.");if(null===t||void 0===t)throw new Error("Required parameter month was null or undefined when calling fetchMonthlyData.");if(null===n||void 0===n)throw new Error("Required parameter providerNo was null or undefined when calling fetchMonthlyData.");var i={method:"GET",url:o,params:{},headers:r};return a&&(i=Object.assign(i,a)),this.$http(i)},e.prototype.findExistAppointments=function(e,t){var n=this.basePath+"/schedule/{demographicNo}/appointmentHistory".replace("{demographicNo}",encodeURIComponent(String(e))),a=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter demographicNo was null or undefined when calling findExistAppointments.");var o={method:"POST",url:n,params:{},headers:a};return t&&(o=Object.assign(o,t)),this.$http(o)},e.prototype.getAppointment=function(e,t){var n={method:"POST",url:this.basePath+"/schedule/getAppointment",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.prototype.getAppointmentReasons=function(e){var t={method:"GET",url:this.basePath+"/schedule/reasons",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getAppointmentStatuses=function(e){var t=this.basePath+"/schedule/statuses";console.log(t);var n={method:"GET",url:t,params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(n=Object.assign(n,e)),this.$http(n)},e.prototype.getAppointmentTypes=function(e){var t={method:"GET",url:this.basePath+"/schedule/types",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getAppointmentsForDay=function(e,t,n){var a=this.basePath+"/schedule/{providerNo}/day/{date}".replace("{providerNo}",encodeURIComponent(String(e))).replace("{date}",encodeURIComponent(String(t))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter providerNo was null or undefined when calling getAppointmentsForDay.");if(null===t||void 0===t)throw new Error("Required parameter date was null or undefined when calling getAppointmentsForDay.");var r={method:"GET",url:a,params:{},headers:o};return n&&(r=Object.assign(r,n)),this.$http(r)},e.prototype.getAppointmentsForDay1=function(e,t){var n=this.basePath+"/schedule/day/{date}".replace("{date}",encodeURIComponent(String(e))),a=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter date was null or undefined when calling getAppointmentsForDay1.");var o={method:"GET",url:n,params:{},headers:a};return t&&(o=Object.assign(o,t)),this.$http(o)},e.prototype.getCalendarAppointmentStatuses=function(e){var t={method:"GET",url:this.basePath+"/schedule/calendar/statuses",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getCalendarEvents=function(e,t,n,a,o){var r=this.basePath+"/schedule/calendar/{providerId}".replace("{providerId}",encodeURIComponent(String(e))),i={},l=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter providerId was null or undefined when calling getCalendarEvents.");void 0!==t&&(i.startDate=t),void 0!==n&&(i.endDate=n),void 0!==a&&(i.site=a);var s={method:"GET",url:r,params:i,headers:l};return o&&(s=Object.assign(s,o)),this.$http(s)},e.prototype.getScheduleGroups=function(e){var t={method:"GET",url:this.basePath+"/schedule/groups",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getScheduleTemplateCodes=function(e){var t={method:"GET",url:this.basePath+"/schedule/templateCodes",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.updateAppointment=function(e,t){var n={method:"POST",url:this.basePath+"/schedule/updateAppointment",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.prototype.updateAppointmentStatus=function(e,t,n){var a=this.basePath+"/schedule/appointment/{id}/updateStatus".replace("{id}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter id was null or undefined when calling updateAppointmentStatus.");var r={method:"POST",url:a,data:t,params:{},headers:o};return n&&(r=Object.assign(r,n)),this.$http(r)},e.prototype.updateAppointmentType=function(e,t,n){var a=this.basePath+"/schedule/appointment/{id}/updateType".replace("{id}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter id was null or undefined when calling updateAppointmentType.");var r={method:"POST",url:a,data:t,params:{},headers:o};return n&&(r=Object.assign(r,n)),this.$http(r)},e.$inject=["$http","$httpParamSerializer","basePath"],e}();t.ScheduleApi=a},function(e,t,n){"use strict";t.__esModule=!0;var a=n(60),o=n(4),r=function(){function e(e,t,n,o,r,i,l,s,c,u,d){this.$q=e,this.$stateParams=t,this.$uibModal=n,this.$http=o,this.$httpParamSerializer=r,this.results_factory=i,this.util=l,this.demographicsService=s,this.scheduleService=c,this.globalStateService=u,this.focus=d,this.patient_model={uuid:null,full_name:null,has_photo:!0,patient_photo_url:"/imageRenderingServlet?source=local_client&clientId=0",clear:function(){this.uuid=null,this.full_name=null,this.patient_photo_url="/imageRenderingServlet?source=local_client&clientId=0",this.data.birth_date=null,this.data.health_number=null,this.data.ontario_version_code=null,this.data.phone_number_primary=null},fill_data:function(e){this.uuid=e.uuid,this.full_name=e.full_name,this.patient_photo_url="/imageRenderingServlet?source=local_client&clientId="+e.uuid,this.data.birth_date=e.birth_date,this.data.health_number=e.health_number,this.data.ontario_version_code=e.ontario_version_code,this.data.phone_number_primary=e.phone_number_primary},upload_photo:function(e){},data:{birth_date:null,health_number:null,ontario_version_code:null,phone_number_primary:null}},this.scheduleApi=new a.ScheduleApi(this.$http,this.$httpParamSerializer,"http://localhost:9090/ws/rs")}return e.prototype.searchPatients=function(e){var t={type:"Name",term:e,status:"active",integrator:!1,outofdomain:!0};return this.demographicsService.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({value_field:"uuid",data:{uuid:e.content[n].demographicNo,full_name:e.content[n].lastName+","+e.content[n].firstName,birth_date:e.content[n].dob,health_number:e.content[n].hin,phone_number_primary:e.content[n].phone}});return t},function(e){console.log(e)})},e.prototype.load_schedule_events=function(e,t,n,a,o,r,i,l,s){var c=this,u=this.$q.defer(),d=e.uuid,p=n.format("YYYY-MM-DD"),m=a.subtract(1,"seconds").format("YYYY-MM-DD");return this.scheduleService.getSchedulesForCalendar(d,p,m,t).then(function(e){u.resolve({data:c.snake_schedule_results(e)})}),u.promise},e.prototype.snake_appointment_data=function(e){return null==e?e:{schedule_uuid:e.scheduleUuid,event_status_uuid:e.eventStatusUuid,event_status_modifier:e.eventStatusModifier,start_time:e.startTime,end_time:e.endTime,site:e.site,reason:e.reason,num_invoices:e.numInvoices,demographics_patient_dob:e.demographicPatientDob,demographics_patient_name:e.demographicPatientName,demographics_patient_phone:e.demographicPatientPhone,demographics_patient_uuid:e.demographicPatientUuid,demographics_practitioner_uuid:e.demographicPractitionerUuid,tag_names:e.tagNames,tag_self_booked:e.tagSelfBooked,tag_self_cancelled:e.tagSelfCancelled,tag_system_codes:e.tagSystemCodes}},e.prototype.snake_availability_type=function(e){return null==e?e:{name:e.name,color:e.color,preferred_event_length_minutes:e.preferredEventLengthMinutes,system_code:e.systemCode}},e.prototype.snake_schedule_results=function(e){if(!angular.isArray(e))return e;for(var t=[],n=0;n<e.length;n++){var a=e[n];t.push({resourceId:a.resourceId,start:a.start,end:a.end,color:a.color,rendering:a.rendering,schedule_template_code:a.scheduleTemplateCode,className:a.className,availability_type:this.snake_availability_type(a.availabilityType),data:this.snake_appointment_data(a.data)})}return t},e.prototype.load_schedule_templates=function(){var e=this.$q.defer();return e.resolve([]),e.promise},e.prototype.load_availability_types=function(){var e=this.$q.defer(),t={};return this.scheduleService.getScheduleTemplateCodes().then(function(n){for(var a=0;a<n.length;a++){var o=n[a];t[o.code]={color:o.color,name:o.description,preferred_event_length_minutes:o.duration,system_code:null}}e.resolve(t)}),e.promise},e.prototype.load_event_statuses=function(){var t=this.$q.defer();return this.scheduleApi.getCalendarAppointmentStatuses().then(function(n){t.resolve(e.snake_appointment_statuses(n.data.body))}),t.promise},e.snake_appointment_statuses=function(e){if(!angular.isArray(e))return e;for(var t=[],n=0;n<e.length;n++)t.push({uuid:e[n].displayLetter,name:e[n].name,display_letter:e[n].displayLetter,color:e[n].color,icon:e[n].icon,rotates:e[n].rotates,system_code:e[n].systemCode,sort_order:e[n].sortOrder});return t},e.prototype.load_sites=function(){var e=this.$q.defer();return this.scheduleService.getSites().then(function(t){var n=[];if(angular.isArray(t))for(var a=0;a<t.length;a++)n.push({uuid:t[a].siteId,name:t[a].name,display_name:t[a].name,color:t[a].bgColor});e.resolve(n)}),e.promise},e.prototype.load_schedule_options=function(){var e=this.$q.defer();return this.scheduleService.getScheduleGroups().then(function(t){for(var n=0;n<t.length;n++)t[n].uuid=t[n].identifier;e.resolve(t)}),e.promise},e.prototype.get_selected_schedule=function(e){var t=null;if(null===(t=this.$stateParams.default_schedule?this.$stateParams.default_schedule:this.get_global_state("schedule_default"))&&(t=this.get_global_preference_setting("schedule_default")),this.util.exists(t))for(var n=0;n<e.length;n++)if(t===e[n].uuid)return e[n];return e.length>0?e[0]:null},e.prototype.get_selected_resources=function(e){return[]},e.prototype.get_selected_time_interval=function(e,t){var n=null,a=this.get_global_state("schedule_time_interval");if(null===a&&(a=this.get_global_preference_setting("schedule_time_interval")),this.util.exists(a))for(var o=0;o<e.length;o++)if(a===e[o]){n=e[o];break}return null===n?t:n},e.prototype.get_schedule_min_time=function(){return"08:00"},e.prototype.get_schedule_max_time=function(){return"20:00"},e.prototype.load_schedule=function(e){var t=this.$q.defer(),n={uuid:e,availabilities:[],relations:[]};return t.resolve({data:n}),t.promise},e.prototype.save_event=function(e,t,n,a,r,i,l,s,c){var u=this.$q.defer(),d={appointmentDate:this.util.get_date_string(n),startTime:this.util.get_time_string(n,"HH:mm"),duration:o.duration(a.diff(n)).asMinutes(),status:l,demographicNo:s,notes:r.description,reason:r.reason,location:c,providerNo:i};return this.scheduleApi.addAppointment(d).then(function(e){u.resolve(e.data)},function(e){u.reject(e.data)}),u.promise},e.prototype.process_save_results=function(e,t){if("SUCCESS"==(e||{}).status)return!0;var n=((e||{}).error||{}).message,a=((e||{}).error||{}).validationErrors;if(Array.isArray(a)){t.add_standard_error(n);for(var o=0,r=a;o<r.length;o++){var i=r[o];t.add_field_error(i.path,i.message)}}},e.prototype.get_global_preference_setting=function(e){return this.util.exists(this.globalStateService.preferences)&&this.util.exists(this.globalStateService.preferences.settings)?this.globalStateService.preferences.settings[e]:null},e.prototype.get_global_state=function(e){var t=this.globalStateService[e];return this.util.exists(t)||(t=null),t},e.prototype.save_global_state=function(e,t){this.globalStateService[e]=t},e.prototype.get_create_invoice_url=function(e,t,n){var a="#/invoice/create?schedule_event_uuid="+encodeURIComponent(e);return this.util.exists(n)&&(a+="&demographics_patient_uuid="+encodeURIComponent(n)),this.util.exists(t)&&(a+="&demographics_practitioner_uuid="+encodeURIComponent(t)),a},e.prototype.get_patient_demographic_url=function(e){return"#/patient/"+encodeURIComponent(e.data.demographics_patient_uuid)+"/view"},e.prototype.get_create_chart_note_url=function(e){return"#/patient/"+encodeURIComponent(e.data.demographics_patient_uuid)+"/chart_notes?event_uuid="+encodeURIComponent(e.data.uuid)},e.prototype.open_patient_dialog=function(e,t,n){return this.$uibModal.open({animation:!1,backdrop:"static",size:"lg",controller:"Invoice.Common.Patient.FormController",templateUrl:"code/invoice/common/patient/quick_form.html",resolve:{edit_mode:e,on_save_callback:t,load_error_link_patient_fn:n}})},e.prototype.get_schedule_height=function(){return 814},e.$inject=["$q","$stateParams","$uibModal","$http","$httpParamSerializer","resultsService","cpCalendar.Util","demographicsService","scheduleService","globalStateService","focusService"],e}();t.CalendarApiAdapter=r},function(e,t,n){"use strict";t.__esModule=!0;var a=n(61);angular.module("Schedule").service("Schedule.CalendarApiAdapter",a.CalendarApiAdapter)},function(e,t){angular.module("Help").controller("Help.HelpController",["$scope","$http",function(e,t){}])},function(e,t){angular.module("Help").controller("Help.SupportController",["$scope","$http",function(e,t){e.ospInfo={name:"OscarHost.ca",phone:"250-900-7373",contact:"Oscarhost Support",email:"support@oscarhost.ca",url:"https://help.oscarhost.ca"},e.buildInfo={versionDisplayName:"15-Beta",version:"master-0000"}}])},function(e,t,n){"use strict";angular.module("Help",[])},function(e,t){angular.module("Settings").controller("Settings.QuickLinkController",["$scope","$uibModalInstance",function(e,t){e.qll={},e.close=function(){t.close()},e.addQuickLink=function(n){n.$valid&&t.close(e.qll)}}])},function(e,t){angular.module("Settings").controller("Settings.ChangePasswordController",["$scope","$uibModalInstance",function(e,t){e.close=function(){t.close("Someone Closed Me")},e.changePassword=function(){console.log("password saved - NOT"),t.close("Someone Saved Me")}}])},function(e,t){angular.module("Settings").controller("Settings.SettingsController",["$scope","$http","$state","$uibModal","$filter","providerList","user","billingServiceTypes","loadedSettings","providerService","encounterForms","eforms","teams","groupNames","loadedApps","appService",function(e,t,n,a,o,r,i,l,s,c,u,d,p,m,h,g){var f=this;e.$emit("configureShowPatientList",!1),f.providerList=r,f.user=i,f.billingServiceTypes=l,f.pref=s,f.encounterForms=u.content,f.eforms=d,f.loadedApps=h,null==f.pref.recentPatients&&(f.pref.recentPatients="8"),f.formGroupNames=[{value:"",label:"None"}];for(var v=0;v<m.length;v++)f.formGroupNames.push({value:m[v],label:m[v]});f.teams=[{value:"-1",label:"All"}];for(v=0;v<p.length;v++)f.teams.push({value:p[v],label:p[v]});f.teams.push({value:"",label:"None"}),f.billingServiceTypesMod=[],angular.copy(f.billingServiceTypes,f.billingServiceTypesMod),f.billingServiceTypesMod.splice(0,0,{type:"no",name:"--None--"});for(v=0;v<f.pref.appointmentScreenForms.length;v++){if(null!=(b=o("filter")(f.encounterForms,{formName:f.pref.appointmentScreenForms[v]})))for(var _=0;_<b.length;_++)b[_].formName===f.pref.appointmentScreenForms[v]&&(b[_].checked=!0)}for(v=0;v<f.pref.appointmentScreenEforms.length;v++){var b;if(null!=(b=o("filter")(f.eforms,{id:f.pref.appointmentScreenEforms[v]})))for(_=0;_<b.length;_++)b[_].id===f.pref.appointmentScreenEforms[v]&&(b[_].checked=!0)}f.tabs=[{id:0,displayName:"Persona",path:"persona"},{id:1,displayName:"General",path:"general"},{id:2,displayName:"Schedule",path:"schedule"},{id:3,displayName:"Billing",path:"billing"},{id:4,displayName:"Rx",path:"rx"},{id:5,displayName:"Master Demographic",path:"masterdemo"},{id:6,displayName:"Consultations",path:"consults"},{id:7,displayName:"Documents",path:"documents"},{id:8,displayName:"Summary",path:"summary"},{id:9,displayName:"eForms",path:"eforms"},{id:10,displayName:"Inbox",path:"inbox"},{id:11,displayName:"Programs",path:"programs"},{id:12,displayName:"Integration",path:"integration"}],f.pageSizes=[{value:"PageSize.A4",label:"A4"},{value:"PageSize.A6",label:"A6"}],f.rxInteractionWarningLevels=[{value:"0",label:"Not Specified"},{value:"1",label:"Low"},{value:"2",label:"Medium"},{value:"3",label:"High"},{value:"4",label:"None"}],f.staleDates=[{value:"A",label:"All"},{value:"0",label:"0"},{value:"-1",label:"-1"},{value:"-2",label:"2"},{value:"-3",label:"3"},{value:"-4",label:"4"},{value:"-5",label:"5"},{value:"-6",label:"6"},{value:"-7",label:"7"},{value:"-8",label:"8"},{value:"-9",label:"9"},{value:"-10",label:"10"},{value:"-11",label:"11"},{value:"-12",label:"12"},{value:"-13",label:"13"},{value:"-14",label:"14"},{value:"-15",label:"15"},{value:"-16",label:"16"},{value:"-17",label:"17"},{value:"-18",label:"18"},{value:"-19",label:"19"},{value:"-20",label:"20"},{value:"-21",label:"21"},{value:"-22",label:"22"},{value:"-23",label:"23"},{value:"-24",label:"24"},{value:"-25",label:"25"},{value:"-26",label:"26"},{value:"-27",label:"27"},{value:"-28",label:"28"},{value:"-29",label:"29"},{value:"-30",label:"30"},{value:"-31",label:"31"},{value:"-32",label:"32"},{value:"-33",label:"33"},{value:"-34",label:"34"},{value:"-35",label:"35"},{value:"-36",label:"36"}],f.olisLabs=[{value:"",label:""},{value:"5552",label:"Gamma-Dynacare"},{value:"5407",label:"CML"},{value:"5687",label:"LifeLabs"}],f.pasteFormats=[{value:"single",label:"Single Line"},{value:"multi",label:"Multi Line"}],f.letterHeadNameDefaults=[{value:"1",label:"Provider (user)"},{value:"2",label:"MRP"},{value:"3",label:"Clinic"}],null==f.pref.consultationLetterHeadNameDefault&&(f.pref.consultationLetterHeadNameDefault="1"),void 0!==n.current.data?f.currentTab=o("filter")(f.tabs,{path:n.current.data.tab})[0]:f.currentTab=f.tabs[0],f.isActive=function(e){return null!=e&&null!=f.currentTab&&e.id==f.currentTab.id},f.changeTab=function(e){f.currentTab=e,n.go("settings."+e.path)},f.save=function(){for(var e=[],t=0;t<f.pref.appointmentScreenQuickLinks.length;t++)null!=f.pref.appointmentScreenQuickLinks[t].checked&&0!=f.pref.appointmentScreenQuickLinks[t].checked||e.push({name:f.pref.appointmentScreenQuickLinks[t].name,url:f.pref.appointmentScreenQuickLinks[t].url});f.pref.appointmentScreenQuickLinks=e,c.saveSettings(f.user.providerNo,f.pref).then(function(e){alert("saved")})},f.cancel=function(){f.pref={},n.go("dashboard")},f.selectEncounterForms=function(){for(var e=o("filter")(f.encounterForms,{checked:!0}),t=[],n=0;n<e.length;n++)t.push(e[n].formName);f.pref.appointmentScreenForms=t},f.selectEForms=function(){for(var e=o("filter")(f.eforms,{checked:!0}),t=[],n=0;n<e.length;n++)t.push(e[n].id);f.pref.appointmentScreenEforms=t},f.removeQuickLinks=function(){for(var e=[],t=0;t<f.pref.appointmentScreenQuickLinks.length;t++)null!=f.pref.appointmentScreenQuickLinks[t].checked&&0!=f.pref.appointmentScreenQuickLinks[t].checked||e.push(f.pref.appointmentScreenQuickLinks[t]);f.pref.appointmentScreenQuickLinks=e},f.openChangePasswordModal=function(){window.open("../provider/providerchangepassword.jsp","change_password","width=750,height=500")},f.openQuickLinkModal=function(){a.open({templateUrl:"src/settings/quickLink.jsp",controller:"QuickLinkController"}).result.then(function(e){null!=e&&null!=e&&null!=e.name&&null!=e.url&&f.pref.appointmentScreenQuickLinks.push(e)})},f.editDocumentTemplates=function(){window.open("../admin/displayDocumentDescriptionTemplate.jsp","document_templates","width=700,height=450")},f.showProviderColourPopup=function(){window.open("../provider/providerColourPicker.jsp","provider_colour","width=700,height=450")},f.showDefaultEncounterWindowSizePopup=function(){window.open("../setProviderStaleDate.do?method=viewEncounterWindowSize","encounter_window_sz","width=700,height=450")},f.openConfigureEChartCppPopup=function(){window.open("../provider/CppPreferences.do","configure_echart_cpp","width=700,height=450")},f.openManageAPIClientPopup=function(){window.open("../provider/clients.jsp","api_clients","width=700,height=450")},f.openMyOscarUsernamePopup=function(){window.open("../provider/providerIndivoIdSetter.jsp","invivo_setter","width=700,height=450")},f.authenticate=function(e){window.open("../apps/oauth1.jsp?id="+e.id,"appAuth","width=700,height=450")},f.refreshAppList=function(){console.log("refresh",f.loadedApps),g.getApps().then(function(e){f.loadedApps=e},function(e){console.log("applist:"+e)}),console.log("refresh",f.loadedApps)}}])},function(e,t,n){"use strict";angular.module("Settings",["Common","Common.Services"])},function(e,t){angular.module("Document").controller("Document.DocumentsController",["$scope","securityService",function(e,t){var n=this;n.me=null,e.$watch(function(){return t.getUser()},function(e){n.me=e,null!=e&&window.open("../dms/documentReport.jsp?function=provider&functionid="+n.me.providerNo,"edocView","height=700,width=1024")},!0),n.openPopup=function(){window.open("../dms/documentReport.jsp?function=provider&functionid="+n.me.providerNo,"edocView","height=700,width=1024")}}])},function(e,t,n){"use strict";angular.module("Document",["Common","Common.Services"])},function(e,t){angular.module("Report").controller("Report.ReportSHMentalHealthController",["$scope","$log","$filter",function(e,t,n){var a=this;a.params={startDate:new Date},a.generateReport=function(){t.log("run sh mental health report");var e="../PMmodule/StreetHealthIntakeReportAction.do?startDate="+n("date")(a.params.startDate,"yyyy-MM-dd");window.open(e,"report_sh","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportRegistrationIntakeController",["$scope","$log","$filter",function(e,t,n){var a=this;a.params={startDate:new Date,endDate:new Date,includePastForms:!0},a.generateReport=function(){t.log("run registration intake report");var e="../PMmodule/GenericIntake/Report.do?method=report&type=quick&startDate="+n("date")(a.params.startDate,"yyyy-MM-dd")+"&endDate="+n("date")(a.params.endDate,"yyyy-MM-dd")+"&includePast="+a.params.includePastForms;window.open(e,"report_registration_intake","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportPatientChartListController",["$scope","$log","providerService",function(e,t,n){var a=this;a.params={},a.searchProviders=function(e){var t={searchTerm:e,active:!0};return n.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},a.updateProviderNo=function(e,t,n){a.params.providerNo=t,a.params.name=n},a.generateReport=function(){var e=a.params;if(!e.providerNo)return alert("Please enter a provider"),!1;var t="../report/reportpatientchartlist.jsp?provider_no="+e.providerNo;window.open(t,"report_patientchartlist","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportOldPatientsController",["$scope","$log","providerService",function(e,t,n){var a=this;a.params={providerNo:"",age:65},a.searchProviders=function(e){var t={searchTerm:e,active:!0};return n.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},a.updateProviderNo=function(e,t,n){a.params.providerNo=t,a.params.name=n},a.generateReport=function(){var e=a.params,t="../report/reportpatientchartlistspecial.jsp?provider_no="+(""===e.providerNo?"*":e.providerNo)+"&age="+e.age;window.open(t,"report_oldpatients","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportNoShowAppointmentSheetController",["$scope","$log","$filter","providerService",function(e,t,n,a){var o=this;o.params={providerNo:"",startDate:new Date},o.searchProviders=function(e){var t={searchTerm:e,active:!0};return a.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},o.updateProviderNo=function(e,t,n){o.params.providerNo=t,o.params.name=n},o.generateReport=function(){var e=o.params,t=n("date")(e.startDate,"yyyy-MM-dd"),a="../report/reportnoshowapptlist.jsp?provider_no="+e.providerNo+"&sdate="+t;window.open(a,"report_noShowApptSheet","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportFollowUpIntakeController",["$scope","$log","$filter",function(e,t,n){var a=this;a.params={startDate:new Date,endDate:new Date,includePastForms:!0},a.generateReport=function(){t.log("run follow up intake report");var e="../PMmodule/GenericIntake/Report.do?method=report&type=indepth&startDate="+n("date")(a.params.startDate,"yyyy-MM-dd")+"&endDate="+n("date")(a.params.endDate,"yyyy-MM-dd")+"&includePast="+a.params.includePastForms;window.open(e,"report_followup_intake","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportEdbListController",["$scope","$log","$filter",function(e,t,n){var a=this;a.params={startDate:new Date,endDate:new Date,version:"",region:"ON"},a.generateReport=function(){t.log("run edb report");var e=n("date")(a.params.startDate,"yyyy-MM-dd"),o=n("date")(a.params.endDate,"yyyy-MM-dd"),r="";"BC"===a.params.region&&(r="05"==a.params.version?"../report/reportbcedblist2007.jsp?startDate="+e+"&endDate="+o:"../report/reportbcedblist.jsp?startDate="+e+"&endDate="+o),"ON"===a.params.region&&(r="05"==a.params.version?"../report/reportonedblist.jsp?startDate="+e+"&endDate="+o:"../report/reportnewedblist.jsp?startDate="+e+"&endDate="+o),window.open(r,"report_edb","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportDaySheetController",["$scope","$log","$filter","providerService",function(e,t,n,a){var o=this;o.params={providerNo:"",type:"",startDate:new Date,endDate:new Date,startTime:null,endTime:null},o.searchProviders=function(e){var t={searchTerm:e,active:!0};return a.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},o.updateProviderNo=function(e,t,n){o.params.providerNo=t,o.data.providerNo=n},o.generateReport=function(){var e=o.params;if("all"===e.type||"all-nr"===e.type){var t=n("date")(e.startDate,"yyyy-MM-dd"),a=n("date")(e.endDate,"yyyy-MM-dd"),r=n("date")(e.startTime,"HH:mm"),i=n("date")(e.endTime,"HH:mm"),l="../report/reportdaysheet.jsp?dsmode=all&provider_no="+(""===e.providerNo?"*":e.providerNo)+"&sdate="+t+"&edate="+a+"&sTime="+r+"&eTime="+i;"all-nr"===e.type&&(l+="&rosteredStatus=true"),window.open(l,"report_daysheet","height=900,width=700")}if("new"===e.type){t=n("date")(e.startDate,"yyyy-MM-dd"),l="../report/reportdaysheet.jsp?dsmode=new&provider_no="+(""===e.providerNo?"*":e.providerNo)+"&sdate="+t;window.open(l,"report_daysheet","height=900,width=700")}if("lab"===e.type){l="../report/printLabDaySheetAction.do?xmlStyle=labDaySheet.xml&input_date="+(t=n("date")(e.startDate,"yyyy-MM-dd"));window.open(l,"report_daysheet","height=900,width=700")}if("billing"===e.type){l="../report/printLabDaySheetAction.do?xmlStyle=billDaySheet.xml&input_date="+(t=n("date")(e.startDate,"yyyy-MM-dd"));window.open(l,"report_daysheet","height=900,width=700")}if("tab"===e.type){t=n("date")(e.startDate,"yyyy-MM-dd"),l="../report/tabulardaysheetreport.jsp?provider_no="+(""===e.providerNo?"*":e.providerNo)+"&sdate="+t;window.open(l,"report_daysheet","height=900,width=700")}},o.reset=function(){o.params={providerNo:"",type:"",startDate:new Date,endDate:new Date,startTime:null,endTime:null}}}])},function(e,t){angular.module("Report").controller("Report.ReportBadAppointmentSheetController",["$scope","$log","providerService","$filter",function(e,t,n,a){var o=this;o.params={providerNo:"",startDate:new Date},o.searchProviders=function(e){var t={searchTerm:e,active:!0};return n.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},o.updateProviderNo=function(e,t,n){o.params.providerNo=t,o.params.name=n},o.generateReport=function(){var e=o.params,t=a("date")(e.startDate,"yyyy-MM-dd"),n="../report/reportapptsheet.jsp?dsmode=all&provider_no="+e.providerNo+"&sdate="+t;window.open(n,"report_badApptSheet","height=900,width=700")}}])},function(e,t){angular.module("oscarProviderViewModule").factory("ReportNavigation",["$rootScope",function(e){return{location:"",load:function(e){this.location=e}}}]),angular.module("Report").controller("Report.ReportsController",["$scope","$state","$filter","$log","ReportNavigation",function(e,t,n,a,o){var r=this;e.$emit("configureShowPatientList",!1),r.reports=[{name:"Daysheets",templateUrl:"src/report/report_daysheet.jsp"},{name:"Active Patients",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/reportactivepatientlist.jsp"},{name:"Old Patients",templateUrl:"src/report/report_oldPatients.jsp"},{name:"Patient Chart List",templateUrl:"src/report/report_patientChartList.jsp"},{name:"EDB List",templateUrl:"src/report/report_edb_list.jsp"},{name:"Bad Appointments",templateUrl:"src/report/report_badAppointments.jsp"},{name:"No Show Appointments",templateUrl:"src/report/report_noShowAppointments.jsp"},{name:"Consultations",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/ConsultationReport.jsp"},{name:"Lab Requisitions",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/LabReqReport.jsp"},{name:"Preventions",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarPrevention/PreventionReporting.jsp"},{name:"Injections",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/InjectionReport2.jsp"},{name:"Demographic Report Tool",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/ReportDemographicReport.jsp"},{name:"Patient Study List",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/demographicstudyreport.jsp"},{name:"Chronic Disease Management",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/oscarMeasurements/SetupSelectCDMReport.do"},{name:"Waiting List",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarWaitingList/SetupDisplayWaitingList.do?waitingListId="},{name:"Forms",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/reportFormRecord.jsp"},{name:"Clinical",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/ClinicalReports.jsp"},{name:"SCBP demographic Report",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/reportBCARDemo.jsp"},{name:"Report By Template",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/reportByTemplate/homePage.jsp"},{name:"General Forms",group:"CAISI",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../PMmodule/ClientManager.do?method=getGeneralFormsReport"},{name:"Registration Intake",group:"CAISI",templateUrl:"src/report/report_registration_intake.jsp"},{name:"Follow-up Intake",group:"CAISI",templateUrl:"src/report/report_followup_intake.jsp"},{name:"Activity Report",group:"CAISI",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../PMmodule/Reports/ProgramActivityReport.do"},{name:"UCF Report",group:"CAISI",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../SurveyManager.do?method=reportForm"},{name:"SH Mental Health Report",group:"CAISI",templateUrl:"src/report/report_sh_mental_health.jsp"},{name:"OSIS Report",group:"Public Health",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/OSISReport.jsp"},{name:"One Time Consult CDS Report",group:"Public Health",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/CDSOneTimeConsultReport.jsp"}],r.init=function(){r.reportGroup="",r.reportGroups=r.getReportGroups(),r.reportSidebar=o,r.test=r.reportSidebar.url},r.editDemographicSet=function(){r.selectReport({name:"Demographic Set Edit",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/demographicSetEdit.jsp"})},r.getReports=function(){return null!=r.reportGroup&&r.reportGroup.length>0?n("filter")(r.reports,{group:r.reportGroup}):r.reports},r.getReportGroups=function(){for(var e=[{value:"",label:"All Groups"}],t={},n=0;n<r.reports.length;n++)null!=r.reports[n].group&&(t[r.reports[n].group]=r.reports[n].group);for(var a in t)e.push({value:a,label:a});return e},r.selectReport=function(e){r.currentReport=e,!0===e.direct?window.open(e.window.url,e.name,"width="+e.window.width+"&height="+e.window.height):o.load(e.templateUrl)}}])},function(e,t,n){"use strict";angular.module("Report",["Common","Common.Services"])},function(e,t,n){"use strict";angular.module("Patient.Search").controller("Patient.Search.RemotePatientResultsController",["$http","$scope","$uibModalInstance","results","total",function(e,t,n,a,o){t.results=a,t.total=o,t.currentPage=1,t.pageSize=5,t.startIndex=0,t.close=function(){n.close("Someone Closed Me")},t.doImport=function(e){var t="../appointment/copyRemoteDemographic.jsp?remoteFacilityId="+e.remoteFacilityId+"&demographic_no="+e.demographicNo;window.open(t,"ImportDemo","width=700, height=1027")},t.save=function(){n.close("Someone Saved Me")},t.prevPage=function(){0!=t.startIndex&&(t.currentPage--,t.startIndex=(t.currentPage-1)*t.pageSize)},t.nextPage=function(){t.startIndex+t.pageSize>t.total||(t.currentPage++,t.startIndex=(t.currentPage-1)*t.pageSize)}}])},function(e,t,n){"use strict";(function(e){angular.module("Patient.Search").controller("Patient.Search.PatientSearchController",["$q","$state","$stateParams","$uibModal","NgTableParams","securityService","demographicsService",function(t,n,a,o,r,i,l){var s={demographicReadAccess:null,search:null,init:function(){s.clearParams(),Juno.Common.Util.exists(a.term)&&(s.search.term=a.term),i.hasRights({items:[{objectName:"_demographic",privilege:"r"}]}).then(function(e){Juno.Common.Util.exists(e.content)&&1===e.content.length?(s.demographicReadAccess=e.content[0],s.demographicReadAccess&&s.initTable()):(console.log("failed to load rights",e),s.demographicReadAccess=!1)},function(e){console.log(e),s.demographicReadAccess=!1})},initTable:function(){s.tableParams=new r({page:1,count:10,sorting:{Name:"asc"}},{getData:function(e){var n=t.defer(),a=e.url().count,o=e.url().page;s.search.params=e.url();var r=[];return r.push(l.search(s.search,(o-1)*a,a)),s.integratorResults=null,s.search.integrator&&r.push(l.searchIntegrator(s.search,100)),t.all(r).then(function(t){var a=t[0];e.total(a.total),s.search.integrator&&(s.integratorResults=t[1]),n.resolve(a.content)},function(e){console.log("patient search failed",e),n.reject()}),n.promise}})},searchPatients:function(){if("DOB"===s.search.type){var t=e(s.search.term,["YYYY-MM-DD","YYYY/MM/DD"],!0);if(!t.isValid())return void alert("Please enter Date of Birth in format YYYY-MM-DD.");s.search.term=t.format("YYYY-MM-DD")}s.tableParams.page(1),s.tableParams.reload()},clearParams:function(e){Juno.Common.Util.exists(e)||(e="Name"),s.search={type:e,term:"",status:"all",integrator:!1,outofdomain:!0},s.searchTermPlaceHolder="DOB"===s.search.type?"YYYY-MM-DD":"Search Term",Juno.Common.Util.exists(s.tableParams)&&(s.tableParams.page(1),s.tableParams.reload())},toggleParam:function(e){["integrator","outofdomain"].indexOf(e)>-1&&(s.search[e]=!s.search[e])},loadRecord:function(e){n.go("record.details",{demographicNo:e,hideNote:!0})},showIntegratorResults:function(){var e=[],t=0;Juno.Common.Util.exists(s.integratorResults)&&(e=s.integratorResults.content,t=s.integratorResults.total),o.open({templateUrl:"src/patientsearch/remotePatientResults.jsp",controller:"RemotePatientResultsController",resolve:{results:function(){return e},total:function(){return t}}})}};return s}])}).call(this,n(4))},function(e,t,n){"use strict";angular.module("Patient.Search",["Common.Services"])},function(e,t){angular.module("Inbox").controller("Inbox.InboxController",["$scope","$http",function(e,t){}])},function(e,t,n){"use strict";angular.module("Inbox",[])},function(e,t,n){(function(e,t){angular.module("Consults").controller("Consults.ConsultResponseController",["$scope","$http","$resource","$location","$uibModal","consultService","demographicService","securityService","summaryService","staticDataService","consult","user",function(n,a,o,r,i,l,s,c,u,d,p,m){var h=this;if(c.hasRight("_con","r").then(function(e){h.consultReadAccess=e},function(e){console.log(e)}),c.hasRight("_con","u").then(function(e){h.consultUpdateAccess=e},function(e){console.log(e)}),c.hasRight("_con","w").then(function(e){h.consultWriteAccess=e},function(e){console.log(e)}),h.consult=p,p.letterheadList=Juno.Common.Util.toArray(p.letterheadList),p.referringDoctorList=Juno.Common.Util.toArray(p.referringDoctorList),p.faxList=Juno.Common.Util.toArray(p.faxList),p.sendToList=Juno.Common.Util.toArray(p.sendToList),p.attachments=Juno.Common.Util.toArray(p.attachments),Juno.Consults.Common.sortAttachmentDocs(p.attachments),null==p.letterheadName)for(var g=0;g<p.letterheadList.length;g++)if(p.letterheadList[g].id==m.providerNo){p.letterheadName=p.letterheadList[g].id,p.letterheadAddress=p.letterheadList[g].address,p.letterheadPhone=p.letterheadList[g].phone;break}null==p.letterheadFax&&1==p.faxList.length&&(p.letterheadFax=p.faxList[0].faxNumber),angular.forEach(p.referringDoctorList,function(e){null!==p.referringDoctor&&e.id===p.referringDoctor.id&&(p.referringDoctor=e)}),p.demographic.extras=Juno.Common.Util.toArray(p.demographic.extras);for(g=0;g<p.demographic.extras.length;g++)if("demo_cell"==p.demographic.extras[g].key){p.demographic.cellPhone=p.demographic.extras[g].value;break}h.urgencies=d.getConsultUrgencies(),h.statuses=d.getConsultResponseStatuses(),h.hours=d.getHours(),h.minutes=d.getMinutes(),h.parseTime=function(e){var t=e.split(":");p.appointmentHour=t[0],p.appointmentMinute=t[1]},null!==p.appointmentTime&&h.parseTime(p.appointmentTime),h.consultChanged=-1,n.$watchCollection(function(){return h.consult},function(){h.consultChanged++}),n.$on("$stateChangeStart",function(e){h.consultChanged>0&&(confirm("You may have unsaved data. Are you sure to leave?")||e.preventDefault())}),h.changeLetterhead=function(){var t=e("#letterhead").selectedIndex;null!=t&&(p.letterheadAddress=p.letterheadList[t].address,p.letterheadPhone=p.letterheadList[t].phone)},h.writeToBox=function(e,t){for(var n=Juno.Common.Util.toArray(e.summaryItem),a=null,o=0;o<n.length;o++)a=Juno.Common.Util.addNewLine(n[o].displayName,a);"clinicalInfo"==t?p.clinicalInfo=Juno.Common.Util.addNewLine(a,p.clinicalInfo):"concurrentProblems"==t?p.concurrentProblems=Juno.Common.Util.addNewLine(a,p.concurrentProblems):"currentMeds"==t&&(p.currentMeds=Juno.Common.Util.addNewLine(a,p.currentMeds))},h.getFamilyHistory=function(e){u.getFamilyHistory(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No family history"),h.writeToBox(t,e)},function(e){alert("Error grabbing family history!"),console.log(e)})},h.getMedicalHistory=function(e){u.getMedicalHistory(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No medical history"),h.writeToBox(t,e)},function(e){alert("Error grabbing medical history!"),console.log(e)})},h.getSocialHistory=function(e){u.getSocialHistory(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No social history"),h.writeToBox(t,e)},function(e){alert("Error grabbing social history!"),console.log(e)})},h.getOngoingConcerns=function(e){u.getOngoingConcerns(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No ongoing concerns"),h.writeToBox(t,e)},function(e){alert("Error grabbing ongoing concerns!"),console.log(e)})},h.getOtherMeds=function(e){u.getOtherMeds(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No other meds"),h.writeToBox(t,e)},function(e){alert("Error grabbing other meds!"),console.log(e)})},h.getReminders=function(e){u.getReminders(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No reminders"),h.writeToBox(t,e)},function(e){alert("Error grabbing reminders!"),console.log(e)})},h.invalidData=function(){return h.consult.urgency?h.consult.letterheadName?Juno.Common.Util.isUndefinedOrNull(h.consult.referringDoctor)?(alert("Please select a Referring Doctor"),!0):(!h.consult.demographic||""===h.consult.demographic)&&(alert("Error! Invalid patient!"),!0):(alert("Please select a Letterhead"),!0):(alert("Please select an Urgency"),!0)},h.setAppointmentTime=function(){null!==p.appointmentHour&&null!==p.appointmentMinute?(apptTime=t(Date.now()),apptTime.set("hours",p.appointmentHour),apptTime.set("minute",p.appointmentMinute),p.appointmentTime=apptTime):p.appointmentTime=null},h.openAttach=function(e){window.open("../"+e.url)},h.attachFiles=function(){i.open({templateUrl:"src/consults/consultAttachment.jsp",controller:"Consults.ConsultResponseAttachmentController as consultAttachmentCtrl",windowClass:"attachment-modal-window",backdrop:"static",resolve:{consult:function(){return p}}}).result.then(function(e){p.attachmentsChanged&&(h.consultChanged++,p.attachmentsChanged=!1)},function(e){console.log(e)})},h.save=function(){return h.consultWriteAccess||null!=p.id?h.consultUpdateAccess?!h.invalidData()&&(h.consultSaving=!0,h.setAppointmentTime(),l.saveResponse(p).then(function(e){null===p.id&&r.path("/record/"+p.demographic.demographicNo+"/consultResponse/"+e.body.id)},function(e){console.log(e)}),h.consultSaving=!1,h.consultChanged=-1,!0):(alert("You don't have right to update consult"),!1):(alert("You don't have right to save new consult"),!1)},h.close=function(){"patient"===r.search().list?r.path("/record/"+p.demographic.demographicNo+"/consultResponses"):r.path("/consultResponses")};var f="<html><style>body{width:800px;font-family:arial,verdana,tahoma,helvetica,sans serif}table{width:100%}th{text-align:left;font-weight:bold;width:1;white-space:nowrap}td{vertical-align:top}label{font-weight:bold}em{font-size:small}.large{font-size:large}.center{text-align:center}</style><style media='print'>button{display:none}.noprint{display:none}</style><script>function printAttachments(url){window.open('../'+url);}<\/script><body>";h.sendFax=function(){var t=Juno.Common.Util.toTrimmedString(h.urgencies[e("#urgency").val()].name),n=Juno.Common.Util.toTrimmedString(p.letterheadList[e("#letterhead").val()].name),a=Juno.Common.Util.getPrintPage2(t,n,p,m),o=encodeURIComponent(f+a),r=p.id,i=p.demographic.demographicNo,l=Juno.Common.Util.toTrimmedString(p.letterheadFax),s=Juno.Common.Util.toTrimmedString(p.referringDoctor.faxNumber);window.open("../fax/CoverPage.jsp?consultResponsePage="+o+"&reqId="+r+"&demographicNo="+i+"&letterheadFax="+l+"&fax="+s)},h.printPreview=function(){if(!h.invalidData()){var t=window.open("","consultResponsePrintWin","width=830,height=900,scrollbars=yes,location=no");t.document.open();for(var n="",a=0;a<p.attachments.length;a++)n+="<div class='noprint'><button onclick=printAttachments('"+p.attachments[a].url+"')>Print attachment</button> "+p.attachments[a].displayName+"</div>";var o=Juno.Common.Util.toTrimmedString(h.urgencies[e("#urgency").val()].name),r=Juno.Common.Util.toTrimmedString(p.letterheadList[e("#letterhead").val()].name),i=h.getPrintPage2(o,r,p,m);t.document.write(f+"<button onclick='window.print()'>Print</button><button onclick='window.close()'>Close</button>"+n+i),t.document.close()}},h.getPrintPage2=function(e,t,n,a){var o=Juno.Common.Util.toTrimmedString(n.letterheadList[0].name),r=Juno.Common.Util.formatDate(n.responseDate),i=Juno.Common.Util.formatDate(n.referralDate),l=Juno.Common.Util.toTrimmedString(n.letterheadAddress),s=Juno.Common.Util.toTrimmedString(n.letterheadPhone),c=Juno.Common.Util.toTrimmedString(n.letterheadFax),u=Juno.Common.Util.toTrimmedString(n.referringDoctor.name),d=Juno.Common.Util.toTrimmedString(n.referringDoctor.phoneNumber),p=Juno.Common.Util.toTrimmedString(n.referringDoctor.faxNumber),m=Juno.Common.Util.toTrimmedString(n.referringDoctor.streetAddress),h=Juno.Common.Util.toTrimmedString(n.demographic.lastName)+", "+Juno.Common.Util.toTrimmedString(n.demographic.firstName),g=Juno.Common.Util.toTrimmedString(n.demographic.phone),f=Juno.Common.Util.toTrimmedString(n.demographic.alternativePhone),v=Juno.Common.Util.formatDate(n.demographic.dateOfBirth),_=Juno.Common.Util.toTrimmedString(n.demographic.sexDesc),b=Juno.Common.Util.toTrimmedString(n.demographic.hin)+"-"+Juno.Common.Util.toTrimmedString(n.demographic.ver),S=Juno.Common.Util.toTrimmedString(n.demographic.chartNo),C="";null!=n.demographic.address&&(C=Juno.Common.Util.toTrimmedString(n.demographic.address.address)+", "+Juno.Common.Util.toTrimmedString(n.demographic.address.city)+", "+Juno.Common.Util.toTrimmedString(n.demographic.address.province)+" "+Juno.Common.Util.toTrimmedString(n.demographic.address.postal));var y=Juno.Common.Util.formatDate(n.appointmentDate),N=Juno.Common.Util.formatTime(n.appointmentTime),A=Juno.Common.Util.toTrimmedString(n.reasonForReferral);return"<div class='center'><label class='large'>"+o+"</label><br/><label>Consultation Response</label><br/></div><br/><table><tr><td><label>Date: </label>"+r+"</td><td rowspan=6 width=10></td><td><label>Status: </label>"+e+"</td></tr><tr><td colspan=2></td></tr><tr><th>FROM:</th><th>TO:</th></tr><tr><td><p class='large'>"+t+"</p>"+l+"<br/><label>Tel: </label>"+s+"<br/><label>Fax: </label>"+c+"</td><td><table><tr><th>Referring Doctor:</th><td>"+u+"</td></tr><tr><th>Phone:</th><td>"+d+"</td></tr><tr><th>Fax:</th><td>"+p+"</td></tr><tr><th>Address:</th><td>"+m+"</td></tr></table></td></tr><tr><td colspan=2></td></tr><tr><td><table><tr><th>Patient:</th><td>"+h+"</td></tr><tr><th>Address:</th><td>"+C+"</td></tr><tr><th>Phone:</th><td>"+g+"</td></tr><tr><th>Work Phone:</th><td>"+f+"</td></tr><tr><th>Birthdate:</th><td>"+v+"</td></tr></table></td><td><table><tr><th>Sex:</th><td>"+_+"</td></tr><tr><th>Health Card No:</th><td>"+b+"</td></tr><tr><th>Appointment date:</th><td>"+y+"</td></tr><tr><th>Appointment time:</th><td>"+N+"</td></tr><tr><th>Chart No:</th><td>"+S+"</td></tr></table></td></tr></table><br/><table><tr><th>Examination:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.examination)+"<hr></td></tr><tr><th>Impression:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.impression)+"<hr></td></tr><tr><th>Plan:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.plan)+"<hr></td></tr><tr><td></td></tr><tr><th>Reason for consultation: (Date: "+i+")</th></tr><tr><td>"+A+"<hr></td></tr><tr><th>Pertinent Clinical Information:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.clinicalInfo)+"<hr></td></tr><tr><th>Significant Concurrent Problems:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.concurrentProblems)+"<hr></td></tr><tr><th>Current Medications:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.currentMeds)+"<hr></td></tr><tr><th>Allergies:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.allergies)+"<hr></td></tr><tr><td><label>Consultant: </label>"+(Juno.Common.Util.toTrimmedString(a.lastName)+", "+Juno.Common.Util.toTrimmedString(a.firstName))+"</td></tr><tr><td></td></tr><tr><td><div class='center'><em>Created by: OSCAR The open-source EMR www.oscarcanada.org</em></div></td></tr></table></body></html>"}}])}).call(this,n(0),n(4))},function(e,t){angular.module("Consults").controller("Consults.ConsultResponseListController",["$scope","$timeout","$state","$location","NgTableParams","consultService","providerService","demographicService","demographicsService","securityService","staticDataService",function(e,t,n,a,o,r,i,l,s,c,u){var d=this;d.onRecordPage=!1,d.demographicNo=null,d.statuses=u.getConsultResponseStatuses(),d.urgencies=u.getConsultUrgencies(),d.lastResponse="",d.teams=[],d.consult={};d.search={team:"All Teams",startIndex:0,numToReturn:10},d.init=function(){n.params.demographicNo&&(d.demographicNo=parseInt(n.params.demographicNo),d.onRecordPage=!0,d.search.list="patient"),d.getAccessRights(),d.getTeams()},d.getAccessRights=function(){c.hasRight("_con","r").then(function(e){d.consultReadAccess=e},function(e){console.log(e)}),c.hasRight("_con","u").then(function(e){d.consultUpdateAccess=e},function(e){console.log(e)}),c.hasRight("_con","w").then(function(e){d.consultWriteAccess=e},function(e){console.log(e)})},d.getTeams=function(){i.getActiveTeams().then(function(e){d.teams=e,d.teams.unshift("All Teams"),d.search.team="All Teams"},function(e){console.log(e)})},d.searchPatients=function(e){var t={type:"Name",term:e,active:!0,integrator:!1,outofdomain:!0};return s.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({demographicNo:e.content[n].demographicNo,name:e.content[n].lastName+", "+e.content[n].firstName});return t},function(e){console.log(e)})},d.searchMrps=function(e){var t={searchTerm:e,active:!0};return i.searchProviders(t).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({mrpNo:e[n].providerNo,name:e[n].name});return t},function(e){console.log(e)})},d.updateMrpNo=function(e){Juno.Common.Util.exists(e)?(d.search.mrpNo=Number(e.mrpNo),d.consult.mrpName=e.name):i.getProvider(e).then(function(t){d.search.mrpNo=Number(e),d.consult.mrpName=t.lastName+", "+t.firstName,d.doSearch(!0)},function(e){console.log(e)})},d.updateDemographicNo=function(e,t,n){null!==e&&(d.demographicName=e.name,d.demographicNo=e.demographicNo,d.tableParams.reload())},d.checkAll=function(){angular.forEach(d.lastResponse,function(e){e.checked=!0})},d.checkNone=function(){angular.forEach(d.lastResponse,function(e){e.checked=!1})},d.editConsult=function(e){return e?(url="/record/"+e.demographic.demographicNo+"/consultResponse/"+e.id,a.path(url).search(d.search),!0):(alert("Something went wrong"),!1)},d.addConsult=function(){if(!d.consultWriteAccess)return alert("You don't have right to create new consult response"),!1;if(d.demographicNo){var e="/record/"+d.demographicNo+"/consultResponse/new";return a.path(e).search(d.search),!0}return alert("Something went wrong"),!1},d.removeDemographicAssignment=function(){d.demographicNo=null,d.demographicName=null,d.tableParams.reload()},d.removeMrpAssignment=function(){d.search.mrpNo=null,d.consult.mrpName=null,d.tableParams.reload()},d.clear=function(){d.onRecordPage||d.removeDemographicAssignment(),d.removeMrpAssignment(),d.search={team:"All Teams",startIndex:0,numToReturn:10},d.doSearch()},d.doSearch=function(e){a.search(d.search),d.tableParams.reload()},d.tableParams=new o({page:1,count:10,sorting:{ReferralDate:"desc"}},{getData:function(e){d.getSavedSearchParams();var t=e._params.count,n=e.url().page;d.search.startIndex=(n-1)*t,d.search.numToReturn=parseInt(t),d.search.page=e.url().page,d.search.perPage=e.url().count;var a=/sorting\[(\w+)\]/g;for(var o in e.url()){var i=a.exec(String(o));i&&(d.search.sortColumn=i[1],d.search.sortDirection=e.url()[String(o)])}var l=angular.copy(d.search);return"All Teams"===l.team&&(l.team=null),d.demographicNo&&(l.demographicNo=d.demographicNo),r.searchResponses(l).then(function(t){e.total(parseInt(t.meta.total[0]));for(var n=0;n<t.data.length;n++){for(var a=t.data[n],o=0;o<d.statuses.length;o++)if(a.status===d.statuses[o].value){a.statusDescription=d.statuses[o].name;break}for(o=0;o<d.urgencies.length;o++)if(a.urgency===d.urgencies[o].value){a.urgencyDescription=d.urgencies[o].name;break}1===a.urgency&&(a.urgencyColor="text-danger")}return d.lastResponse=t.data,t.data},function(e){console.log(e)})}}),d.getSavedSearchParams=function(){null!=n.params.demographicNo?(d.hideSearchPatient=!0,d.updateDemographicNo(null,n.params.demographicNo)):null!=a.search().srhDemoNo&&d.updateDemographicNo(null,a.search().srhDemoNo),null!=a.search().srhMrpNo&&d.updateMrpNo(a.search().srhMrpNo),a.search().referralStartDate&&(d.search.referralStartDate=new Date(a.search().referralStartDate)),null!=a.search().referralEndDate&&(d.search.referralEndDate=new Date(a.search().referralEndDate)),null!=a.search().appointmentStartDate&&(d.search.appointmentStartDate=new Date(a.search().appointmentStartDate)),null!=a.search().appointmentEndDate&&(d.search.appointmentEndDate=new Date(a.search().appointmentEndDate)),null!=a.search().status&&(d.search.status=Number(a.search().status)),null!=a.search().team&&(d.search.team=a.search().team),null!=a.search().countPerPage&&(d.countPerPage=a.search().countPerPage),null!=a.search().toPage&&(d.toPage=a.search().toPage),null!=a.search().sortColumn&&null!=a.search().sortDirection&&(d.search.sortColumn=a.search().sortColumn,d.search.sortDirection=a.search().sortDirection)},d.init()}])},function(e,t,n){(function(e,t){angular.module("Consults").controller("Consults.ConsultRequestController",["$scope","$http","$resource","$location","$uibModal","consultService","demographicService","securityService","summaryService","staticDataService","consult","user",function(n,a,o,r,i,l,s,c,u,d,p,m){var h=this;if(h.consult=p,p.letterheadList=Juno.Common.Util.toArray(p.letterheadList),p.faxList=Juno.Common.Util.toArray(p.faxList),p.serviceList=Juno.Common.Util.toArray(p.serviceList),p.sendToList=Juno.Common.Util.toArray(p.sendToList),h.urgencies=d.getConsultUrgencies(),h.statuses=d.getConsultRequestStatuses(),h.hours=d.getHours(),h.minutes=d.getMinutes(),console.log("initial appointment time: ",angular.copy(p.appointmentTime)),h.parseTime=function(e){var t=e.split(":");p.appointmentHour=t[0],p.appointmentMinute=t[1]},null!==p.appointmentTime&&h.parseTime(p.appointmentTime),c.hasRight("_con","r").then(function(e){h.consultReadAccess=e},function(e){console.log(e)}),c.hasRight("_con","u").then(function(e){h.consultUpdateAccess=e},function(e){console.log(e)}),c.hasRight("_con","w").then(function(e){h.consultWriteAccess=e},function(e){console.log(e)}),s.getDemographic(p.demographicId).then(function(e){console.log("SUCCESS, DEMO: ",e),p.demographic=e,p.demographic.extras=Juno.Common.Util.toArray(p.demographic.extras);for(var t=0;t<p.demographic.extras.length;t++)if("demo_cell"==p.demographic.extras[t].key){p.demographic.cellPhone=p.demographic.extras[t].value;break}},function(e){console.log(e)}),null==p.letterhead)for(var g=0;g<p.letterheadList.length;g++)if(p.letterheadList[g].id==m.providerNo){p.letterhead=p.letterheadList[g];break}null==p.letterhead.fax&&1==p.faxList.length&&(p.letterhead.fax=p.faxList[0].faxNumber);for(g=0;g<p.serviceList.length;g++)if(p.serviceList[g].serviceId==p.serviceId){h.specialists=Juno.Common.Util.toArray(p.serviceList[g].specialists);break}angular.forEach(h.specialists,function(e){p.professionalSpecialist&&e.id==p.professionalSpecialist.id&&(p.professionalSpecialist=e)}),p.attachments=Juno.Common.Util.toArray(p.attachments),Juno.Consults.Common.sortAttachmentDocs(p.attachments),h.consultChanged=-1,n.$watchCollection(function(){return h.consult},function(e,t){h.consultChanged++}),n.$on("$stateChangeStart",function(e){h.consultChanged>0&&(confirm("You may have unsaved data. Are you sure to leave?")||e.preventDefault())}),h.changeLetterhead=function(t){var n=e("#letterhead")[0].selectedIndex;null!==n&&(p.letterheadAddress=p.letterheadList[n].address,p.letterheadPhone=p.letterheadList[n].phone)},h.changeService=function(t){var a=e("#serviceId")[0].selectedIndex;null!==a?h.specialists=toArray(p.serviceList[a].specialists):n.specialists=null},h.writeToBox=function(e,t){for(var n=Juno.Common.Util.toArray(e.summaryItem),a=null,o=0;o<n.length;o++)a=Juno.Common.Util.addNewLine(n[o].displayName,a);"clinicalInfo"==t?p.clinicalInfo=Juno.Common.Util.addNewLine(a,p.clinicalInfo):"concurrentProblems"==t?p.concurrentProblems=Juno.Common.Util.addNewLine(a,p.concurrentProblems):"currentMeds"==t&&(p.currentMeds=Juno.Common.Util.addNewLine(a,p.currentMeds))},h.getFamilyHistory=function(e){u.getFamilyHistory(p.demographicId).then(function(t){0===t.summaryItem.length&&alert("No family history"),h.writeToBox(t,e)},function(e){alert("Error grabbing family history!"),console.log(e)})},h.getMedicalHistory=function(e){u.getMedicalHistory(p.demographicId).then(function(t){0===t.summaryItem.length&&alert("No medical history"),h.writeToBox(t,e)},function(e){alert("Error grabbing medical history!"),console.log(e)})},h.getSocialHistory=function(e){u.getSocialHistory(p.demographicId).then(function(t){0===t.summaryItem.length&&alert("No social history"),h.writeToBox(t,e)},function(e){alert("Error grabbing social history!"),console.log(e)})},h.getOngoingConcerns=function(e){u.getOngoingConcerns(p.demographicId).then(function(t){0===t.summaryItem.length&&alert("No ongoing concerns"),h.writeToBox(t,e)},function(e){alert("Error grabbing ongoing concerns!"),console.log(e)})},h.getOtherMeds=function(e){u.getOtherMeds(p.demographicId).then(function(t){0===t.summaryItem.length&&alert("No other meds"),h.writeToBox(t,e)},function(e){alert("Error grabbing other meds!"),console.log(e)})},h.getReminders=function(e){u.getReminders(p.demographicId).then(function(t){0===t.summaryItem.length&&alert("No reminders"),h.writeToBox(t,e)},function(e){alert("Error grabbing reminders!"),console.log(e)})},h.getAllergies=function(e){console.log("CONSULT: ",p),u.getAllergies(p.demographicId).then(function(t){h.writeToBox(t,e)},function(e){console.log(e)})},h.invalidData=function(){return h.consult.urgency?h.consult.letterheadName?h.consult.professionalSpecialist?(null==h.consult.demographic||""==h.consult.demographic)&&(alert("Error! Invalid patient!"),!0):(alert("Please select a Specialist"),!0):(alert("Please select a Letterhead"),!0):(alert("Please select an Urgency"),!0)},h.setAppointmentTime=function(){null==p.appointmentHour||null==p.appointmentMinute||p.patientWillBook?p.appointmentTime=null:(apptTime=t(Date.now()),apptTime.set("hours",p.appointmentHour),apptTime.set("minute",p.appointmentMinute),p.appointmentTime=apptTime)},h.openAttach=function(e){window.open("../"+e.url)},h.attachFiles=function(){i.open({templateUrl:"src/consults/consultAttachment.jsp",controller:"Consults.ConsultRequestAttachmentController as consultAttachmentCtrl",windowClass:"attachment-modal-window",resolve:{consult:function(){return p}}}).result.then(function(){p.attachmentsChanged&&(h.consultChanged++,p.attachmentsChanged=!1)},function(e){console.log(e)})},h.setESendEnabled=function(){h.eSendEnabled=null!=p.professionalSpecialist&&null!=p.professionalSpecialist.eDataUrl&&""!=p.professionalSpecialist.eDataUrl.trim()},h.setESendEnabled(),h.save=function(){return console.log("CONSULT: ",p),h.consultWriteAccess||null!=p.id?h.consultUpdateAccess?!h.invalidData()&&(h.consultSaving=!0,h.setAppointmentTime(),l.saveRequest(p).then(function(e){null==p.id&&r.path("/record/"+p.demographicId+"/consult/"+e.id)},function(e){console.log(e)}),h.setESendEnabled(),h.consultSaving=!1,h.consultChanged=-1,!0):(alert("You don't have right to update consult"),!1):(alert("You don't have right to save new consult"),!1)},h.close=function(){"patient"===r.search().list?r.path("/record/"+p.demographicId+"/consults"):r.path("/consults")},h.sendFax=function(){var e=p.id,t=p.demographicId,n=Juno.Common.Util.noNull(p.letterhead.fax),a=Juno.Common.Util.noNull(p.professionalSpecialist.faxNumber);window.open("../fax/CoverPage.jsp?reqId="+e+"&demographicNo="+t+"&letterheadFax="+n+"&fax="+a)},h.eSend=function(){h.eSendEnabled&&l.eSendRequest(p.id).then(function(e){alert(e.message)},function(e){console.log(e)})},h.printPreview=function(){h.invalidData()||window.open("../oscarEncounter/oscarConsultationRequest/printPdf2.do?reqId="+p.id+"&demographicNo="+p.demographicId)}}])}).call(this,n(0),n(4))},function(e,t){angular.module("Consults").controller("Consults.ConsultRequestListController",["$scope","$timeout","$state","$location","NgTableParams","consultService","providerService","demographicService","demographicsService","securityService","staticDataService",function(e,t,n,a,o,r,i,l,s,c,u){var d=this;c.hasRight("_con","r").then(function(e){d.consultReadAccess=e},function(e){console.log(e)}),c.hasRight("_con","u").then(function(e){d.consultUpdateAccess=e},function(e){console.log(e)}),c.hasRight("_con","w").then(function(e){d.consultWriteAccess=e},function(e){console.log(e)}),d.statuses=u.getConsultRequestStatuses(),d.urgencies=u.getConsultUrgencies(),d.lastResponse="",d.teams=[],d.consult={};d.search={team:"All Teams",startIndex:0,numToReturn:10},i.getActiveTeams().then(function(e){d.teams=e,d.teams.unshift("All Teams"),console.log(JSON.stringify(e))},function(e){alert(e),console.log(e)}),d.searchPatients=function(e){var t={type:"Name",term:e,active:!0,integrator:!1,outofdomain:!0};return s.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({demographicNo:e.content[n].demographicNo,name:e.content[n].lastName+", "+e.content[n].firstName});return t},function(e){console.log(e)})},d.searchMrps=function(e){var t={searchTerm:e,active:!0};return i.searchProviders(t).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({mrpNo:e[n].providerNo,name:e[n].name});return t},function(e){console.log(e)})},d.updateMrpNo=function(e){e instanceof Object?(d.search.mrpNo=Number(e.mrpNo),d.consult.mrpName=e.name):i.getProvider(e).then(function(e){d.consult.mrpName=e.lastName+", "+e.firstName},function(e){console.log(e)})},d.updateDemographicNo=function(e,t){null!=e?(d.search.demographicNo=e.demographicNo,d.consult.demographicName=e.name):l.getDemographic(t).then(function(e){d.consult.demographicName=e.lastName+", "+e.firstName},function(e){console.log(e)})},d.checkAll=function(){angular.forEach(d.lastResponse,function(e){e.checked=!0})},d.checkNone=function(){angular.forEach(d.lastResponse,function(e){e.checked=!1})},d.editConsult=function(e){var t="/record/"+e.demographic.demographicNo+"/consult/"+e.id;a.path(t).search(d.searchParams)},d.addConsult=function(){if(!d.consultWriteAccess)return alert("You don't have right to create new consult"),!1;var e="/record/"+d.search.demographicNo+"/consult/new";a.path(e).search(d.searchParams)},d.removeDemographicAssignment=function(){d.search.demographicNo=null,d.consult.demographicName=null},d.removeMrpAssignment=function(){d.search.mrpNo=null,d.consult.mrpName=null},d.doSearch=function(){d.tableParams.reload()},d.clear=function(){d.removeDemographicAssignment(),d.removeMrpAssignment();var e=null==n.params.demographicNo?null:Number(n.params.demographicNo);d.search={team:"All Teams",startIndex:0,numToReturn:10,demographicNo:e},d.doSearch()},d.setSearchParams=function(){d.searchParams={},"record.consultRequests"===n.$current.name?d.searchParams.list="patient":null!=d.search.demographicNo&&(d.searchParams.srhDemoNo=d.search.demographicNo),null!=d.search.mrpNo&&(d.searchParams.srhMrpNo=d.search.mrpNo),null!=d.search.status&&(d.searchParams.srhStatus=d.search.status),"All Teams"!=d.search.team&&(d.searchParams.srhTeam=d.search.team),null!=d.search.referralStartDate&&(d.searchParams.srhRefStartDate=d.search.referralStartDate.getTime()),null!=d.search.referralEndDate&&(d.searchParams.srhRefEndDate=d.search.referralEndDate.getTime()),null!=d.search.appointmentStartDate&&(d.searchParams.srhApptStartDate=d.search.appointmentStartDate.getTime()),null!=d.search.appointmentEndDate&&(d.searchParams.srhApptEndDate=d.search.appointmentEndDate.getTime()),null!=d.search.page&&(d.searchParams.srhToPage=d.search.page),null!=d.search.perPage&&(d.searchParams.srhCountPerPage=d.search.perPage),null!=d.search.sortDirection&&(d.searchParams.srhSortMode=d.search.sortColumn,d.searchParams.srhSortDir=d.search.sortDirection)},d.justOpen=!0,d.search.sortColumn="ReferralDate",d.search.sortDirection="desc",d.tableParams=new o({page:1,count:10,sorting:{ReferralDate:"desc"}},{getData:function(e){d.justOpen&&(d.getSavedSearchVals(),d.justOpen=!1),d.setSearchParams();var t=e.url().count,n=e.url().page;d.search.startIndex=(n-1)*t,d.search.numToReturn=parseInt(t),d.search.page=e.url().page,d.search.perPage=e.url().count;var a=/sorting\[(\w+)\]/g;for(var o in e.url()){var i=a.exec(String(o));i&&(d.search.sortColumn=i[1],d.search.sortDirection=e.url()[String(o)])}var l=angular.copy(d.search);return"All Teams"===l.team&&(l.team=null),r.searchRequests(l).then(function(t){e.total(parseInt(t.meta.total[0]));for(var n=0;n<t.data.length;n++){for(var a=t.data[n],o=0;o<d.statuses.length;o++)if(a.status==d.statuses[o].value){a.statusDescription=d.statuses[o].name;break}for(o=0;o<d.urgencies.length;o++)if(a.urgency==d.urgencies[o].value){a.urgencyDescription=d.urgencies[o].name;break}if(1==a.urgency&&(a.urgencyColor="text-danger"),4!=a.status&&5!=a.status&&7!=a.status){var r=a.referralDate.split("-"),i=new Date(r[0],r[1]-1,r[2]);i.setMonth(i.getMonth()+1),new Date>=i&&(a.outstanding=!0)}}return d.lastResponse=t.data,t.data},function(e){alert(e),console.log(e)})}}),d.getSavedSearchVals=function(){null!=n.params.demographicNo?(d.hideSearchPatient=!0,d.search.demographicNo=Number(n.params.demographicNo)):null!=a.search().srhDemoNo&&(d.search.demographicNo=Number(a.search().srhDemoNo),d.updateDemographicNo(null,a.search().srhDemoNo)),null!=a.search().srhMrpNo&&(d.search.mrpNo=Number(a.search().srhMrpNo),d.updateMrpNo(a.search().srhMrpNo)),null!=a.search().srhRefStartDate&&(d.search.referralStartDate=new Date(Number(a.search().srhRefStartDate))),null!=a.search().srhRefEndDate&&(d.search.referralEndDate=new Date(Number(a.search().srhRefEndDate))),null!=a.search().srhApptStartDate&&(d.search.appointmentStartDate=new Date(Number(a.search().srhApptStartDate))),null!=a.search().srhApptEndDate&&(d.search.appointmentEndDate=new Date(Number(a.search().srhApptEndDate))),null!=a.search().srhStatus&&(d.search.status=Number(a.search().srhStatus)),null!=a.search().srhTeam&&(d.search.team=a.search().srhTeam),null!=a.search().srhCountPerPage&&(d.search.perPage=a.search().srhCountPerPage),null!=a.search().srhToPage&&(d.search.page=a.search().srhToPage),null!=a.search().srhSortMode&&null!=a.search().srhSortDir&&(d.search.sortColumn=a.search().sortMode,d.search.sortDirection=a.search().srhSortDir)},d.popup=function(e,t,n,a){windowprops="height="+e+",width="+t+",location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=yes,screenX=0,screenY=0,top=0,left=0";var o=window.open(n,a,windowprops);null!=o&&null==o.opener&&(o.opener=self)}}])},function(e,t,n){(function(e){angular.module("Consults").controller("Consults.ConsultResponseAttachmentController",["$uibModalInstance","consultService","consult",function(t,n,a){controller.atth={},controller.atth.patientName=a.demographic.lastName+", "+a.demographic.firstName,controller.atth.attachedDocs=a.attachments,null!=controller.atth.attachedDocs[0]&&(controller.atth.selectedAttachedDoc=controller.atth.attachedDocs[0]);var o=0;null!=a.id&&(o=a.id),n.getResponseAttachments(o,a.demographic.demographicNo).then(function(e){null==a.availableDocs&&(a.availableDocs=Juno.Common.Util.toArray(e)),controller.atth.availableDocs=a.availableDocs,Juno.Consults.Common.sortAttachmentDocs(controller.atth.availableDocs),null!=controller.atth.availableDocs[0]&&(controller.atth.selectedAvailableDoc=controller.atth.availableDocs[0])},function(e){console.log(e)}),controller.openDoc=function(e){window.open("../"+e.url)},controller.attach=function(){if(null!=controller.atth.selectedAvailableDoc){controller.atth.attachedDocs.push(controller.atth.selectedAvailableDoc),controller.atth.selectedAttachedDoc=controller.atth.selectedAvailableDoc,controller.atth.selectedAttachedDoc.attached=!0,Juno.Consults.Common.sortAttachmentDocs(controller.atth.attachedDocs);var t=e("#selAvailDoc").val();controller.atth.availableDocs.splice(t,1),t>=controller.atth.availableDocs.length&&(t=controller.atth.availableDocs.length-1),controller.atth.selectedAvailableDoc=controller.atth.availableDocs[t],a.attachmentsChanged=!0}},controller.detach=function(){if(null!=controller.atth.selectedAttachedDoc){controller.atth.availableDocs.push(controller.atth.selectedAttachedDoc),controller.atth.selectedAvailableDoc=controller.atth.selectedAttachedDoc,controller.atth.selectedAvailableDoc.attached=!1,Juno.Consults.Common.sortAttachmentDocs(controller.atth.availableDocs);var t=e("#selAttachDoc").val();controller.atth.attachedDocs.splice(t,1),t>=controller.atth.attachedDocs.length&&(t=controller.atth.attachedDocs.length-1),controller.atth.selectedAttachedDoc=controller.atth.attachedDocs[t],a.attachmentsChanged=!0}},controller.done=function(){t.close()}}])}).call(this,n(0))},function(e,t,n){(function(e){angular.module("Consults").controller("Consults.ConsultRequestAttachmentController",["$uibModalInstance","consultService","consult",function(t,n,a){var o=this;o.atth={},o.atth.patientName=a.demographic.lastName+", "+a.demographic.firstName,o.atth.attachedDocs=a.attachments,null!=o.atth.attachedDocs[0]&&(o.atth.selectedAttachedDoc=o.atth.attachedDocs[0]);var r=0;null!=a.id&&(r=a.id),n.getRequestAttachments(r,a.demographicId).then(function(e){null==a.availableDocs&&(a.availableDocs=Juno.Common.Util.toArray(e)),o.atth.availableDocs=a.availableDocs,null!=o.atth.availableDocs[0]&&(o.atth.selectedAvailableDoc=o.atth.availableDocs[0])},function(e){console.log(e)}),o.openDoc=function(e){window.open("../"+e.url)},o.attach=function(){if(null!=o.atth.selectedAvailableDoc){o.atth.attachedDocs.push(o.atth.selectedAvailableDoc),o.atth.selectedAttachedDoc=o.atth.selectedAvailableDoc,o.atth.selectedAttachedDoc.attached=!0;var t=o.atth.availableDocs.map(function(e){return e.documentNo+e.documentType}).indexOf(o.atth.selectedAvailableDoc.documentNo+o.atth.selectedAvailableDoc.documentType);o.atth.availableDocs.splice(t,1);var n=e("#selAvailDoc")[0].selectedIndex;n>=o.atth.availableDocs.length&&(n=o.atth.availableDocs.length-1),o.atth.selectedAvailableDoc=o.atth.availableDocs[n],a.attachmentsChanged=!0}},o.detach=function(){if(null!=o.atth.selectedAttachedDoc){o.atth.availableDocs.push(o.atth.selectedAttachedDoc),o.atth.selectedAvailableDoc=o.atth.selectedAttachedDoc,o.atth.selectedAvailableDoc.attached=!1;var t=o.atth.attachedDocs.map(function(e){return e.documentNo+e.documentType}).indexOf(o.atth.selectedAttachedDoc.documentNo+o.atth.selectedAttachedDoc.documentType);o.atth.attachedDocs.splice(t,1);var n=e("#selAttachDoc")[0].selectedIndex;n>=o.atth.attachedDocs.length&&(n=o.atth.attachedDocs.length-1),o.atth.selectedAttachedDoc=o.atth.attachedDocs[n],a.attachmentsChanged=!0}},o.done=function(){console.log("CLOSE MODAL"),t.close()}}])}).call(this,n(0))},function(e,t,n){"use strict";angular.module("Consults",["Common","Common.Services"])},function(e,t){angular.module("oscarProviderViewModule").controller("BillingCtrl",["$scope","$http",function(e,t){}])},function(e,t){angular.module("Admin.Integration.Know2act").controller("Admin.Integration.Know2act.k2aTemplateController",["reportByTemplateService","k2aService",function(e,t){var n=this;n.message="",n.k2aActive=!1,n.k2aReports=null,n.K2A_URL="",n.dtOptions={},n.checkStatus=function(){t.isK2AInit().then(function(e){n.k2aActive=e},function(e){console.error(e),alert("Failed to verify K2A Status")})},n.checkStatus(),n.getAllK2AReports=function(){e.getAllK2AReports().then(function(e){n.k2aReports=e,console.log("k2a reports",n.k2aReports)})},n.getAllK2AReports(),n.saveK2AReport=function(t){e.getK2AReportById(t).then(function(e){n.message=e,console.log(n.message),refreshParent()})},n.openK2AUrl=function(){e.getK2AUrl().then(function(e){window.open(e+"/#/ws/rs/posts/browse/Report")},function(e){console.log(e)})},n.refreshParent=function(){window.opener.document.location.href="../../../../oscarReport/reportByTemplate/homePage.jsp"},window.onunload=n.refreshParent()}])},function(e,t){angular.module("Admin.Integration.Know2act").controller("Admin.Integration.Know2act.k2aNotificationController",["k2aService",function(e){var t=this;t.page={},t.page.notifications=[],t.readMore=function(t){e.getMoreNotification(t).then(function(e){window.open(e,"moreInfo","width=700,height=700").focus()},function(e){console.error(e)})},t.archive=function(n){e.ackNotification(n).then(function(e){t.getNotifications()},function(e){console.error(e),alert("Failed to acknowledge notification")})},t.getNotifications=function(){e.getNotifications().then(function(e){t.page.notifications=e},function(e){console.error(e),alert("Failed to load notifications")})},t.getNotifications()}])},function(e,t){angular.module("Admin.Integration.Know2act").controller("Admin.Integration.Know2act.k2aConfigController",["k2aService",function(e){var t=this;t.PrevListQuantity=10,t.availablePreventionRuleSets=[],t.currentPreventionRulesSet=[],t.clinicName="",t.k2aActive=!1,t.checkStatus=function(){e.isK2AInit().then(function(e){t.k2aActive=e,t.k2aActive&&(t.getPreventionRulesList(),t.getCurrentPreventionRulesVersion())},function(e){console.error(e),alert("Failed to verify K2A Status")})},t.checkStatus(),t.getPreventionRulesList=function(){e.preventionRulesList().then(function(e){t.availablePreventionRuleSets=e,console.log("availablePreventionRuleSets",t.availablePreventionRuleSets)},function(e){console.error(e)})},t.getCurrentPreventionRulesVersion=function(){e.getCurrentPreventionRulesVersion().then(function(e){t.currentPreventionRulesSet=e,console.log("currentPreventionRulesSet",e)},function(e){console.error(e)})},t.loadPreventionRuleById=function(t){e.loadPreventionRuleById(t).then(function(t){e.getCurrentPreventionRulesVersion()})},t.increasePrevListQuantity=function(){t.PrevListQuantity=t.availablePreventionRuleSets.length},t.initK2A=function(){e.initK2A(t.clinicName).then(function(e){console.info("Init complete, check status",e),t.checkStatus()},function(e){console.log(e),alert("Failed to initialize K2A")})}}])},function(e,t,n){"use strict";angular.module("Admin.Integration.Know2act",["Common","Common.Services"])},function(e,t,n){"use strict";angular.module("Admin.Integration",["Common","Common.Services"])},function(e,t){angular.module("oscarProviderViewModule").controller("AdminCtrl",["$scope","$http",function(e,t){}])},function(e,t,n){"use strict";angular.module("Admin",["Common","Common.Services"])},function(e,t){angular.module("Schedule").controller("Schedule.AppointmentViewController",["$scope","$filter","$uibModalInstance","$timeout","demographicService","me","providerService","scheduleService","appointment","statusList",function(e,t,n,a,o,r,i,l,s,c){var u=this;u.me=r,u.appointment=s,u.statusList=c.content,u.appointmentUpdate={},u.appointmentWriteAccess=!1,u.getStatus=function(e){for(var t=0;t<u.statusList.length;t++)if(console.log(JSON.stringify(u.statusList[t])),u.statusList[t].status==e)return u.statusList[t].description;return e},u.close=function(){n.close(!1)},u.deleteAppointment=function(){confirm("Are you sure you want to delete this appointment?")&&l.deleteAppointment(u.appointment.id).then(function(e){n.close(!0)},function(e){console.log(e)})},u.searchProviders=function(e){var t={searchTerm:e,active:!0};return i.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},u.updateProviderNo=function(e,t,n){u.appointment.providerNo=t,u.appointment.providerName=n},u.editProvider=function(){u.showProviderFormControl=!0,u.appointmentUpdate.providerNo=u.appointment.providerNo,u.appointmentUpdate.providerName=u.appointment.provider.lastName+","+u.appointment.provider.lastName},u.updateProvider=function(e,t,n){u.needsUpdate=!0,u.appointment.providerNo=t,u.appointment.providerName=n,u.showProviderFormControl=!1},u.cancelProviderUpdate=function(){u.appointmentUpdate.providerNo=null,u.appointmentUpdate.providerName=null,u.showProviderFormControl=!1},u.showAppointmentHistory=function(){l.appointmentHistory(u.appointment.demographicNo).then(function(e){alert(JSON.stringify(e))},function(e){console.log(e)})},u.noShowAppointment=function(){l.noShowAppointment(u.appointment.id).then(function(e){n.close(!0)},function(e){console.log(e)})},u.cancelAppointment=function(){l.cancelAppointment(u.appointment.id).then(function(e){n.close(!0)},function(e){console.log(e)})}}])},function(e,t){angular.module("Schedule").controller("Schedule.AppointmentAddController",["$scope","$filter","$uibModalInstance","$timeout","demographicService","demographicsService","me","providerService","scheduleService","apptDate",function(e,t,n,a,o,r,i,l,s,c){var u=this;u.types=[],u.urgencies=[{value:"",label:"Normal"},{value:"critical",label:"Critical"}],u.me=i,u.appointment={status:"t",appointmentDate:t("date")(c,"yyyy-MM-dd"),startTime:"09:00 AM",type:"",duration:15,providerName:i.formattedName,providerNo:i.providerNo,reason:"",notes:"",location:"",resources:"",critical:""},s.getTypes().then(function(e){u.types=e.types,u.types.unshift({name:"",duration:15,location:"",notes:"",reason:"",resources:""}),console.log(JSON.stringify(e))},function(e){console.log(e)}),u.selectType=function(){for(var e=null,t=0;t<u.types.length;t++)if(u.types[t].name==u.appointment.type){e=u.types[t];break}null!=e&&(u.appointment.duration=e.duration,u.appointment.location=e.location,u.appointment.notes=e.notes,u.appointment.reason=e.reason,u.appointment.resources=e.resources)},u.close=function(){u.needsUpdate?confirm("You have unsaved changes, are you sure?")&&n.close(!1):n.close(!1)},u.validate=function(){var e=u.appointment;return u.errors=[],null==e.demographic&&u.errors.push("You must select a patient"),null==e.providerNo&&u.errors.push("You must select a provider"),null!=e.startTime&&0!=e.startTime.length||u.errors.push("start time is required"),null!=e.duration&&0!=e.duration.length||u.errors.push("start time is required"),!(u.errors.length>0)},u.save=function(){if(u.showErrors=!0,u.validate()){var e={};e.status=u.appointment.status,e.appointmentDate=u.appointment.appointmentDate,e.startTime12hWithMedian=u.appointment.startTime,e.type=u.appointment.type,e.duration=u.appointment.duration,e.providerNo=u.appointment.providerNo,e.reason=u.appointment.reason,e.notes=u.appointment.notes,e.location=u.appointment.location,e.resources=u.appointment.resources,e.urgency=u.appointment.critical,e.demographicNo=u.appointment.demographicNo,console.log(JSON.stringify(e)),s.addAppointment(e).then(function(e){n.close(!0)},function(e){console.log(e)})}},u.updateDemographicNo=function(e,t,n){o.getDemographic(t).then(function(e){u.appointment.demographicNo=e.demographicNo,u.appointment.demographicName="",u.appointment.demographic=e},function(e){console.log(e)})},u.searchPatients=function(e){var t={type:"Name",term:e,active:!0,integrator:!1,outofdomain:!0};return r.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({demographicNo:e.content[n].demographicNo,name:e.content[n].lastName+","+e.content[n].firstName});return t},function(e){console.log(e)})},u.searchProviders=function(e){var t={searchTerm:e,active:!0};return l.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},u.updateProviderNo=function(e,t,n){u.appointment.providerNo=t,u.appointment.providerName=n}}])},function(e,t){angular.module("Schedule").controller("Schedule.ScheduleController",["$scope",function(e){e.uiConfig={},e.selectedSchedule=null,e.selectedSiteName=null,e.selectedTimeInterval=null,e.selectedResources=[],e.cpCalendarControl={},e.isSchedulingEnabled=function(){return!0},e.isInitialized=function(){return e.callCalendarMethod("is_initialized")},e.hasSchedules=function(){return e.callCalendarMethod("has_schedules")},e.hasSites=function(){return e.callCalendarMethod("has_sites")},e.getTimeIntervalOptions=function(){return e.callCalendarMethod("get_time_interval_options")},e.getScheduleOptions=function(){return e.callCalendarMethod("get_schedule_options")},e.getSiteOptions=function(){var t=e.callCalendarMethod("get_site_options");return angular.isDefined(e.selectedSite)&&null!==e.selectedSite||(e.selectedSite=t[0]),t},e.viewName=function(){return e.callCalendarMethod("view_name")},e.showTimeIntervals=function(){return"month"!==e.viewName()},e.onScheduleChanged=function(){return e.callCalendarMethod("on_schedule_changed",[e.selectedSchedule,e.selectedSiteName])},e.onSiteChanged=function(){return e.callCalendarMethod("on_schedule_changed",[e.selectedSchedule,e.selectedSiteName])},e.onTimeIntervalChanged=function(){e.saveGlobalState("schedule_time_interval",e.selectedTimeInterval),e.uiConfig.calendar&&(e.uiConfig.calendar.slotDuration=e.selectedTimeInterval,e.uiConfig.calendar.slotLabelInterval=e.selectedTimeInterval)},e.changeView=function(t){return e.callCalendarMethod("change_view",[t])},e.showLegend=function(){return e.callCalendarMethod("show_legend")},e.isAgendaView=function(){return"resourceDay"!=e.viewName()},e.callCalendarMethod=function(t,n){return e.cpCalendarControl&&angular.isFunction(e.cpCalendarControl[t])?e.cpCalendarControl[t].apply(this,n):null},e.saveGlobalState=function(e,t){}}])},function(e,t,n){"use strict";angular.module("Schedule",["Common","Common.Services","cpCalendar"])},function(e,t){angular.module("Tickler").controller("Tickler.TicklerCommentController",["$scope","$uibModalInstance","tickler",function(e,t,n){this.tickler=n,this.close=function(){t.close("Someone Closed Me")}}])},function(e,t){angular.module("Tickler").controller("Tickler.TicklerNoteController",["$scope","$uibModalInstance","$http","ticklerNote","tickler","noteService",function(e,t,n,a,o,r){var i=this;i.ticklerNote=a,i.originalNote=a.note,i.tickler=o,i.close=function(){t.close("Someone Closed Me")},i.save=function(){i.ticklerNote.note;i.ticklerNote.tickler=i.tickler,r.saveTicklerNote(i.ticklerNote).then(function(e){t.close("Someone Saved Me")},function(e){alert(e)})}}])},function(e,t,n){(function(e,t){angular.module("Tickler").controller("Tickler.TicklerAddController",["$scope","$uibModalInstance","$filter","$stateParams","demographicService","demographicsService","providerService","ticklerService",function(n,a,o,r,i,l,s,c){var u=this;u.demographicSearch=null,u.tickler={template:{id:1,name:""},serviceDateDate:new Date,serviceDateTime:"12:00 AM",suggestedTextId:0},u.priorities=["Low","Normal","High"],u.init=function(){Juno.Common.Util.exists(r.demographicNo)&&(console.log("initializing demographicSearch pre-selected",r.demographicNo),i.getDemographic(r.demographicNo).then(function(e){u.demographicSearch={demographicNo:e.demographicNo,firstName:e.firstName,lastName:e.lastName,name:e.lastName+","+e.firstName},u.updateDemographicNo(e)})),e("#timepicker").timepicker({defaultTime:u.tickler.serviceDateTime})},c.getTextSuggestions().then(function(e){u.textSuggestions=e.content,u.textSuggestions.unshift({id:0,suggestedText:""})},function(e){alert(e)}),u.close=function(){a.close(!1)},u.validate=function(){var e=u.tickler;return u.errors=[],null==e.demographic&&u.errors.push("You must select a patient"),null!=e.taskAssignedTo&&0!=e.taskAssignedTo.length||u.errors.push("You must assign a provider"),null!=e.message&&0!=e.message.length||u.errors.push("Message is required"),!(u.errors.length>0)},u.save=function(){if(u.showErrors=!0,u.validate()){var e={};e.demographicNo=u.tickler.demographic.demographicNo,e.taskAssignedTo=u.tickler.taskAssignedTo,e.priority=u.tickler.priority,e.status="A",e.message=u.tickler.message;var n=u.tickler.serviceDateDate,o=t(u.tickler.serviceDateTime,"hh:mm A");n.setHours(o.get("hour")),n.setMinutes(o.get("minute")),e.serviceDate=n,c.add(e).then(function(e){a.close(!0)},function(e){alert(e)})}},u.updateDemographicNo=function(e){Juno.Common.Util.exists(e)?i.getDemographic(e.demographicNo).then(function(e){u.tickler.demographic=e,console.log("set controller.tickler.demographic: ",u.tickler.demographic)}):u.tickler.demographic=null},u.searchPatients=function(e){var t={type:"Name",term:e,status:"active",integrator:!1,outofdomain:!0};return l.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({demographicNo:e.content[n].demographicNo,name:e.content[n].lastName+","+e.content[n].firstName});return t},function(e){console.log(e)})},u.searchProviders=function(e){var t={searchTerm:e,active:!0};return s.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t})},u.updateProviderNo=function(e,t,n){u.tickler.taskAssignedTo=t,u.tickler.taskAssignedToName=n},u.setSuggestedText=function(){var e=o("filter")(u.textSuggestions,{id:u.tickler.suggestedTextId},!0);null!=e&&(u.tickler.message=e[0].suggestedText)},u.addMonthsFromNow=function(e){u.tickler.serviceDateDate=t().add(e,"months").toDate()}}])}).call(this,n(0),n(4))},function(e,t,n){(function(e){angular.module("Tickler").controller("Tickler.TicklerViewController",["$scope","$filter","$uibModalInstance","$timeout","tickler","ticklerService","ticklerNote","ticklerWriteAccess","providerService","me",function(t,n,a,o,r,i,l,s,c,u){var d=this;d.ticklerUpdate=angular.copy(r),d.serviceDateInput=e(d.ticklerUpdate.serviceDate).toDate(),d.serviceTimeInput=e(d.ticklerUpdate.serviceDate).format("hh:mm A"),d.me=u,d.ticklerWriteAccess=s,d.needsUpdate=!1,d.showUpdates=!1,d.showComments=!1,d.showCommentFormControl=!1,d.priorities=["Low","Normal","High"],d.statuses=[{id:"A",label:"Active"},{id:"C",label:"Completed"},{id:"D",label:"Deleted"}],null!=l&&(d.ticklerNote=l.ticklerNote),null!=r&&(d.selectedStatus=d.statuses.find(function(e){return e.id==r.status})),t.$watch(function(){return d.serviceDateInput},function(t){var n=e(t.getTime()).format("MM-DD-YYYY"),a=e(n+"-"+d.serviceTimeInput,"MM-DD-YYYY-hh:mm A").toDate().getTime();d.ticklerUpdate.serviceDate=a}),t.$watch(function(){return d.serviceTimeInput},function(t){var n=e(d.serviceDateInput.getTime()).format("MM-DD-YYYY"),a=e(n+"-"+t,"MM-DD-YYYY-hh:mm A").toDate().getTime();d.ticklerUpdate.serviceDate=a}),d.close=function(){d.needsUpdate?confirm("You have unsaved changes, are you sure?")&&a.close(!1):(d.ticklerUpdate=void 0,a.close(!1))},d.save=function(){a.close("Someone Saved Me")},d.updateTaskAssignedTo=function(e,t,n){d.needsUpdate=!0,d.ticklerUpdate.taskAssignedTo=t,d.ticklerUpdate.taskAssignedToName=n,d.showTaskAssignedToFormControl=!1},d.cancelTaskAssignedToUpdate=function(){d.ticklerUpdate.taskAssignedTo=null,d.ticklerUpdate.taskAssignedToName=null,d.showTaskAssignedToFormControl=!1},d.editServiceDateAndTime=function(){d.showServiceDateAndTimeFormControl=!0},d.updateServiceDateAndTime=function(){var e=d.ticklerUpdate.serviceDate.split("-"),t=d.ticklerUpdate.serviceTime.split(":");if(3==e.length&&2==t.length){var n=new Date(e[0],parseInt(e[1])-1,e[2],t[0],t[1],0,0);null==n||isNaN(n.getTime())?alert("Invalid Date/time. Please use yyyy-MM-dd and HH:mm formats"):(d.needsUpdate=!0,d.tickler.serviceDate=n,d.showServiceDateAndTimeFormControl=!1)}else alert("Invalid Date/time. Please use yyyy-MM-dd and HH:mm formats")},d.cancelServiceDateAndTimeUpdate=function(){d.ticklerUpdate.serviceDate=null,d.showServiceDateAndTimeFormControl=!1},d.editPriority=function(){d.priorities=["Low","Normal","High"],d.showPriorityFormControl=!0},d.updatePriority=function(e){d.needsUpdate=!0,d.showPriorityFormControl=!1},d.cancelPriorityUpdate=function(){d.ticklerUpdate.priority=null,d.showPriorityFormControl=!1},d.editStatus=function(){d.showStatusFormControl=!0},d.updateStatus=function(e){d.needsUpdate=!0,d.ticklerUpdate.status=e.id,d.ticklerUpdate.statusName=e.label,d.showStatusFormControl=!1},d.cancelStatusUpdate=function(){d.ticklerUpdate.statusName=null,d.ticklerUpdate.status=null,d.showStatusFormControl=!1},d.addComment=function(){d.showCommentFormControl=!0},d.saveComment=function(){d.needsUpdate=!0,null==d.ticklerUpdate.ticklerComments&&(d.ticklerUpdate.ticklerComments=[]);var e={message:d.ticklerUpdate.comment,providerName:u.formattedName,providerNo:u.providerNo,updateDate:new Date,newComment:!0};d.ticklerUpdate.ticklerComments.unshift(e),d.showCommentFormControl=!1,d.showComments=!0},d.cancelCommentUpdate=function(){d.ticklerUpdate.comment=null,d.showCommentFormControl=!1},d.searchProviders=function(e){var t={searchTerm:e,active:!0};return c.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t})},d.saveChanges=function(){if(r.message!=d.ticklerUpdate.message&&(d.needsUpdate=!0),r.serviceDate!=d.ticklerUpdate.serviceDate&&(d.needsUpdate=!0),d.needsUpdate){var e=angular.copy(d.ticklerUpdate);console.log("Post DATA: ",e),i.update(e).then(function(e){a.close(!0)})}else a.close(!1)},d.completeTickler=function(){i.setCompleted([r.id]).then(function(e){a.close(!0)},function(e){alert(e)})},d.deleteTickler=function(){i.setDeleted([r.id]).then(function(e){a.close(!0)},function(e){alert(e)})},d.printTickler=function(){window.open("../Tickler.do?method=print&id="+r.id)}}])}).call(this,n(4))},function(e,t){angular.module("Tickler").controller("Tickler.TicklerListController",["$scope","$timeout","$resource","$uibModal","$http","$stateParams","$filter","NgTableParams","securityService","ticklerService","noteService","providerService","providers",function(e,t,n,a,o,r,i,l,s,c,u,d,p){var m=this,h=n("../ws/rs/tickler/ticklers");m.lastResponse="",m.providers=p,s.hasRights({items:[{objectName:"_tickler",privilege:"w"},{objectName:"_tickler",privilege:"r"}]}).then(function(e){null!=e.content&&2==e.content.length?(m.ticklerWriteAccess=e.content[0],m.ticklerReadAccess=e.content[1],m.ticklerReadAccess&&(m.search={status:"A"},m.tableParams=new l({page:1,count:10,sorting:{ServiceDate:"desc"}},{getData:function(e){m.search.count=e.url().count,m.search.page=e.url().page,m.search.includeLinks="true",m.search.includeComments="true",m.search.includeUpdates="true",m.search.includeProgram=!0;var t=/sorting\[(\w+)\]/g;for(var n in e.url()){var a=t.exec(String(n));a&&(m.search.sortColumn=a[1],m.search.sortDirection=e.url()[String(n)])}return angular.isDefined(r.demographicNo)&&(m.search.demographicNo=r.demographicNo),h.get(m.search).$promise.then(function(t){e.total(t.total);for(var n=t.content,a=0;a<n.length;a++)n[a].ticklerLinks.length>0&&(n[a].ticklerLinkUrl=m.getLinkUrl(n[a].ticklerLinks[0]));return t.content})}}))):alert("failed to load rights")},function(e){alert(e)}),m.doSearch=function(){m.tableParams.reload()},m.clear=function(){m.search=angular.copy({status:"A"}),m.tableParams.reload()},m.checkAll=function(e){angular.forEach(e,function(e){e.checked=!0})},m.checkNone=function(e){angular.forEach(e,function(e){e.checked=!1})},m.completeTicklers=function(){var e=[];angular.forEach(m.tableParams.data,function(t){t.checked&&e.push(t.id)}),c.setCompleted(e).then(function(e){m.tableParams.reload()},function(e){alert(e)})},m.deleteTicklers=function(){var e=[];angular.forEach(m.tableParams.data,function(t){t.checked&&e.push(t.id)}),c.setDeleted(e).then(function(e){m.tableParams.reload()},function(e){alert(e)})},m.addTickler=function(){a.open({templateUrl:"src/tickler/ticklerAdd.jsp",controller:"Tickler.TicklerAddController as ticklerAddCtrl",backdrop:"static",size:"lg"}).result.then(function(e){console.log("data from modalInstance "+e),null!=e&&1==e&&m.tableParams.reload()},function(e){alert(e)})},m.editTickler=function(e){a.open({templateUrl:"src/tickler/ticklerView.jsp",controller:"Tickler.TicklerViewController as ticklerViewCtrl",backdrop:"static",size:"lg",resolve:{tickler:function(){return e},ticklerNote:function(){return u.getTicklerNote(e.id)},ticklerWriteAccess:function(){return m.ticklerWriteAccess},me:function(){return d.getMe()}}}).result.then(function(e){console.log("data from modalInstance "+e),null!=e&&1==e&&m.tableParams.reload()},function(e){alert(e)})},m.editNote2=function(e){u.getTicklerNote(e.id).then(function(t){null!=t.ticklerNote?m.ticklerNote=t.ticklerNote:m.ticklerNote={editor:"you",note:"",noteId:0,observationDate:"now",revision:0};a.open({templateUrl:"src/tickler/ticklerNote.jsp",controller:"Tickler.TicklerNoteController as ticklerNoteCtrl",backdrop:"static",resolve:{ticklerNote:function(){return m.ticklerNote},tickler:function(){return e}}})},function(e){alert(e)})},m.showComments=function(e){m.tickler=e;a.open({templateUrl:"src/tickler/ticklerComments.jsp",controller:"Tickler.TicklerCommentController as ticklerCommentCtrl",backdrop:"static",resolve:{tickler:function(){return m.tickler}}})},m.printArea=function(){window.print()},m.getLinkUrl=function(e){if(null!==e&&null!==e.id){var t="";return"CML"===e.tableName?t="../lab/CA/ON/CMLDisplay.jsp?segmentID="+e.tableId:"MDS"===e.tableName?t="../oscarMDS/SegmentDisplay.jsp?segmentID="+e.tableId:"HL7"===e.tableName?t="../lab/CA/ALL/labDisplay.jsp?segmentID="+e.tableId:"DOC"===e.tableName&&(t="../dms/ManageDocument.do?method=display&doc_no="+e.tableId),t}}}])},function(e,t,n){"use strict";angular.module("Tickler",["Common","Common.Services","Common.Filters"])},function(e,t){angular.module("Record.Tracker").controller("Record.Tracker.TrackerController",["$rootScope","$scope","$http","$location","$stateParams","$state","$timeout","demographicService","noteService","uxService",function(e,t,n,a,o,r,i,l,s,c){this.getTrackerUrl=function(){return url="../oscarEncounter/oscarMeasurements/HealthTrackerPage.jspf?template=tracker&demographic_no="+o.demographicNo,url},this.resizeIframe=function(e){var t=e.contentWindow.document.body.scrollHeight;t>0&&(e.height=t+"px")}}])},function(e,t,n){"use strict";angular.module("Record.Tracker",["Common","Common.Services"])},function(e,t){angular.module("Record.PHR").controller("Record.PHR.PHRController",["$scope","$http","$location","$state","$stateParams","demographicService","demo","formService",function(e,t,n,a,o,r,i,l){var s=this;console.log("phr ctrl ",o,a),s.page={},s.page.currentFormList=[],s.page.currentForm={},s.page.currentlistId=0,console.log("What is the state "+a.params.type+" : "+angular.isUndefined(a.params.type)+" id "+a.params.id,a),s.page.formlists=[{id:0,label:"Data"}],s.page.currentFormList[0]=[{id:0,name:"Glucose",url:"../oscarEncounter/myoscar/measurements_glucose.do?type=GLUCOSE&demoNo=",type:"frame"},{id:1,name:"BP",url:"../oscarEncounter/myoscar/measurements_blood_pressure.do?type=BLOOD_PRESSURE&demoNo=",type:"frame"},{id:2,name:"Height & Weight",url:"../oscarEncounter/myoscar/measurements_height_and_weight.do?type=HEIGHT_AND_WEIGHT&demoNo=",type:"frame"},{id:3,name:"Open Record",url:"../demographic/viewPhrRecord.do?demographic_no=",type:"window"},{id:4,name:"Send a Message",url:"../phr/PhrMessage.do?method=createMessage&demographicNo=",type:"window"},{id:5,name:"Data Sync",url:"../admin/oscar_myoscar_sync_config_redirect.jsp?uselessParam=",type:"window"}],s.changeTo=function(e){s.page.currentlistId=e,console.log("set currentlist to "+e),0==e&&l.getAllFormsByHeading(o.demographicNo,"Completed").then(function(e){console.debug("whats the index0",e),s.page.currentFormList[0]=e.list},function(e){console.log(e)})},s.viewFormState=function(e){for(;document.getElementById("formInViewFrame").hasChildNodes();)document.getElementById("formInViewFrame").removeChild(document.getElementById("formInViewFrame").firstChild);var t=e.url+o.demographicNo;if(console.log("item",e),"frame"!=e.type){var n=Math.round(1e3*Math.random());return win="win"+n,void window.open(t,win,"scrollbars=yes, location=no, width=900, height=600","")}s.page.currentForm=e;var a=new pym.Parent("formInViewFrame",t,{});s.pymParent=a},s.getListClass=function(e){if(e===s.page.currentlistId)return"active"},s.getActiveFormClass=function(e){return e.type==s.page.currentForm.type&&e.id==s.page.currentForm.id&&angular.isDefined(e.id)?"active":e.type==s.page.currentForm.type&&angular.isUndefined(e.id)&&e.formId==s.page.currentForm.formId?"active":void 0},s.keypress=function(e){if(1==e.altKey&&"Up"==e.key)console.log("up",e),console.log(s.page.currentFormList[s.page.currentlistId].indexOf(s.page.currentForm)),(t=s.page.currentFormList[s.page.currentlistId].indexOf(s.page.currentForm))>0&&(s.page.currentForm=s.page.currentFormList[s.page.currentlistId][t-1],s.viewFormState(s.page.currentForm));else if(1==e.altKey&&"Down"==e.key){console.log("down",e);var t=s.page.currentFormList[s.page.currentlistId].indexOf(s.page.currentForm);console.log(t,s.page.currentFormList[s.page.currentlistId].length),t<=s.page.currentFormList[s.page.currentlistId].length&&(s.page.currentForm=s.page.currentFormList[s.page.currentlistId][t+1],s.viewFormState(s.page.currentForm))}else console.log("keypress",e.altKey,e.key,e)}}])},function(e,t,n){"use strict";angular.module("Record.PHR",["Common","Common.Services"])},function(e,t){function n(e,t,n,a,o){if(null==t)return o;var r=n[e];return null!=r&&null!=a[r]?a[r].value!=t&&o.push({id:a[r].id,key:e,value:t,hidden:a[r].hidden}):o.push({key:e,value:t}),o}function a(e,t,n){return i(e,t,n)?"":r(e,t,n)?e+"-"+t+"-"+n:null}angular.module("Record.Details").controller("Record.Details.DetailsController",["$scope","$http","$location","$stateParams","$state","$window","demographicService","demographicsService","providersService","patientDetailStatusService","securityService","staticDataService","referralDoctorsService","user",function(e,t,m,h,g,f,v,_,b,S,C,y,N,A){var w=this;w.page={};var D,I,P,k,R,T,U,M,L,E,F,x,H,O,j,$,J={},B={},G={},K="Check to set preferred contact number",W="Preferred contact number";w.properties=e.$parent.recordCtrl.properties,w.init=function(){v.getDemographic(h.demographicNo).then(function(e){if(w.page.demo=e,w.initDemographicVars(),w.checkAccess(),b.getBySecurityRole("doctor").then(function(e){w.page.doctors=e}),b.getBySecurityRole("nurse").then(function(e){w.page.nurses=e}),b.getBySecurityRole("midwife").then(function(e){w.page.midwives=e}),v.getDemographicContacts(w.page.demo.demographicNo,"personal").then(function(e){w.page.demoContacts=d(e)}),v.getDemographicContacts(w.page.demo.demographicNo,"professional").then(function(e){w.page.demoContactPros=d(e)}),null!=w.page.demo.notes&&(w.page.demo.scrNotes=w.page.demo.notes,/^<unotes>[\s\S]*/.test(w.page.demo.scrNotes)&&(w.page.demo.scrNotes=w.page.demo.scrNotes.substring("<unotes>".length)),/[\s\S]*<\/unotes>$/.test(w.page.demo.scrNotes)&&(w.page.demo.scrNotes=w.page.demo.scrNotes.substring(0,w.page.demo.scrNotes.lastIndexOf("</unotes>")))),null!=w.page.demo.familyDoctor){var t=w.formatDocOutput(w.page.demo.familyDoctor);w.page.demo.scrReferralDocNo=t.number,w.page.demo.scrReferralDoc=t.name}if(null!=w.page.demo.familyDoctor2){var n=w.formatDocOutput(w.page.demo.familyDoctor2);w.page.demo.scrFamilyDocNo=n.number,w.page.demo.scrFamilyDoc=n.name}if(null!=w.page.demo.extras){w.page.demo.extras=p(w.page.demo.extras);for(var a=0;a<w.page.demo.extras.length;a++)"demo_cell"==w.page.demo.extras[a].key?w.page.demo.scrDemoCell=w.page.demo.extras[a].value:"aboriginal"==w.page.demo.extras[a].key?w.page.demo.scrAboriginal=w.page.demo.extras[a].value:"hPhoneExt"==w.page.demo.extras[a].key?w.page.demo.scrHPhoneExt=w.page.demo.extras[a].value:"wPhoneExt"==w.page.demo.extras[a].key?w.page.demo.scrWPhoneExt=w.page.demo.extras[a].value:"cytolNum"==w.page.demo.extras[a].key?w.page.demo.scrCytolNum=w.page.demo.extras[a].value:"phoneComment"==w.page.demo.extras[a].key?w.page.demo.scrPhoneComment=w.page.demo.extras[a].value:"paper_chart_archived"==w.page.demo.extras[a].key?w.page.demo.scrPaperChartArchived=w.page.demo.extras[a].value:"paper_chart_archived_date"==w.page.demo.extras[a].key?w.page.demo.scrPaperChartArchivedDate=w.page.demo.extras[a].value:"usSigned"==w.page.demo.extras[a].key?w.page.demo.scrUsSigned=w.page.demo.extras[a].value:"privacyConsent"==w.page.demo.extras[a].key?w.page.demo.scrPrivacyConsent=w.page.demo.extras[a].value:"informedConsent"==w.page.demo.extras[a].key?w.page.demo.scrInformedConsent=w.page.demo.extras[a].value:"securityQuestion1"==w.page.demo.extras[a].key?w.page.demo.scrSecurityQuestion1=w.page.demo.extras[a].value:"securityAnswer1"==w.page.demo.extras[a].key?w.page.demo.scrSecurityAnswer1=w.page.demo.extras[a].value:"rxInteractionWarningLevel"==w.page.demo.extras[a].key&&(w.page.demo.scrRxInteractionLevel=w.page.demo.extras[a].value),J[w.page.demo.extras[a].key]=a}if(w.page.demo.scrCellPhone=u(w.page.demo.scrDemoCell),w.page.demo.scrHomePhone=u(w.page.demo.phone),w.page.demo.scrWorkPhone=u(w.page.demo.alternativePhone),null!=w.page.demo.waitingListNames&&null!=w.page.demo.waitingListNames.id){var o={};o.id=w.page.demo.waitingListNames.id,o.name=w.page.demo.waitingListNames.name,o.groupNo=w.page.demo.waitingListNames.groupNo,o.providerNo=w.page.demo.waitingListNames.providerNo,o.createDate=w.page.demo.waitingListNames.createDate,o.isHistory=w.page.demo.waitingListNames.isHistory,w.page.demo.waitingListNames=[o]}w.page.cellPhonePreferredMsg=K,w.page.homePhonePreferredMsg=K,w.page.workPhonePreferredMsg=K,c(w.page.demo.scrDemoCell)?(w.page.demo.scrPreferredPhone="C",w.page.preferredPhoneNumber=w.page.demo.scrCellPhone,w.page.cellPhonePreferredMsg=W,w.page.cellPhonePreferredColor="#ffff99"):c(w.page.demo.phone)?(w.page.demo.scrPreferredPhone="H",w.page.preferredPhoneNumber=w.page.demo.scrHomePhone,w.page.homePhonePreferredMsg=W,w.page.homePhonePreferredColor="#ffff99"):c(w.page.demo.alternativePhone)?(w.page.demo.scrPreferredPhone="W",w.page.preferredPhoneNumber=w.page.demo.scrWorkPhone,w.page.workPhonePreferredMsg=W,w.page.workPhonePreferredColor="#ffff99"):w.page.preferredPhoneNumber=w.page.demo.scrHomePhone,w.page.dataChanged=!1,w.page.genders=y.getGenders(),w.page.titles=y.getTitles(),w.page.provinces=y.getProvinces(),w.page.countries=y.getCountries(),w.page.engFre=y.getEngFre(),w.page.spokenlangs=y.getSpokenLanguages(),w.page.rosterTermReasons=y.getRosterTerminationReasons(),w.page.securityQuestions=y.getSecurityQuestions(),w.page.rxInteractionLevels=y.getRxInteractionLevels(),S.getStatus(h.demographicNo).then(function(e){w.page.macPHRLoggedIn=e.macPHRLoggedIn,w.page.macPHRIdsSet=e.macPHRIdsSet,w.page.macPHRVerificationLevel=e.macPHRVerificationLevel,w.page.integratorEnabled=e.integratorEnabled,w.page.integratorOffline=e.integratorOffline,w.page.integratorAllSynced=e.integratorAllSynced,w.page.conformanceFeaturesEnabled=e.conformanceFeaturesEnabled,w.page.workflowEnhance=e.workflowEnhance,w.page.billregion=e.billregion,w.page.defaultView=e.defaultView,w.page.hospitalView=e.hospitalView,w.page.integratorEnabled&&(w.page.integratorOffline?(w.page.integratorStatusColor="#ff5500",w.page.integratorStatusMsg="NOTE: Integrator is not available at this time"):w.page.integratorAllSynced||(w.page.integratorStatusColor="#ff5500",w.page.integratorStatusMsg="NOTE: Integrated Community is not synced")),w.page.billingHistoryLabel="Invoice List","ON"==w.page.billregion&&(w.page.billingHistoryLabel="Billing History")},function(e){console.log(e)}),_.getStatusList("roster").then(function(e){w.page.rosterStatusList=p(e),w.page.rosterStatusList.unshift({value:"FS",label:"FS - fee for service"}),w.page.rosterStatusList.unshift({value:"TE",label:"TE - terminated"}),w.page.rosterStatusList.unshift({value:"NR",label:"NR - not rostered"}),w.page.rosterStatusList.unshift({value:"RO",label:"RO - rostered"})}),_.getStatusList("patient").then(function(e){w.page.patientStatusList=p(e),w.page.patientStatusList.unshift({value:"FI",label:"FI - Fired"}),w.page.patientStatusList.unshift({value:"MO",label:"MO - Moved"}),w.page.patientStatusList.unshift({value:"DE",label:"DE - Deceased"}),w.page.patientStatusList.unshift({value:"IN",label:"IN - Inactive"}),w.page.patientStatusList.unshift({value:"AC",label:"AC - Active"})}),w.formatDate("DobM"),w.formatDate("DobD"),w.page.demo.age=Juno.Common.Util.calcAge(w.page.demo.dobYear,w.page.demo.dobMonth,w.page.demo.dobDay),w.formatLastName(),w.formatFirstName(),w.setSwipeReady(),w.validateHCSave()},function(e){alert("Error loading demographic: ",e)})},w.initDemographicVars=function(){G.C=w.page.demo.scrCellPhone,G.H=w.page.demo.scrHomePhone,G.W=w.page.demo.scrWorkPhone,G.HX=w.page.demo.scrHPhoneExt,G.WX=w.page.demo.scrWPhoneExt,D=w.page.demo.hin,I=w.page.demo.ver,P=w.page.demo.chartNo,k=w.page.demo.scrCytolNum,R=w.page.demo.scrReferralDocNo,U=w.page.demo.sin,M=w.page.demo.effDate,L=w.page.demo.hcRenewDate,E=w.page.demo.rosterDate,F=w.page.demo.rosterTerminationDate,x=w.page.demo.patientStatusDate,H=w.page.demo.dateJoined,O=w.page.demo.endDate,j=w.page.demo.onWaitingListSinceDate,$=w.page.demo.scrPaperChartArchivedDate},w.checkAccess=function(){C.hasRight("_demographic","r",w.page.demo.demographicNo).then(function(e){w.page.canRead=e},function(e){console.log(e)}),C.hasRight("_demographic","u",w.page.demo.demographicNo).then(function(e){w.page.cannotChange=!e},function(e){console.log(e)})},w.isNaN=function(e){return isNaN(e)},w.checkAction=function(e){w.page.cannotChange&&(e.preventDefault(),e.stopPropagation(),w.setSwipeReady())},e.$watch(function(){return w.page.demo},function(e,t){e!==t&&angular.isDefined(t)&&angular.isDefined(e)&&(w.page.dataChanged=!0)},!0),f.onbeforeunload=function(){if(!0===w.page.dataChanged&&"record.details"===g.current.name)return"You have unsaved patient data. Are you sure you want to leave?"},e.$on("$destroy",function(){delete f.onbeforeunload}),e.$on("$stateChangeStart",function(e){!0===w.page.dataChanged&&(confirm("You have unsaved patient data. Are you sure you want to leave?")?v.getDemographic(h.demographicNo).then(function(e){},function(e){alert("Error loading demographic: ",e)}):e.preventDefault())}),w.formatLastName=function(){w.page.demo.lastName=w.page.demo.lastName.toUpperCase()},w.formatFirstName=function(){w.page.demo.firstName=w.page.demo.firstName.toUpperCase()},w.setSwipeReady=function(e){"off"==e?(w.page.readyForSwipe="",w.page.swipecardMsg="Click for Card Swipe"):"done"==e?w.page.readyForSwipe="btn-primary":(w.page.readyForSwipe="btn-success",w.page.swipecardMsg="Ready for Card Swipe",w.page.swipecard="")},w.healthCardHandler=function(e){if(13==e){var t=w.page.swipecard;if(w.page.swipecard="","%E?"==t.substring(0,3))alert("Error reading card");else{if("610054"==t.substring(2,8)){B.issuer="ON",B.hin=t.substring(8,18);var n=t.indexOf("^")+1,a=t.indexOf("^",n);B.fullName=t.substring(n,a),B.lastName=B.fullName.split("/")[0],B.firstName=B.fullName.split("/")[1].trim(),B.sex=t.substring(a+8,a+9),B.dob=t.substring(a+9,a+17),B.hinExp=t.substring(a+1,a+5)+B.dob.substring(6,8),B.hinVer=t.substring(a+17,a+19),B.firstNameShort=t.substring(a+19,a+24),B.issueDate=t.substring(a+24,a+30),B.lang=t.substring(a+30,a+32),l(B.dob)||(B.dob=null,B.hinExp=null),l(B.hinExp)||(B.hinExp=null),l(B.issueDate)||(B.issueDate=null),w.setSwipeReady("done"),w.healthCardUpdateDemographics()}else alert("Not Ontario Health Card");w.validateHC()}}},w.healthCardUpdateDemographics=function(){var e=new Date;w.page.demo.hcType!=B.issuer&&(w.page.demo.hcType=B.issuer,w.page.hcTypeColor="#ffff99"),w.page.demo.lastName!=B.lastName&&(w.page.demo.lastName=B.lastName,w.page.lastNameColor="#ffff99"),w.page.demo.firstName!=B.firstName&&(w.page.demo.firstName=B.firstName,w.page.firstNameColor="#ffff99"),l(B.hin)&&w.page.demo.hin!=B.hin&&(w.page.demo.hin=B.hin,w.page.hinColor="#ffff99"),w.page.demo.ver!=B.hinVer&&(w.page.demo.ver=B.hinVer,w.page.verColor="#ffff99");var t=1==B.sex?"M":2==B.sex?"F":null;null!=t&&w.page.demo.sex!=t&&(w.page.demo.sex=t,w.page.sexColor="#ffff99");var n={};if(null!=B.dob&&(n.year=B.dob.substring(0,4),n.month=B.dob.substring(4,6),n.day=B.dob.substring(6),w.page.demo.dobYear!=n.year&&(w.page.demo.dobYear=n.year,w.page.dobYearColor="#ffff99"),w.page.demo.dobMonth!=n.month&&(w.page.demo.dobMonth=n.month,w.page.dobMonthColor="#ffff99"),w.page.demo.dobDay!=n.day&&(w.page.demo.dobDay=n.day,w.page.dobDayColor="#ffff99")),null!=B.issueDate){var o="20"+B.issueDate.substring(0,2)+"-"+B.issueDate.substring(2,4)+"-"+B.issueDate.substring(4);w.page.demo.effDate!=o&&(w.page.demo.effDate=o,w.page.effDateColor="#ffff99")}if(null!=B.hinExp){o="20"+B.hinExp.substring(0,2)+"-"+B.hinExp.substring(2,4)+"-"+B.hinExp.substring(4);w.page.demo.hcRenewDate!=o&&(w.page.demo.hcRenewDate=o,w.page.hcRenewDateColor="#ffff99");var r=a("20"+B.hinExp.substring(0,2),B.hinExp.substring(2,4),B.hinExp.substring(4));null!=r&&e>r&&(alert("This health card has expired!"),w.page.hcRenewDateColor="#ffff99")}},w.validateHC=function(){"ON"==w.page.demo.hcType&&null!=w.page.demo.hin&&""!=w.page.demo.hin&&(null==w.page.demo.ver&&(w.page.demo.ver=""),S.validateHC(w.page.demo.hin,w.page.demo.ver).then(function(e){null==e.valid?(w.page.HCValidation="n/a",w.page.swipecardMsg="Done Health Card Action"):(w.page.HCValidation=e.valid?"valid":"invalid",w.page.swipecardMsg=e.responseDescription+" ("+e.responseCode+")")},function(e){console.log(e)}))},w.checkHin=function(){"ON"==w.page.demo.hcType&&null!=w.page.demo.hin&&""!=w.page.demo.hin&&(w.page.demo.hin.length>10&&(w.page.demo.hin=D),l(w.page.demo.hin)||(w.page.demo.hin=D)),D=w.page.demo.hin,w.page.HCValidation=null},w.checkHinVer=function(){"ON"==w.page.demo.hcType&&(w.page.demo.ver.length>2&&(w.page.demo.ver=I),/^[a-zA-Z()]*$/.test(w.page.demo.ver)||(w.page.demo.ver=I),w.page.demo.ver=w.page.demo.ver.toUpperCase()),I=w.page.demo.ver},w.checkDate=function(e){"DobY"==e?w.page.demo.dobYear=function(e){for(var t=0;t<e.length;t++)l(e.charAt(t))||(e=e.substring(0,t)+e.substring(t+1));""!=e&&((e=parseInt(e).toString()).length>4&&(e=e.substring(0,4)),0==e&&(e=""));return e}(w.page.demo.dobYear):"DobM"==e?w.page.demo.dobMonth=function(e){for(var t=0;t<e.length;t++)l(e.charAt(t))||(e=e.substring(0,t)+e.substring(t+1));""!=e&&(e.length>2&&(e=e.substring(0,2)),e>12&&(e=e.substring(0,1)));return e}(w.page.demo.dobMonth):"DobD"==e&&(w.page.demo.dobDay=function(e,t,n){for(var a=0;a<e.length;a++)l(e.charAt(a))||(e=e.substring(0,a)+e.substring(a+1));""!=e&&(e.length>2&&(e=e.substring(0,2)),null==t?e>31&&(e=e.substring(0,1)):null==n?e>o[t-1]&&e.substring(0,1):r(n,t,e)||(e=e.substring(0,1)));return e}(w.page.demo.dobDay,w.page.demo.dobMonth,w.page.demo.dobYear)),console.log("MONTH: ",w.page.demo.dobMonth),w.page.demo.age=Juno.Common.Util.calcAge(w.page.demo.dobYear,w.page.demo.dobMonth,w.page.demo.dobDay)},w.formatDate=function(e){"DobM"==e&&null!=w.page.demo.dobMonth&&1==String(w.page.demo.dobMonth).length?w.page.demo.dobMonth="0"+w.page.demo.dobMonth:"DobD"==e&&null!=w.page.demo.dobDay&&1==String(w.page.demo.dobDay).length&&(w.page.demo.dobDay="0"+w.page.demo.dobDay)},w.checkPatientStatus=function(){var e=new Date;if("AC"==w.page.demo.patientStatus&&null!=w.page.demo.endDate&&""!=w.page.demo.endDate&&function(e){if(null==e||""==e)return!0;var t=e.toString().split("-");if(3!=t.length)return!1;var n=new Date(t[0],t[1]-1,t[2]);return!isNaN(n.getTime())&&n.getFullYear()==t[0]&&n.getMonth()==t[1]-1&&n.getDate()==t[2]}(w.page.demo.endDate)){var t=w.page.demo.endDate.split("-");if(e>new Date(t[0],t[1]-1,t[2]))return alert("Patient Status cannot be Active after End Date."),!1}return!0},w.isPostalComplete=function(){var e=w.page.demo.address.province;return null===w.page.demo.address.postal||null===e||"OT"===e||0===e.indexOf("US")||(!!w.isPostalValid()||(w.resetEditState(),!1))},w.isPostalValid=function(){var e=w.page.demo.address.postal.replace(/\s/g,"");return 0===e.length?(w.page.demo.address.postal=null,!0):new RegExp(/^[A-Za-z]\d[A-Za-z]\d[A-Za-z]\d$/).test(e)?(w.page.demo.address.postal=e.substring(0,3)+" "+e.substring(3),!0):(alert("Invalid/Incomplete Postal Code"),!1)},w.checkEmail=function(){if(null==w.page.demo.email||""==w.page.demo.email)return!0;var e=/^[^@]+@[^@]+$/;if(e.test(w.page.demo.email)){var t=w.page.demo.email.split("@");if((e=/^[!#%&'=`~\{}\-\$\*\+\/\?\^\|\w]+(\.[!#%&'=`~\{}\-\$\*\+\/\?\^\|\w]+)*$/).test(t[0])&&(e=/^[^\W_]+(([^\W_]|-)+[^\W_]+)*(\.[^\W_]+(([^\W_]|-)+[^\W_]+)*)*\.[^\W_]{2,3}$/).test(t[1]))return!0}return alert("Invalid email address"),!1},w.checkChartNo=function(){null!=w.page.demo.chartNo&&""!=w.page.demo.chartNo&&w.page.demo.chartNo.length>10?w.page.demo.chartNo=P:P=w.page.demo.chartNo},w.checkCytoNum=function(){null!=w.page.demo.scrCytolNum&&""!=w.page.demo.scrCytolNum?l(w.page.demo.scrCytolNum)?k=w.page.demo.scrCytolNum:w.page.demo.scrCytolNum=k:k=w.page.demo.scrCytolNum},w.checkReferralDocNo=function(){w.validateDocNo(w.page.demo.scrReferralDocNo,!0)?R=w.page.demo.scrReferralDocNo:w.page.demo.scrReferralDocNo=R},w.checkFamilyDocNo=function(){w.validateDocNo(w.page.demo.scrFamilyDocNo,!0)?T=w.page.demo.scrFamilyDocNo:w.page.demo.scrFamilyDocNo=T},w.validateDocNo=function(e,t){return!!(null==e||""===e||l(e)&&e.length<10)||(t||alert("Invalid Doctor Number"),!1)},w.checkSin=function(){if(null!=w.page.demo.sin&&""!=w.page.demo.sin){var e=w.page.demo.sin.replace(/\s/g,"");!l(e)||e.length>9?w.page.demo.sin=U:(e.length>6?w.page.demo.sin=e.substring(0,3)+" "+e.substring(3,6)+" "+e.substring(6):e.length>3&&(w.page.demo.sin=e.substring(0,3)+" "+e.substring(3)),U=w.page.demo.sin)}else U=w.page.demo.sin},w.validateSin=function(){if(null==w.page.demo.sin||""==w.page.demo.sin)return!0;var e=w.page.demo.sin.replace(/\s/g,"");if(l(e)&&9==e.length){for(var t=0,n=0;n<e.length;n++){var a=Number(e.charAt(n))*(n%2+1);t+=a%10+Math.floor(a/10)}if(t%10==0)return!0}return alert("Invalid SIN #"),!1},w.preventManualEffDate=function(){null==w.page.demo.effDate?w.page.demo.effDate=M:M=w.page.demo.effDate},w.preventManualHcRenewDate=function(){null==w.page.demo.hcRenewDate?w.page.demo.hcRenewDate=L:L=w.page.demo.hcRenewDate},w.preventManualRosterDate=function(){null==w.page.demo.rosterDate?w.page.demo.rosterDate=E:E=w.page.demo.rosterDate},w.preventManualRosterTerminationDate=function(){null==w.page.demo.rosterTerminationDate?w.page.demo.rosterTerminationDate=F:F=w.page.demo.rosterTerminationDate},w.preventManualPatientStatusDate=function(){null==w.page.demo.patientStatusDate?w.page.demo.patientStatusDate=x:x=w.page.demo.patientStatusDate},w.preventManualDateJoined=function(){null==w.page.demo.dateJoined?w.page.demo.dateJoined=H:H=w.page.demo.dateJoined},w.preventManualEndDate=function(){null==w.page.demo.endDate?w.page.demo.endDate=O:O=w.page.demo.endDate},w.preventManualOnWaitingListSinceDate=function(){null==w.page.demo.onWaitingListSinceDate?w.page.demo.onWaitingListSinceDate=j:j=w.page.demo.onWaitingListSinceDate},w.preventManualPaperChartArchivedDate=function(){null==w.page.demo.scrPaperChartArchivedDate?w.page.demo.scrPaperChartArchivedDate=$:$=w.page.demo.scrPaperChartArchivedDate},w.isRosterTerminated=function(){return null!==w.page.demo&&void 0!==w.page.demo?"TE"===w.page.demo.rosterStatus:null},w.showReferralDocList=function(){w.page.showReferralDocList=!w.page.showReferralDocList},w.searchReferralDocsName=function(e){return w.searchReferralDocs(e,null)},w.searchReferralDocsRefNo=function(e){return w.searchReferralDocs(null,e)},w.searchReferralDocs=function(e,t){return N.searchReferralDoctors(e,t,1,10).then(function(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var a=e[n].lastName+", "+e[n].firstName;t[n]={label:a,name:a,referralNo:e[n].referralNo},null!=e[n].specialtyType&&""!=e[n].specialtyType&&(t[n].label+=" ["+e[n].specialtyType+"]")}return t},function(e){return[]})},w.chooseReferralDoc=function(e,t,n){w.page.demo.scrReferralDocNo=e.referralNo,w.page.demo.scrReferralDoc=e.name,w.checkReferralDocNo()},w.chooseFamilyDoc=function(e,t,n){w.page.demo.scrFamilyDocNo=e.referralNo,w.page.demo.scrFamilyDoc=e.name,w.checkFamilyDocNo()},w.showAddNewRosterStatus=function(){w.page.showAddNewRosterStatus=!w.page.showAddNewRosterStatus,w.page.newRosterStatus=null},w.showAddNewPatientStatus=function(){w.page.showAddNewPatientStatus=!w.page.showAddNewPatientStatus,w.page.newPatientStatus=null},w.addNewRosterStatus=function(){null!=w.page.newRosterStatus&&""!=w.page.newRosterStatus&&(w.page.rosterStatusList.push({value:w.page.newRosterStatus,label:w.page.newRosterStatus}),w.page.demo.rosterStatus=w.page.newRosterStatus),w.showAddNewRosterStatus()},w.addNewPatientStatus=function(){null!=w.page.newPatientStatus&&""!=w.page.newPatientStatus&&(w.page.patientStatusList.push({value:w.page.newPatientStatus,label:w.page.newPatientStatus}),w.page.demo.patientStatus=w.page.newPatientStatus),w.showAddNewPatientStatus()},w.checkPhone=function(e){"C"==e?s(w.page.demo.scrCellPhone)?w.page.demo.scrCellPhone=G.C:G.C=w.page.demo.scrCellPhone:"H"==e?s(w.page.demo.scrHomePhone)?w.page.demo.scrHomePhone=G.H:G.H=w.page.demo.scrHomePhone:"W"==e?s(w.page.demo.scrWorkPhone)?w.page.demo.scrWorkPhone=G.W:G.W=w.page.demo.scrWorkPhone:"HX"==e&&null!=w.page.demo.scrHPhoneExt&&""!=w.page.demo.scrHPhoneExt?l(w.page.demo.scrHPhoneExt)?G.HX=w.page.demo.scrHPhoneExt:w.page.demo.scrHPhoneExt=G.HX:"WX"==e&&null!=w.page.demo.scrWPhoneExt&&""!=w.page.demo.scrWPhoneExt&&(l(w.page.demo.scrWPhoneExt)?G.WX=w.page.demo.scrWPhoneExt:w.page.demo.scrWPhoneExt=G.WX)},w.setPreferredPhone=function(){w.page.cellPhonePreferredMsg=K,w.page.cellPhonePreferredColor="",w.page.homePhonePreferredMsg=K,w.page.homePhonePreferredColor="",w.page.workPhonePreferredMsg=K,w.page.workPhonePreferredColor="","C"==w.page.demo.scrPreferredPhone?(w.page.preferredPhoneNumber=w.page.demo.scrCellPhone,w.page.cellPhonePreferredMsg=W,w.page.cellPhonePreferredColor="#ffff99"):"H"==w.page.demo.scrPreferredPhone?(w.page.preferredPhoneNumber=w.page.demo.scrHomePhone,w.page.homePhonePreferredMsg=W,w.page.homePhonePreferredColor="#ffff99"):"W"==w.page.demo.scrPreferredPhone&&(w.page.preferredPhoneNumber=w.page.demo.scrWorkPhone,w.page.workPhonePreferredMsg=W,w.page.workPhonePreferredColor="#ffff99")},w.isPhoneVoid=function(e){return null==e||""==e},w.showEnrollmentHistory=function(){var e="../demographic/EnrollmentHistory.jsp?demographicNo="+w.page.demo.demographicNo;window.open(e,"enrollmentHistory","width=650, height=1000")},w.launchPhoto=function(){var e="../casemgmt/uploadimage.jsp?demographicNo="+w.page.demo.demographicNo;window.open(e,"uploadWin","width=500, height=300")},w.manageContacts=function(){var e=!0;if(w.page.dataChanged>0&&(e=confirm("You may have unsaved data. Are you sure to leave?")),e){var t="../demographic/Contact.do?method=manage&demographic_no="+w.page.demo.demographicNo;window.open(t,"ManageContacts","width=960, height=700")}},w.printLabel=function(e){var t=null;"PDFLabel"==e?t="../demographic/printDemoLabelAction.do?appointment_no=null&demographic_no="+w.page.demo.demographicNo:"PDFAddress"==e?t="../demographic/printDemoAddressLabelAction.do?demographic_no="+w.page.demo.demographicNo:"PDFChart"==e?t="../demographic/printDemoChartLabelAction.do?demographic_no="+w.page.demo.demographicNo:"PrintLabel"==e?t="../demographic/demographiclabelprintsetting.jsp?demographic_no="+w.page.demo.demographicNo:"ClientLab"==e&&(t="../demographic/printClientLabLabelAction.do?demographic_no="+w.page.demo.demographicNo),window.open(t,"Print","width=960, height=700")},w.integratorDo=function(e){var t=null;"ViewCommunity"==e?t="../admin/viewIntegratedCommunity.jsp":"Linking"==e?t="../integrator/manage_linked_clients.jsp?demographicId="+w.page.demo.demographicNo:"Compare"==e?t="../demographic/DiffRemoteDemographics.jsp?demographicId="+w.page.demo.demographicNo:"Update"==e?t="../demographic/copyLinkedDemographicInfoAction.jsp?displaymode=edit&dboperation=search_detail&demographicId="+w.page.demo.demographicNo+"&demographic_no="+w.page.demo.demographicNo:"SendNote"==e&&(t="../demographic/followUpSelection.jsp?demographicId="+w.page.demo.demographicNo),window.open(t,"Integrator","width=960, height=700")},w.macPHRDo=function(e){var t=null;if("Register"==e){if(!w.page.macPHRLoggedIn)return void alert("Please login to PHR first");t="../phr/indivo/RegisterIndivo.jsp?demographicNo="+w.page.demo.demographicNo}else"SendMessage"==e?t="../phr/PhrMessage.do?method=createMessage&providerNo="+A.providerNo+"&demographicNo="+w.page.demo.demographicNo:"ViewRecord"==e?t="../demographic/viewPhrRecord.do?demographic_no="+w.page.demo.demographicNo:"Verification"==e&&(t="../phr/PHRVerification.jsp?demographic_no="+w.page.demo.demographicNo);window.open(t,"MacPHR","width=960, height=700")},w.appointmentDo=function(e){var t=null;"ApptHistory"==e?t="../demographic/demographiccontrol.jsp?displaymode=appt_history&dboperation=appt_history&limit1=0&limit2=25&orderby=appttime&demographic_no="+w.page.demo.demographicNo+"&last_name="+encodeURI(w.page.demo.lastName)+"&first_name="+encodeURI(w.page.demo.firstName):"WaitingList"==e&&(t="../oscarWaitingList/SetupDisplayPatientWaitingList.do?demographic_no="+w.page.demo.demographicNo),window.open(t,"Appointment","width=960, height=700")},w.isClinicaidBilling=function(){return"CLINICAID"==w.page.billregion},w.billingDo=function(e){var t=new Date,n=null;"BillingHistory"==e?n="CLINICAID"==w.page.billregion?"../billing.do?billRegion=CLINICAID&action=invoice_reports&patient_remote_id="+w.page.demo.demographicNo:"ON"==w.page.billregion?"../billing/CA/ON/billinghistory.jsp?demographic_no="+w.page.demo.demographicNo+"&last_name="+encodeURI(w.page.demo.lastName)+"&first_name="+encodeURI(w.page.demo.firstName)+"&orderby=appointment_date&displaymode=appt_history&dboperation=appt_history&limit1=0&limit2=10":"../billing/CA/BC/billcontroller.page.jsp?lastName="+encodeURI(w.page.demo.lastName)+"&firstName="+encodeURI(w.page.demo.firstName)+"&filterPatient=true&demographicNo="+w.page.demo.demographicNo:"CreateInvoice"==e?n="../billing.do?billRegion="+w.page.billregion+"&billForm="+w.page.defaultView+"&hotclick=&appointment_no=0&demographic_name="+encodeURI(w.page.demo.lastName)+encodeURI(",")+encodeURI(w.page.demo.firstName)+"&demographic_no="+w.page.demo.demographicNo+"&providerview="+w.page.demo.providerNo+"&user_no="+A.providerNo+"&apptProvider_no=none&appointment_date="+t.getFullYear+"-"+(t.getMonth()+1)+"-"+t.getDate()+"&start_time=00:00:00&bNewForm=1&status=t":"FluBilling"==e?n="../billing/CA/ON/specialtyBilling/fluBilling/addFluBilling.jsp?function=demographic&functionid="+w.page.demo.demographicNo+"&creator="+A.providerNo+"&demographic_name="+encodeURI(w.page.demo.lastName)+encodeURI(",")+encodeURI(w.page.demo.firstName)+"&hin="+w.page.demo.hin+w.page.demo.ver+"&demo_sex="+w.page.demo.sex+"&demo_hctype="+w.page.demo.hcType+"&rd="+encodeURI(w.page.demo.scrReferralDoc)+"&rdohip="+w.page.demo.scrReferralDocNo+"&dob="+w.page.demo.dobYear+w.page.demo.dobMonth+w.page.demo.dobDay+"&mrp="+w.page.demo.providerNo:"HospitalBilling"==e?n="../billing/CA/ON/billingShortcutPg1.jsp?billRegion="+w.page.billregion+"&billForm="+encodeURI(w.page.hospitalView)+"&hotclick=&appointment_no=0&demographic_name="+encodeURI(w.page.demo.lastName)+encodeURI(",")+encodeURI(w.page.demo.firstName)+"&demographic_no="+w.page.demo.demographicNo+"&providerview="+w.page.demo.providerNo+"&user_no="+A.providerNo+"&apptProvider_no=none&appointment_date="+t.getFullYear+"-"+(t.getMonth()+1)+"-"+t.getDate()+"&start_time=00:00:00&bNewForm=1&status=t":"AddBatchBilling"==e?n="../billing/CA/ON/addBatchBilling.jsp?demographic_no="+w.page.demo.demographicNo+"&creator="+A.providerNo+"&demographic_name="+encodeURI(w.page.demo.lastName)+encodeURI(",")+encodeURI(w.page.demo.firstName)+"&hin="+w.page.demo.hin+w.page.demo.ver+"&dob="+w.page.demo.dobYear+w.page.demo.dobMonth+w.page.demo.dobDay:"AddINR"==e?n="../billing/CA/ON/inr/addINRbilling.jsp?function=demographic&functionid="+w.page.demo.demographicNo+"&creator="+A.providerNo+"&demographic_name="+encodeURI(w.page.demo.lastName)+encodeURI(",")+encodeURI(w.page.demo.firstName)+"&hin="+w.page.demo.hin+w.page.demo.ver+"&dob="+w.page.demo.dobYear+w.page.demo.dobMonth+w.page.demo.dobDay:"BillINR"==e&&(n="../billing/CA/ON/inr/reportINR.jsp?provider_no="+A.providerNo),window.open(n,"Billing","width=960, height=700")},w.exportDemographic=function(){var e="../demographic/demographicExport.jsp?demographicNo="+w.page.demo.demographicNo;window.open(e,"DemographicExport","width=960, height=700")},w.formatDocOutput=function(e){var t,n,a=e.indexOf("<rdohip>")+"<rdohip>".length,o=e.indexOf("</rdohip>");return o>a&&o>=0&&a>=0&&(t=e.substring(a,o)),a=e.indexOf("<rd>")+"<rd>".length,(o=e.indexOf("</rd>"))>a&&o>=0&&a>=0&&(n=e.substring(a,o)),{number:t,name:n}},w.formatDocInput=function(e,t){var n="<rdohip></rdohip>",a="<rd></rd>";return null!=t&&""!==t&&(n="<rdohip>"+t+"</rdohip>"),null!=e&&""!==e&&(a="<rd>"+e+"</rd>"),n+a},w.validateHCSave=function(e){null==w.page.demo.hin||""==w.page.demo.hin?e&&w.save():S.isUniqueHC(w.page.demo.hin,w.page.demo.demographicNo).then(function(t){t.success?"ON"!=w.page.demo.hcType?e&&w.save():(null==w.page.demo.ver&&(w.page.demo.ver=""),S.validateHC(w.page.demo.hin,w.page.demo.ver).then(function(t){null==t.valid?w.page.HCValidation="n/a":t.valid||(alert("Health Card Validation failed: "+t.responseDescription+" ("+t.responseCode+")"),e=!1),e&&w.save()},function(e){console.log(e)})):alert("HIN is already in use!")},function(e){console.log(e)})},w.save=function(){if(w.page.saving=!0,null!=w.page.demo.lastName&&""!=w.page.demo.lastName)if(null!=w.page.demo.firstName&&""!=w.page.demo.firstName)if(null!=w.page.demo.sex&&""!=w.page.demo.sex)if(i(w.page.demo.dobYear,w.page.demo.dobMonth,w.page.demo.dobDay))alert("Date of Birth is required");else if(w.page.demo.dateOfBirth=a(w.page.demo.dobYear,w.page.demo.dobMonth,w.page.demo.dobDay),null!=w.page.demo.dateOfBirth){if(w.checkPatientStatus()&&w.isPostalComplete()&&w.validateSin()&&w.validateDocNo(w.page.demo.scrReferralDocNo)&&w.validateDocNo(w.page.demo.scrFamilyDocNo)){null!=w.page.demo.scrNotes&&(w.page.demo.notes="<unotes>"+w.page.demo.scrNotes+"</unotes>"),w.page.demo.familyDoctor=w.formatDocInput(w.page.demo.scrReferralDoc,w.page.demo.scrReferralDocNo),w.page.demo.familyDoctor2=w.formatDocInput(w.page.demo.scrFamilyDoc,w.page.demo.scrFamilyDocNo),w.page.demo.scrDemoCell=w.page.demo.scrCellPhone,w.page.demo.phone=w.page.demo.scrHomePhone,w.page.demo.alternativePhone=w.page.demo.scrWorkPhone,"C"==w.page.demo.scrPreferredPhone?w.page.demo.scrDemoCell+="*":"H"==w.page.demo.scrPreferredPhone?w.page.demo.phone+="*":"W"==w.page.demo.scrPreferredPhone&&(w.page.demo.alternativePhone+="*");var e=[];e=n("demo_cell",w.page.demo.scrDemoCell,J,w.page.demo.extras,e),e=n("aboriginal",w.page.demo.scrAboriginal,J,w.page.demo.extras,e),e=n("hPhoneExt",w.page.demo.scrHPhoneExt,J,w.page.demo.extras,e),e=n("wPhoneExt",w.page.demo.scrWPhoneExt,J,w.page.demo.extras,e),e=n("cytolNum",w.page.demo.scrCytolNum,J,w.page.demo.extras,e),e=n("phoneComment",w.page.demo.scrPhoneComment,J,w.page.demo.extras,e),e=n("paper_chart_archived",w.page.demo.scrPaperChartArchived,J,w.page.demo.extras,e),e=n("paper_chart_archived_date",w.page.demo.scrPaperChartArchivedDate,J,w.page.demo.extras,e),e=n("usSigned",w.page.demo.scrUsSigned,J,w.page.demo.extras,e),e=n("privacyConsent",w.page.demo.scrPrivacyConsent,J,w.page.demo.extras,e),e=n("informedConsent",w.page.demo.scrInformedConsent,J,w.page.demo.extras,e),e=n("securityQuestion1",w.page.demo.scrSecurityQuestion1,J,w.page.demo.extras,e),e=n("securityAnswer1",w.page.demo.scrSecurityAnswer1,J,w.page.demo.extras,e),e=n("rxInteractionWarningLevel",w.page.demo.scrRxInteractionLevel,J,w.page.demo.extras,e),w.page.demo.extras=e,v.updateDemographic(w.page.demo).then(function(){w.resetEditState()},function(){w.page.saving=!1,alert("Failed to save demographic")})}}else alert("Invalid Date of Birth");else alert("Sex is required");else alert("First Name is required");else alert("Last Name is required")},w.resetEditState=function(){w.page.saving=!1,w.page.dataChanged=!1},w.init()}]);var o=[31,28,31,30,31,30,31,31,30,31,30,31];function r(e,t,n){if(null!=e&&""!=e&&null!=t&&""!=t&&null!=n&&""!=n){var a=o[t-1];return 2==t&&(e%4==0&&e%100!=0||e%400==0)&&(a=29),n>0&&n<=a}return i(e,t,n)}function i(e,t,n){return!(null!=e&&""!=e||null!=t&&""!=t||null!=n&&""!=n)}function l(e){return/^[0-9]+$/.test(e)}function s(e){return null!=e&&!/^[0-9 \-\()]*$/.test(e)}function c(e){return null!=(e=String(e))&&""!=e&&"*"==e.charAt(e.length-1)}function u(e){return c(e)&&(e=e.substring(0,e.length-1)),e}function d(e){var t=e;if(null!=e.role){var n={};n.role=e.role,n.sdm=e.sdm,n.ec=e.ec,n.category=e.category,n.lastName=e.lastName,n.firstName=e.firstName,n.phone=e.phone,t=[n]}for(var a=0;a<t.length;a++)1==t[a].sdm&&(t[a].role+=" /sdm"),1==t[a].ec&&(t[a].role+=" /ec"),null!=t[a].role&&""!=t[a].role||(t[a].role="-"),null==t[a].phone||""==t[a].phone?t[a].phone="-":"*"==t[a].phone.charAt(t[a].phone.length-1)&&(t[a].phone=t[a].phone.substring(0,t[a].phone.length-1));return t}function p(e){return e instanceof Array?e:null==e?[]:[e]}},function(e,t,n){"use strict";angular.module("Record.Details",["Common","Common.Services"])},function(e,t,n){(function(e){angular.module("Record.Forms").controller("Record.Forms.FormController",["$scope","$http","$location","$stateParams","$state","demographicService","demo","formService","user","securityService",function(t,n,a,o,r,i,l,s,c,u){var d=this;console.log("form ctrl ",o,r),d.demographicNo=o.demographicNo,d.providerNo=c.providerNo,d.page={},d.page.currentFormList=[],d.page.currentForm={},d.page.currentlistId=o.formListId,console.log("What is the state "+r.params.type+" : "+angular.isUndefined(r.params.type)+" id "+r.params.id,r),u.hasRights({items:[{objectName:"_admin",privilege:"w"},{objectName:"_admin.eform",privilege:"w"}]}).then(function(e){d.adminAccess=e.content[0],d.adminEformAccess=e.content[1],null!=e.content&&2==e.content.length?(d.adminAccess||d.adminEformAccess)&&(d.hasAdminAccess=!0):alert("failed to load rights")},function(e){console.log(e)}),d.page.formlists=[{id:0,label:"Completed"},{id:1,label:"Library"}],d.page.formlists.forEach(function(e,t){console.log("What is the item ",e),s.getAllFormsByHeading(o.demographicNo,e.label).then(function(e){d.page.currentFormList[t]=Juno.Common.Util.toArray(e.list)},function(e){console.log(e)})}),d.page.encounterFormlist=[],d.page.formGroups=[],d.getFormGroups=function(){s.getFormGroups().then(function(e){e instanceof Array?d.page.formGroups=e:d.page.formGroups.push(e);for(var t=0;t<d.page.formGroups.length;t++)d.page.formGroups[t].summaryItem instanceof Array||(d.page.formGroups[t].summaryItem=[d.page.formGroups[t].summaryItem])},function(e){console.log(e)})},d.getFormGroups(),d.page.formOptions=[],d.favouriteGroup=null,getFavouriteFormGroup=function(){s.getFavouriteFormGroup().then(function(e){d.favouriteGroup=e,d.favouriteGroup.summaryItem instanceof Array||(d.favouriteGroup.summaryItem=[d.favouriteGroup.summaryItem])},function(e){console.log(e)})},getFavouriteFormGroup(),s.getFormOptions(d.demographicNo).then(function(e){console.log("data",e),e.items instanceof Array?d.page.formOptions=e.items:d.page.formOptions.push(e.items),console.log("form options",d.page.formOptions)},function(e){console.log(e)}),s.getCompletedEncounterForms(o.demographicNo).then(function(e){d.page.encounterFormlist[0]=e},function(e){console.log(e)}),s.getSelectedEncounterForms().then(function(e){d.page.encounterFormlist[1]=e},function(e){console.log(e)}),d.changeTo=function(e){d.page.currentlistId=e,console.log("set currentlist to "+e),0==e&&s.getAllFormsByHeading(o.demographicNo,"Completed").then(function(e){console.debug("whats the index0",e),d.page.currentFormList[0]=Juno.Common.Util.toArray(e.list)},function(e){console.log(e)})},d.viewFormState=function(t,n){for(;document.getElementById("formInViewFrame").hasChildNodes();)document.getElementById("formInViewFrame").removeChild(document.getElementById("formInViewFrame").firstChild);var i=a.search().name,l={demographicNo:o.demographicNo,type:"eform"===t.type?"eform":"form",id:t.id||t.formId};"eform"===t.type&&t.id||"form"===t.type&&t.formId?(l.name="form"===t.type?t.name||i:"",r.go("record.forms.view",l)):"eform"===t.type?r.go("record.forms.add",l):r.go("record.forms"),void 0===n&&(n=1);var s="";"eform"===t.type?s=Juno.Common.Util.isUndefinedOrNull(t.id)?"../eform/efmformadd_data.jsp?fid="+t.formId+"&demographic_no="+o.demographicNo:"../eform/efmshowform_data.jsp?fdid="+t.id:s=angular.isDefined(t.formId)?"../form/forwardshortcutname.jsp?formname="+(t.name||i)+"&demographic_no="+o.demographicNo+"&formId="+t.formId:t.formValue+o.demographicNo+"&formId=0&provNo="+c.providerNo+"&parentAjaxId=forms";if(1===n)e("html, body").animate({scrollTop:0},"slow");else if(2===n){var u=Math.round(1e3*Math.random());return win="win"+u,void window.open(s,win,"scrollbars=yes, location=no, width=900, height=600","")}d.page.currentForm=t;var p=new pym.Parent("formInViewFrame",s,{});d.pymParent=p,e("iframe").load(function(){var e=Math.max(document.getElementById("formInViewFrame").firstChild.contentWindow.document.body.scrollHeight,document.getElementById("formInViewFrame").firstChild.contentWindow.document.body.offsetHeight)+30+"px";document.getElementById("formInViewFrame").firstChild.style.height=e})},d.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},d.currentEformGroup={},d.setCurrentEFormGroup=function(e){d.currentEformGroup=e},d.openFormFromGroups=function(e){console.log("group item",e),e.formId=e.id,delete e.id,d.viewFormState(e,2)},d.formOption=function(e){var t=!1;if("send2PHR"==e.extra){for(var n="",a=0;a<d.page.currentFormList[d.page.currentlistId].length;a++)d.page.currentFormList[d.page.currentlistId][a].isChecked&&(n=n+"&sendToPhr="+d.page.currentFormList[d.page.currentlistId][a].id,t=!0);if(t){var o=Math.round(1e3*Math.random());win="win"+o;var r="../eform/efmpatientformlistSendPhrAction.jsp?clientId="+d.demographicNo+n;window.open(r,win,"scrollbars=yes, location=no, width=900, height=600","")}}t||alert("No Documents Selected")},d.getListClass=function(e){if(e===d.page.currentlistId)return"active"},d.getGroupListClass=function(e){if(e===d.currentEformGroup)return"active"},d.getActiveFormClass=function(e){return e.type!==d.page.currentForm.type||e.id!==d.page.currentForm.id||Juno.Common.Util.isUndefinedOrNull(e.id)?e.type===d.page.currentForm.type&&e.formId===d.page.currentForm.formId&&Juno.Common.Util.isUndefinedOrNull(e.id)?"active":void 0:"active"};var p=r.current.name;if("record.forms.view"===p||"record.forms.add"===p){var m={};m.type=r.params.type,"record.forms.view"===p&&"eform"===m.type?m.id=r.params.id:m.formId=r.params.id,d.viewFormState(m),d.changeTo("record.forms.view"===p?0:1)}d.keypress=function(e){if(1==e.altKey&&38==e.keyCode)console.log("up",e),console.log(d.page.currentFormList[d.page.currentlistId].indexOf(d.page.currentForm)),(t=d.page.currentFormList[d.page.currentlistId].indexOf(d.page.currentForm))>0&&(d.page.currentForm=d.page.currentFormList[d.page.currentlistId][t-1],d.viewFormState(d.page.currentForm));else if(1==e.altKey&&40==e.keyCode){console.log("down",e);var t=d.page.currentFormList[d.page.currentlistId].indexOf(d.page.currentForm);console.log(t,d.page.currentFormList[d.page.currentlistId].length),t<=d.page.currentFormList[d.page.currentlistId].length&&(d.page.currentForm=d.page.currentFormList[d.page.currentlistId][t+1],d.viewFormState(d.page.currentForm))}else console.log("keypress",e.altKey,e.key,e)}}])}).call(this,n(0))},function(e,t,n){"use strict";angular.module("Record.Forms",["Common","Common.Services"])},function(e,t){angular.module("Record.Summary").controller("Record.Summary.SaveWarningController",["$rootScope","$scope","$uibModal","$uibModalInstance","saveSignNote","cancelNoteEdit",function(e,t,n,a,o,r){this.cancel=function(){a.dismiss("cancel")},this.save=function(){angular.isFunction(o)&&o(),a.close(!0)},this.clearChanges=function(){angular.isFunction(r)&&r(),a.close(!0)}}])},function(e,t){angular.module("Record.Summary").controller("Record.Summary.GroupNotesController",["$scope","$uibModal","$uibModalInstance","$stateParams","$state","$interval","mod","action","user","noteService","securityService","diseaseRegistryService",function(e,t,n,a,o,r,i,l,s,c,u,d){var p=this;p.page={},p.page.title=i.displayName,p.page.items=i.summaryItem,p.page.quickLists=[],p.page.code=i.summaryCode,p.groupNotesForm={assignedCMIssues:[]},p.groupNotesForm.encounterNote={position:1};var m=new Date;p.groupNotesForm.annotation_attrib="anno"+m.getTime(),u.hasRight("_eChart","u",a.demographicNo).then(function(e){p.page.cannotChange=!e},function(e){console.log(e)}),d.getIssueQuickLists().then(function(e){console.log(e),p.page.quickLists=e},function(e){console.log(e)}),p.addDxItem=function(e){for(var t=0;t<p.groupNotesForm.assignedCMIssues.length;t++)if(p.groupNotesForm.assignedCMIssues[t].issue.code===e.code&&p.groupNotesForm.assignedCMIssues[t].issue.type===e.codingSystem)return;d.findDxIssue(e.code,e.codingSystem).then(function(e){var t={acute:!1,certain:!1,issue:e,issue_id:e.id,major:!1,resolved:!1,unsaved:!0};p.groupNotesForm.assignedCMIssues.push(t)},function(e){console.log(e)})},p.checkAction=function(e){p.page.cannotChange&&(e.preventDefault(),e.stopPropagation())},displayIssueId=function(e){c.getIssueId(e).then(function(e){p.page.issueId=e.id},function(e){console.log(e)})},displayIssueId(p.page.code),displayGroupNote=function(e,t){if(null!=p.page.items[t].noteId)c.getIssueNote(p.page.items[t].noteId).then(function(e){p.groupNotesForm.encounterNote=e.encounterNote,p.groupNotesForm.encounterNote.editorNames=i.editorNames,p.groupNotesForm.groupNoteExt=e.groupNoteExt,p.groupNotesForm.assignedCMIssues=e.assignedCMIssues,p.groupNotesForm.assignedCMIssues=[],e.assignedCMIssues instanceof Array?p.groupNotesForm.assignedCMIssues=e.assignedCMIssues:null!=e.assignedCMIssues&&p.groupNotesForm.assignedCMIssues.push(e.assignedCMIssues),l=t,p.setAvailablePositions(),p.removeEditingNoteFlag(),p.groupNotesForm.encounterNote.position<1&&(p.groupNotesForm.encounterNote.position=1)},function(e){console.log(e)});else if("dx_reg"===p.page.items[t].type){p.groupNotesForm.assignedCMIssues=[];var n=p.page.items[t].extra;d.findDxIssue(n.code,n.codingSystem).then(function(e){var n={acute:!1,certain:!1,issue:e,issue_id:e.issueId,major:!1,resolved:!1,unsaved:!0};console.log("find like issue ",n,e),p.groupNotesForm.assignedCMIssues.push(n),p.groupNotesForm.encounterNote={},p.groupNotesForm.groupNoteExt={},p.groupNotesForm.encounterNote={position:1},l=t},function(e){console.log(e)})}},null!=l&&displayGroupNote(p.page.items,l),p.setAvailablePositions=function(){if(p.availablePositions=[],null==p.page.items||0==p.page.items.length)p.availablePositions.push(1);else{var e=0;for(e=0;e<p.page.items.length;e++)p.availablePositions.push(e+1);null==l&&p.availablePositions.push(e+1)}},p.setAvailablePositions(),p.changeNote=function(e,t){return displayGroupNote(e,t)},p.saveGroupNotes=function(){null==p.groupNotesForm.encounterNote.noteId&&(p.groupNotesForm.encounterNote.noteId=0),p.groupNotesForm.encounterNote.cpp=!0,p.groupNotesForm.encounterNote.editable=!0,p.groupNotesForm.encounterNote.isSigned=!0,p.groupNotesForm.encounterNote.observationDate=new Date,p.groupNotesForm.encounterNote.appointmentNo=a.appointmentNo,p.groupNotesForm.encounterNote.encounterType="",p.groupNotesForm.encounterNote.encounterTime="",p.groupNotesForm.encounterNote.assignedIssues=p.groupNotesForm.assignedCMIssues,p.groupNotesForm.encounterNote.summaryCode=p.page.code,c.saveIssueNote(a.demographicNo,p.groupNotesForm).then(function(e){n.dismiss("cancel"),o.transitionTo(o.current,a,{reload:!0,inherit:!1,notify:!0})},function(e){console.log(e)})},p.removeGroupNoteIssue=function(e){console.log("removing issue"),e.unchecked=!0;for(var t=[],n=0;n<p.groupNotesForm.assignedCMIssues.length;n++)p.groupNotesForm.assignedCMIssues[n].issue_id!=e.issue_id&&t.push(p.groupNotesForm.assignedCMIssues[n]);p.groupNotesForm.assignedCMIssues=t,console.log("NEW LIST: ",t)},p.doSetEditingNoteFlag=function(){c.setEditingNoteFlag(editingNoteId,s.providerNo).then(function(e){e.success||("Parameter error"==e.message?alert("Parameter Error: noteUUID["+editingNoteId+"] userId["+s.providerNo+"]"):alert("Warning! Another user is editing this note now."))},function(e){console.log(e)})},p.setEditingNoteFlag=function(){null!=p.groupNotesForm.encounterNote.uuid&&(p.removeEditingNoteFlag(),editingNoteId=p.groupNotesForm.encounterNote.uuid,itvSet=r(p.doSetEditingNoteFlag(),3e4),itvCheck=r(function(){c.checkEditNoteNew(editingNoteId,s.providerNo).then(function(e){e.success||(alert("Warning! Another user tries to edit this note. Your update may be replaced by later revision(s)."),r.cancel(itvCheck),itvCheck=null)},function(e){console.log(e)})},1e4))},p.removeEditingNoteFlag=function(){null!=editingNoteId&&(c.removeEditingNoteFlag(editingNoteId,s.providerNo),r.cancel(itvSet),r.cancel(itvCheck),itvSet=null,itvCheck=null,editingNoteId=null)},p.removeIssue=function(e){e.unchecked=!0},p.restoreIssue=function(e){e.unchecked=!1},p.archiveGroupNotes=function(){p.groupNotesForm.encounterNote.archived=!0,p.saveGroupNotes()},p.cancel=function(){n.dismiss("cancel")},p.openRevisionHistory=function(e){console.log(p.groupNotesForm);var t=Math.round(1e3*Math.random());win="win"+t;var n="../CaseManagementEntry.do?method=notehistory&noteId="+e.noteId;window.open(n,win,"scrollbars=yes, location=no, width=647, height=600","")},p.searchIssues=function(e){var t={term:e};return c.searchIssues(t,0,100).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({issueId:e.content[n].id,code:e.content[n].description+"("+e.content[n].code+")"});return e.total,e.content.length,t},function(e){console.log(e)})},p.assignIssue=function(e,t,n){for(var a=0;a<p.groupNotesForm.assignedCMIssues.length;a++)if(p.groupNotesForm.assignedCMIssues[a].issue.id==t)return;c.getIssue(t).then(function(t){var n={acute:!1,certain:!1,issue:t,issue_id:e.issueId,major:!1,resolved:!1,unsaved:!0};p.groupNotesForm.assignedCMIssues.push(n)},function(e){console.log(e)})},p.isSelected=function(e){if(e.id==l)return"group-note-selected"},p.addToDxRegistry=function(e){d.addToDxRegistry(a.demographicNo,e).then(function(e){console.log(e)},function(e){console.log(e)})}}])},function(e,t){angular.module("Record.Summary").controller("Record.Summary.RecordPrintController",["$scope","$uibModal","$uibModalInstance","$filter","mod","action","$stateParams","summaryService",function(e,t,n,a,o,r,i,l){var s=this;s.pageOptions={},s.pageOptions.printType={},s.pageOptions.dates={},s.page={},s.page.selectedWarning=!1;for(var c=!1,u=0;u<o.length;u++)o[u].isSelected&&(c=!0,u=o.length);c?(console.log("mod len ",o.length),s.pageOptions.printType="selected"):(console.log("printType = all"),s.pageOptions.printType="all"),s.printToday=function(){s.pageOptions.printType="dates";var e=new Date;s.pageOptions.dates.start=e,s.pageOptions.dates.end=e},s.cancelPrint=function(){n.dismiss("cancel")},s.sendToPhr=function(){var e="demographic_no="+i.demographicNo;if(e+="&module=echart","all"==s.pageOptions.printType)e+="&notes2print=ALL_NOTES";else if("selected"==s.pageOptions.printType){for(var t=[],n=0;n<o.length;n++)o[n].isSelected&&t.push(o[n].noteId);e=e+"&notes2print="+t.join()}else"dates"==s.pageOptions.printType&&(e=(e=(e+="&notes2print=ALL_NOTES")+"&startDate="+s.pageOptions.dates.start.getTime())+"&endDate="+s.pageOptions.dates.end.getTime());s.pageOptions.cpp&&(e+="&printCPP=true"),s.pageOptions.cpp&&(e+="&printRx=true"),s.pageOptions.cpp&&(e+="&printLabs=true"),console.log("QS"+e),"selected"!==s.pageOptions.printType||0!=t.length?(s.page.selectedWarning=!1,window.open("../SendToPhr.do?"+e,"_blank")):s.page.selectedWarning=!0},s.print=function(){for(var e=[],t=0;t<o.length;t++)o[t].isSelected&&e.push(o[t].noteId);if("selected"!==s.pageOptions.printType||0!=e.length){s.page.selectedWarning=!1,s.pageOptions.selectedList=e;var n=encodeURIComponent(JSON.stringify(s.pageOptions));window.open("../ws/rs/recordUX/"+i.demographicNo+"/print?printOps="+n,"_blank")}else s.page.selectedWarning=!0}}])},function(e,t,n){(function(e){angular.module("Record.Summary").controller("Record.Summary.SummaryController",["$rootScope","$scope","$http","$location","$stateParams","$state","$filter","$uibModal","$interval","user","noteService","summaryService","securityService",function(o,r,i,l,s,c,u,d,p,m,h,g,f){var v=this;console.log("in summary Ctrl ",s),v.page={},v.page.columnOne={},v.page.columnOne.modules={},v.page.columnThree={},v.page.columnThree.modules={},v.page.selectedNotes=[],v.page.notes={},v.index=0,v.page.notes={},v.page.notes.notelist=[],v.busy=!1,v.page.noteFilter={},v.page.currentFilter="none",v.page.onlyNotes=!1,v.page.onlyMine=!1,v.demographicNo=s.demographicNo,f.hasRight("_eChart","r",s.demographicNo).then(function(e){v.page.canRead=e},function(e){console.log(e)}),f.hasRight("_eChart","u",s.demographicNo).then(function(e){v.page.cannotChange=!e},function(e){console.log(e)}),f.hasRight("_eChart","w",s.demographicNo).then(function(e){v.page.cannotAdd=!e},function(e){console.log(e)}),v.checkAction=function(e){v.page.cannotChange&&(e.preventDefault(),e.stopPropagation())},v.openRevisionHistory=function(e){win="revision";var t="../CaseManagementEntry.do?method=notehistory&noteId="+e.noteId;window.open(t,win,"scrollbars=yes, location=no, width=647, height=600","")},v.openRx=function(e){win="Rx"+e;var t="../oscarRx/choosePatient.do?demographicNo="+e;window.open(t,win,"scrollbars=yes, location=no, width=900, height=600","")},v.openAllergies=function(e){win="Allergy"+e;var t="../oscarRx/showAllergy.do?demographicNo="+e;return window.open(t,win,"scrollbars=yes, location=no, width=900, height=600",""),!1},v.openPreventions=function(e){win="prevention"+e;var t="../oscarPrevention/index.jsp?demographic_no="+e;return window.open(t,win,"scrollbars=yes, location=no, width=900, height=600",""),!1},v.openAssessments=function(){c.go("record.forms",{formListId:1})},v.addMoreItems=function(){console.log(v.busy),v.busy||(v.busy=!0,h.getNotesFrom(s.demographicNo,v.index,20,v.page.noteFilter).then(function(e){if(console.log("whats the data",angular.isUndefined(e.notelist),e.notelist),angular.isDefined(e.notelist)){if(e.notelist instanceof Array){console.log("ok its in an array",v.busy);for(var t=0;t<e.notelist.length;t++)v.page.notes.notelist.push(e.notelist[t])}else v.page.notes.notelist.push(e.notelist);v.index=v.page.notes.notelist.length}v.busy=!1},function(e){console.log(e),v.error=e,v.busy=!1}))},v.addMoreItems(),v.editNote=function(e){o.$emit("loadNoteForEdit",e)},v.editGroupNote=function(e){var t=v.findGroupNote(e);if(null!==t)return t.module.editorNames=e.editorNames,void v.gotoState(t.note,t.module,t.note.id)},v.findGroupNote=function(e){for(var t=v.page.columnOne.modules,n=0;n<t.length;n++)for(var a=t[n].summaryItem,o=0;o<a.length;o++)if(a[o].noteId===e.noteId)return{note:a[o],module:t[n]};return null},v.page.currentEditNote={},v.isNoteBeingEdited=function(e){return e.uuid===v.page.currentEditNote.uuid&&null!==e.uuid},o.$on("currentlyEditingNote",function(e,t){v.page.currentEditNote=t}),o.$on("stopEditingNote",function(){v.page.currentEditNote={}}),o.$on("noteSaved",function(e,t){console.log("new data coming in",t);for(var n=!1,a=0;a<v.page.notes.notelist.length;a++)if(t.uuid==v.page.notes.notelist[a].uuid){console.log("uuid "+t.uuid+" notecount "+a,t,v.page.notes.notelist[a]),v.page.notes.notelist[a]=t,n=!0;break}0==n&&v.page.notes.notelist.unshift(t),v.index=v.page.notes.notelist.length}),v.isRegularNote=function(e){return!(e.document||e.rxAnnotation||e.eformData||e.encounterForm||e.invoice||e.ticklerNote||e.cpp)},v.setColor=function(e){return e.eformData?{"border-left-color":"#DFF0D8"}:e.document?{"border-left-color":"#617CB2"}:e.rxAnnotation?{"border-left-color":"#D3D3D3"}:e.encounterForm?{"border-left-color":"#BCAD75"}:e.invoice?{"border-left-color":"##FF7272"}:e.ticklerNote?{"border-left-color":"#FFA96F"}:e.cpp?{"border-left-color":"#9B8166"}:void 0},v.showNoteHeader=function(e){return!v.page.onlyNotes||!(e.document||e.rxAnnotation||e.eformData||e.encounterForm||e.invoice||e.ticklerNote||e.cpp)},v.showNote=function(e){return(!v.page.onlyNotes||!(e.document||e.rxAnnotation||e.eformData||e.encounterForm||e.invoice||e.ticklerNote||e.cpp))&&((!v.page.onlyMine||m.providerNo===e.providerNo)&&!e.deleted)},v.getNoteHeader=function(e){return e.note.trim().split("\n")[0]},v.trackerUrl="",v.getTrackerUrl=function(e){v.trackerUrl="../oscarEncounter/oscarMeasurements/HealthTrackerPage.jspf?template=tracker&demographic_no="+e+"&numEle=4&tracker=slim"},v.toggleList=function(e){e.displaySize>=e.summaryItem.length?e.displaySize=5:e.displaySize=e.summaryItem.length},v.showMoreItems=function(e){return!!angular.isDefined(e.summaryItem)&&0!=e.summaryItem.length},v.isSectionExpanded=function(e){return e.displaySize>5},v.isSectionEmpty=function(e){return e.summaryItem.length<=5},v.isUnsignedEncounterNote=function(e){return!(e.isSigned||e.cpp||e.document||e.ticklerNote||e.eformData)},g.getSummaryHeaders(s.demographicNo,"left").then(function(e){console.log("left",e),v.page.columnOne.modules=e,b(v.page.columnOne.modules)},function(e){console.log(e),v.error=e}),g.getSummaryHeaders(s.demographicNo,"right").then(function(e){console.log("right",e),v.page.columnThree.modules=e,b(v.page.columnThree.modules)},function(e){console.log(e),v.error=e});var _={};function b(e){for(var t=0;t<e.length;t++)_[e[t].summaryCode]=e[t],g.getFullSummary(s.demographicNo,e[t].summaryCode).then(function(e){angular.isDefined(e.summaryItem)&&(e.summaryItem instanceof Array?_[e.summaryCode].summaryItem=e.summaryItem:_[e.summaryCode].summaryItem=[e.summaryItem])},function(e){console.log(e)})}v.editGroupedNotes=function(o,r,i){d.open({templateUrl:"src/record/summary/groupNotes.jsp",controller:"Record.Summary.GroupNotesController as groupNotesCtrl",backdrop:"static",windowClass:"notesModal",size:o,resolve:{mod:function(){return r},action:function(){return i},user:function(){return m}}}).result.then(function(e){console.log(e)},function(e){null!=a&&(h.removeEditingNoteFlag(a,m.providerNo),p.cancel(t),t=null,p.cancel(n),n=null,a=null),console.log("Modal dismissed at: "+new Date),console.log(e)}),console.log(e("#myModal"))},v.gotoState=function(e,t,n){if(console.log("ITEM: ",e),console.log("MOD: ",t),"add"==e)v.editGroupedNotes("md",t,null);else if("add"==e.action&&"dx_reg"==e.type)v.editGroupedNotes("lg",t,n);else{if("lab"==e.type||"document"==e.type||"rx"==e.type||"allergy"==e.type||"prevention"==e.type||"dsguideline"==e.type)return"rx"==e.type?win="Rx"+s.demographicNo:"allergy"==e.type?win="Allergy"+s.demographicNo:"prevention"==e.type?win="prevention"+s.demographicNo:win="win_item.type_",window.open(e.action,win,"scrollbars=yes, location=no, width=900, height=600",""),!1;"action"==e.action?v.editGroupedNotes("lg",t,n):c.transitionTo(e.action,{demographicNo:s.demographicNo,type:e.type,id:e.id},{location:"replace",notify:!0})}},v.viewEform=function(e){c.transitionTo("record.forms.view",{demographicNo:s.demographicNo,type:"eform",id:e},{location:"replace",notify:!0})},v.viewDocument=function(e){let t=_.incoming.summaryItem,n=null;for(let a=0;a<t.length;a++)if(t[a].id===e){n=t[a];break}null!=n?v.gotoState(n):console.error("item not linked to valid document id:"+e)},v.showPrintModal=function(e,t){d.open({templateUrl:"src/record/print.jsp",controller:"Record.Summary.RecordPrintController as recordPrintCtrl",backdrop:"static",size:"lg",resolve:{mod:function(){return e},action:function(){return t}}}).result.then(function(e){console.log(e)},function(e){console.log("Modal dismissed at: "+new Date),console.log(e)})},v.toggleIsSelectedForPrint=function(e){e.isSelected=!e.isSelected}}]);var t=null,n=null,a=null}).call(this,n(0))},function(e,t,n){"use strict";angular.module("Record.Summary",["Common","Common.Services"])},function(e,t,n){(function(e,t){function n(e){return e<10&&(e="0"+e),e}angular.module("Record").controller("Record.RecordController",["$rootScope","$scope","$window","$http","$localStorage","$location","$state","$stateParams","$timeout","$interval","$uibModal","demographicService","demo","user","properties","noteService","uxService","securityService","scheduleService","billingService",function(a,o,r,i,l,s,c,u,d,p,m,h,g,f,v,_,b,S,C,y){var N=this;N.demographicNo=u.demographicNo,N.demographic=g,N.properties=v,N.page={},N.page.assignedCMIssues=[],N.page.itvSet=null,N.page.itvCheck=null,N.page.editingNoteId=null,N.page.isNoteSaved=!1,N.$storage=l,N.recordtabs2=[],N.init=function(){N.fillMenu()},S.hasRight("_eChart","w",N.demographicNo).then(function(e){N.page.cannotChange=!e},function(e){console.log(e)}),N.checkAction=function(e){N.page.cannotChange&&(e.preventDefault(),e.stopPropagation())},N.isNaN=function(e){return isNaN(e)},N.fillMenu=function(){b.menu(u.demographicNo).then(function(e){N.recordtabs2=e},function(e){console.log(e)})},N.changeTab=function(e){if(N.currenttab2=N.recordtabs2[e.id],Juno.Common.Util.isDefinedAndNotNull(e.state))Juno.Common.Util.isDefinedAndNotNull(e.demoId)?c.go(e.state,{demographicNo:e.demoId}):c.go(e.state);else if(angular.isDefined(e.url)){if("Rx"==e.label)win=e.label+N.demographicNo;else{var t=Math.round(1e3*Math.random());win="win"+t}window.open(e.url,win,"scrollbars=yes, location=no, width=1000, height=600","")}},N.isActive=function(e){return!(!Juno.Common.Util.isDefinedAndNotNull(c.current.name)||!Juno.Common.Util.isDefinedAndNotNull(e.state))&&c.current.name===e.state},r.onbeforeunload=function(e){if(Juno.Common.Util.isDefinedAndNotNull(N.page.encounterNote)&&0!==N.page.encounterNote.note.trim().length&&!1===N.page.isNoteSaved)return"You have made changes to a note, but you did not save them yet.\nLeaving the page will revert all changes."},o.$on("$destroy",function(){delete r.onbeforeunload}),o.$on("$stateChangeStart",function(e,t){Juno.Common.Util.isDefinedAndNotNull(N.page.encounterNote)&&!1===N.page.isNoteSaved&&-1===t.name.indexOf("record.")&&(0!==N.page.encounterNote.note.trim().length&&(confirm("You have unsaved note data. Are you sure you want to leave?")||e.preventDefault()))});var A=null,w=function(){N.page.encounterNote.note!=N.page.initNote&&(console.log("save",N.page.encounterNote),_.tmpSave(u.demographicNo,N.page.encounterNote))},D=!1;o.$watch("controller.page.encounterNote.note",function(e,t){console.log("whats the val ",e!=t),D||(e!=t?(!0,A&&d.cancel(A),A=d(w,2e3)):!1),D=!1});var I=new Date,P=0,k=setInterval(R,1e3);function R(){++P,document.getElementById("aTimer").innerHTML=T(parseInt(P/60))+":"+T(P%60),1200==P&&e("#aTimer").css("background-color","#DFF0D8"),3e3==P&&e("#aTimer").css("background-color","#FDFEC7")}function T(e){var t=e+"";return t.length<2?"0"+t:t}N.getCurrentTimerToggle=function(){return angular.isDefined(k)?"fa-pause":"fa-play"},N.toggleTimer=function(){e("#aToggle").hasClass("fa-pause")?(e("#aToggle").removeClass("fa-pause"),e("#aToggle").addClass("fa-play"),clearInterval(k)):(e("#aToggle").removeClass("fa-play"),e("#aToggle").addClass("fa-pause"),k=setInterval(R,1e3))},N.pasteTimer=function(){var e=new Date;N.page.encounterNote.note+="\n"+document.getElementById("startTag").value+": "+I.getHours()+":"+T(I.getMinutes())+"\n"+document.getElementById("endTag").value+": "+e.getHours()+":"+T(e.getMinutes())+"\n"+T(parseInt(P/3600))+":"+T(parseInt(P/60%60))+":"+T(P%60)},o.$on("$destroy",function(){clearInterval(k)}),N.toggleNote=function(){N.$storage.hideNote?N.$storage.hideNote=!1:N.$storage.hideNote=!0},N.cancelNoteEdit=function(){console.log("CANCELLING EDIT"),N.page.encounterNote=null,a.$emit("stopEditingNote"),D=!0,N.getCurrentNote(!1),N.removeEditingNoteFlag(),N.$storage.hideNote=!0},N.saveNote=function(){if(0!==N.page.encounterNote.note.length){N.page.encounterNote.assignedIssues=N.page.assignedCMIssues,N.page.encounterNote.issueDescriptions=[],Juno.Common.Util.isInArray(f.displayName,N.page.encounterNote.editorNames)||N.page.encounterNote.editorNames.push(f.displayName);for(var e=0;e<N.page.assignedCMIssues.length;e++)N.page.encounterNote.issueDescriptions.push(N.page.assignedCMIssues[e].issue.description);_.saveNote(u.demographicNo,N.page.encounterNote).then(function(e){N.page.isNoteSaved=!0,a.$emit("noteSaved",e),D=!0,N.page.encounterNote=e,N.$storage.hideNote=!0,N.getCurrentNote(!1),N.page.assignedCMIssues=[]},function(e){console.log(e)}),N.removeEditingNoteFlag()}else alert("Can't save a blank note!")},N.saveSignNote=function(){N.page.encounterNote.isSigned=!0,N.saveNote()},N.saveSignVerifyNote=function(){N.page.encounterNote.isVerified=!0,N.page.encounterNote.isSigned=!0,N.saveNote()},y.getBillingRegion().then(function(e){N.page.billregion=e.message},function(e){console.log(e)}),y.getDefaultView().then(function(e){N.page.defaultView=e.message},function(e){console.log(e)}),null!=s.search().appointmentNo&&C.getAppointment(s.search().appointmentNo).then(function(e){N.page.appointment=e},function(e){console.log(e)}),N.saveSignBillNote=function(){N.page.encounterNote.isSigned=!0,N.saveNote();for(var e="",a=0;a<N.page.assignedCMIssues.length;a++)e+="&dxCode="+N.page.assignedCMIssues[a].issue.code.substring(0,3);var o="",r="",i="",l="";if(null!=N.page.appointment){o=N.page.appointment.id,r=N.page.appointment.providerNo;var s=t(N.page.appointment.appointmentDate).toDate();i=s.getFullYear()+"-"+n(s.getMonth()+1)+"-"+n(s.getDate()),l=n((s=new Date(N.page.appointment.startTime)).getHours())+":"+n(s.getMinutes())+":"+n(s.getSeconds())}var c="../billing.do?billRegion="+encodeURIComponent(N.page.billregion);c+="&billForm="+encodeURIComponent(N.page.defaultView),c+="&demographic_name="+encodeURIComponent(g.lastName+","+g.firstName),c+="&demographic_no="+g.demographicNo,c+="&providerview="+f.providerNo+"&user_no="+f.providerNo,c+="&appointment_no="+o+"&apptProvider_no="+r,c+="&appointment_date="+i+"&start_time="+l,c+="&hotclick=&status=t&bNewForm=1"+e,window.open(c,"billingWin","scrollbars=yes, location=no, width="+screen.width+", height="+screen.height,"")},console.log("RecordCtrlEnd",c),N.page.currentNoteConfig={},N.getIssueNote=function(){null!=N.page.encounterNote.noteId&&_.getIssueNote(N.page.encounterNote.noteId).then(function(e){var t;null!=e&&(N.page.assignedCMIssues=(t=e.assignedCMIssues)instanceof Array?t:null==t?[]:[t])},function(e){console.log(e)})},N.getCurrentNote=function(e){_.getCurrentNote(u.demographicNo,s.search()).then(function(e){N.page.encounterNote=e,N.page.initNote=e.note,N.getIssueNote(),a.$emit("currentlyEditingNote",N.page.encounterNote),N.initAppendNoteEditor(),N.initObservationDate()},function(e){console.log(e)})},N.getCurrentNote(!0),N.editNote=function(e){a.$emit("",e)},a.$on("loadNoteForEdit",function(e,t){if(null!==N.page.editingNoteId)return console.log("Note is already being edited! Do you want to save changes?"),void N.displayWarning(t);N.page.encounterNote=angular.copy(t),N.getIssueNote(),N.$storage.hideNote=!1,a.$emit("currentlyEditingNote",N.page.encounterNote),N.removeEditingNoteFlag()}),N.initAppendNoteEditor=function(){null!=s.search().noteEditorText&&(N.page.encounterNote.note=N.page.encounterNote.note+s.search().noteEditorText)},N.initObservationDate=function(){null===N.page.encounterNote.observationDate&&(N.page.encounterNote.observationDate=new Date)},a.$on("$stateChangeStart",function(){N.removeEditingNoteFlag()}),N.doSetEditingNoteFlag=function(){_.setEditingNoteFlag(N.page.editingNoteId,f.providerNo).then(function(e){e.success||("Parameter error"==e.message?alert("Parameter Error: noteUUID["+N.page.editingNoteId+"] userId["+f.providerNo+"]"):alert("Warning! Another user is editing this note now."))},function(e){console.log(e)})},N.setEditingNoteFlag=function(){null!=N.page.encounterNote.uuid&&(N.page.isNoteSaved=!1,N.page.editingNoteId=N.page.encounterNote.uuid,null==N.page.itvSet&&(N.page.itvSet=p(N.doSetEditingNoteFlag(),3e4)),null==N.page.itvCheck&&(N.page.itvCheck=p(function(){_.checkEditNoteNew(N.page.editingNoteId,f.providerNo).then(function(e){e.success||(alert("Warning! Another user tries to edit this note. Your update may be replaced by later revision(s)."),p.cancel(N.page.itvCheck),N.page.itvCheck=null)},function(e){console.log(e)})},1e4)))},N.removeEditingNoteFlag=function(){null!=N.page.editingNoteId&&(_.removeEditingNoteFlag(N.page.editingNoteId,f.providerNo),p.cancel(N.page.itvSet),p.cancel(N.page.itvCheck),N.page.itvSet=null,N.page.itvCheck=null,N.page.editingNoteId=null)},N.searchTemplates=function(e){var t={name:e};return b.searchTemplates(t,0,25).then(function(e){for(var t=[],n=0;n<e.templates.length;n++)t.push({encounterTemplateName:e.templates[n].encounterTemplateName});return t},function(e){console.log(e)})},N.insertTemplate=function(e,t,n){b.getTemplate({name:t}).then(function(e){if(null!==e.templates){var t=e.templates[0];N.page.encounterNote.note=N.page.encounterNote.note+t.encounterTemplateValue,N.options={magicVal:""}}},function(e){console.log(e)})},N.displayWarning=function(e){m.open({templateUrl:"src/record/summary/saveWarning.jsp",controller:"Record.Summary.SaveWarningController as saveWarningCtrl",backdrop:"static",size:"md",resolve:{saveSignNote:function(){return N.saveSignNote},cancelNoteEdit:function(){return N.cancelNoteEdit}}}).result.then(function(e){console.log(e)},function(e){console.log("Modal dismissed at: "+new Date),console.log(e)})},N.searchIssues=function(e){console.log("SEARCHING FOR ISSUE: ",e);var t={term:e};return _.searchIssues(t,0,100).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({issueId:e.content[n].id,code:e.content[n].description+"("+e.content[n].code+")"});return e.total,e.content.length,t},function(e){console.log(e)})},N.assignIssue=function(e,t,n){for(var a=0;a<N.page.assignedCMIssues.length;a++)if(N.page.assignedCMIssues[a].issue.id==t)return;_.getIssue(t).then(function(t){var n={acute:!1,certain:!1,issue:t,issue_id:e.issueId,major:!1,resolved:!1,unsaved:!0};N.page.assignedCMIssues.push(n),o.$broadcast("noteIssueAdded")},function(e){console.log(e)})},N.removeIssue=function(e){console.log("removed issue in record ctrl"),e.unchecked=!0;for(var t=[],n=0;n<N.page.assignedCMIssues.length;n++)N.page.assignedCMIssues[n].issue_id!=e.issue_id&&t.push(N.page.assignedCMIssues[n]);N.page.assignedCMIssues=t,o.$broadcast("noteIssueRemoved")},N.mediumNavItemFilter=function(t){return function(n){var a=-1!=e.inArray(n.label,["Details","Summary","Forms","Tickler","Health Tracker","Rx","Consultations"]);return!0===t?!a:a}},N.demographic.age=Juno.Common.Util.calcAge(N.demographic.dobYear,N.demographic.dobMonth,N.demographic.dobDay),N.init()}])}).call(this,n(0),n(4))},function(e,t,n){"use strict";angular.module("Record",["Common","Common.Services"])},function(e,t){angular.module("PatientList").controller("PatientList.PatientListProgramController",["$scope","$http",function(e,t){var n=this;e.$on("updatePatientList",function(e,t){console.log("updatePatientList="+JSON.stringify(t)),n.updateData(t.currentPage,t.pageSize)}),n.updateData=function(a,o){t({url:"../ws/rs/program/patientList?startIndex="+a*o+"&numToReturn="+o,method:"GET",headers:{"Content-Type":"application/json"}}).then(function(t){n.admissions=t.data.content,e.$emit("updatePatientListPagination",t.data.total)},function(e){console.log(e)})},n.updateData(0,n.pageSize),e.$emit("togglePatientListFilter",!1)}])},function(e,t){angular.module("PatientList").controller("PatientList.PatientListDemographicSetController",["$scope","$http","Navigation",function(e,t,n){var a=this;t({url:"../ws/rs/reporting/demographicSets/list",method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){a.sets=e.data.content},function(e){alert("Failed to get sets lists.")})}])},function(e,t){angular.module("PatientList").controller("PatientList.PatientListConfigController",["$scope","$uibModalInstance","config",function(e,t,n){var a=this;a.patientListConfig=n,a.cancel=function(){t.dismiss()},a.saveConfiguration=function(){t.close(a.patientListConfig)}}])},function(e,t){angular.module("PatientList").controller("PatientList.PatientListAppointmentListController",["$scope","$http","$q","$filter","$uibModal","Navigation","scheduleService","providerService","patientListState",function(e,t,n,a,o,r,i,l,s){var c=this;c.dateOptions={showWeeks:!1},i.getStatuses().then(function(e){c.statuses=e.content},function(e){console.log(e)}),c.getAppointmentTextStyle=function(e){if(0==e.demographicNo)return{color:"white"}},c.getAppointmentStyle=function(e){if(0==e.demographicNo)return{"background-color":"black"};if(null!=c.statuses)for(var t=0;t<c.statuses.length;t++)if(c.statuses[t].status==e.status)return{"background-color":c.statuses[t].color};return{}},c.today=function(){c.appointmentDate=new Date},c.today(),c.clear=function(){c.appointmentDate=null},c.open=function(e){e.preventDefault(),e.stopPropagation(),c.opened=!0},Date.prototype.AddDays=function(e){return this.setTime(this.getTime()+864e5*e),this},c.switchDay=function(e){var t=c.appointmentDate;t.AddDays(e),c.appointmentDate=t;var n=a("date")(t,"yyyy-MM-dd");c.changeApptList(n)},c.changeApptDate=function(){void 0==c.appointmentDate&&c.today();var e=a("date")(c.appointmentDate,"yyyy-MM-dd");c.changeApptList(e)},c.changeApptList=function(t){temp=0,c.currenttab=s.tabItems[temp];var n=c.currenttab.url.lastIndexOf("/");c.currenttab.url=c.currenttab.url.slice(0,n+1)+t,c.showFilter=!0,e.$emit("juno:patientListRefresh")},c.addNewAppointment=function(){o.open({templateUrl:"src/schedule/appointmentAdd.jsp",controller:"Schedule.AppointmentAddController as appointmentAddCtrl",backdrop:"static",size:"lg",resolve:{me:function(){return l.getMe()},apptDate:function(){return c.appointmentDate}}}).result.then(function(e){c.switchDay(0)},function(e){console.log(e)})},c.viewAppointment=function(e){o.open({templateUrl:"src/schedule/appointmentView.jsp",controller:"Schedule.AppointmentViewController as appointmentViewCtrl",backdrop:"static",size:"lg",resolve:{me:function(){return l.getMe()},appointment:function(){return i.getAppointment(e)},statusList:function(){return i.getStatuses()}}}).result.then(function(e){c.switchDay(0)},function(e){console.log(e)})}}])},function(e,t){angular.module("PatientList").controller("PatientList.PatientListController",["$scope","$http","$state","$uibModal","angularUtil","Navigation","personaService","providerService","patientListState",function(e,t,n,a,o,r,i,l,s){var c=this;c.sidebar=r,c.showFilter=!0,c.patientListConfig={},c.goToRecord=function(e){if(0!=e.demographicNo){var t={demographicNo:e.demographicNo};angular.isDefined(e.appointmentNo)&&(t.appointmentNo=e.appointmentNo,t.encType="face to face encounter with client",o.inMobileView()&&(c.hidePatientList(),console.log("hiding patientlist"))),console.log("params",t),n.go("record.summary",t)}},c.query="",c.isActive=function(e){return null!==c.currenttab&&e===c.currenttab.id},c.isMoreActive=function(e){return null!==c.currentmoretab&&e===c.currentmoretab.id},c.showPatientList=function(){e.$emit("configureShowPatientList",!0)},c.hidePatientList=function(){e.$emit("configureShowPatientList",!1)},c.changeMoreTab=function(e,t){c.currentmoretab;c.currentmoretab=c.moreTabItems[e],c.showFilter=!0,c.currenttab=null,c.refresh(t)},c.changeTab=function(e,t){c.currenttab!==s.tabItems[e]&&(c.currenttab=s.tabItems[e],c.showFilter=!0,c.currentmoretab=null,c.refresh(t))},c.getMoreTabClass=function(e){return null!=c.currentmoretab&&e==c.currentmoretab.id?"more-tab-highlight":""},c.currentPage=0,c.pageSize=8,c.patients=null,c.numberOfPages=function(){return null==c.nPages||0==c.nPages?1:c.nPages},e.$on("updatePatientListPagination",function(e,t){console.log("updatePatientListPagination="+t),c.nPages=Math.ceil(t/c.pageSize),console.log("nPages="+c.nPages)}),c.changePage=function(t){c.currentPage=t,e.$broadcast("updatePatientList",{currentPage:c.currentPage,pageSize:c.pageSize})},e.$on("togglePatientListFilter",function(e,t){console.log("received a togglePatientListFilter event:"+t),c.showFilter=t}),c.process=function(e,n){if(null!=e.url){var a=void 0;"POST"==e.httpType&&(a=null!=n?JSON.stringify(n):{}),t({url:e.url,dataType:"json",data:a,method:e.httpType,headers:{"Content-Type":"application/json"}}).then(function(t){if(c.template=e.template,r.load(c.template),c.currentPage=0,t.data.patients instanceof Array)c.patients=t.data.patients;else if(void 0==t.data.patients)c.patients=[];else{var n=new Array;n[0]=t.data.patients,c.patients=n}c.nPages=1,null!=c.patients&&c.patients.length>0&&(c.nPages=Math.ceil(c.patients.length/c.pageSize))},function(e){alert("error loading data for patient list:"+e)})}else c.changePage(c.currentPage),c.currentPage=0,c.nPages=1,c.template=e.template,r.load(c.template)},c.refresh=function(e){null!=c.currenttab&&c.process(c.currenttab,e),null!=c.currentmoretab&&c.process(c.currentmoretab,e)},e.$on("juno:patientListRefresh",function(){c.refresh()}),l.getRecentPatientList().then(function(e){c.recentPatientList=e},function(e){console.log(e)}),i.getPatientListConfig().then(function(e){c.patientListConfig=e,c.pageSize=c.patientListConfig.numberOfApptstoShow},function(e){console.log(e)}),c.getTabItems=function(){return s.tabItems},c.manageConfiguration=function(){a.open({templateUrl:"src/patientlist/patientListConfiguration.jsp",controller:"PatientList.PatientListConfigController as patientListConfigCtrl",backdrop:!1,size:"lg",resolve:{config:function(){return c.patientListConfig}}}).result.then(function(t){i.setPatientListConfig(t).then(function(t){c.patientListConfig=t,c.pageSize=c.patientListConfig.numberOfApptstoShow,e.$emit("updatePatientListPagination",c.patients.length)},function(e){console.log(e)})},function(e){console.log(e)})},s.tabItems=[{id:0,label:"Appts.",template:"src/patientlist/patientList1.jsp",url:"../ws/rs/schedule/day/today",httpType:"GET"},{id:1,label:"Recent",template:"src/patientlist/recent.jsp",url:"../ws/rs/providerService/getRecentDemographicsViewed",httpType:"GET"}],c.moreTabItems=[{id:0,label:"Patient Sets",template:"src/patientlist/demographicSets.jsp",url:"../ws/rs/reporting/demographicSets/patientList",httpType:"POST"},{id:1,label:"Caseload",template:"src/patientlist/program.jsp",url:null,httpType:null}],c.changeTab(0)}])},function(e,t){angular.module("PatientList").service("patientListState",[function(){this.tabItems=[]}])},function(e,t,n){"use strict";angular.module("PatientList",["Common","Common.Services"])},function(e,t){angular.module("Dashboard").controller("Dashboard.TicklerConfigureController",["$scope","$uibModalInstance","personaService","prefs",function(e,t,n,a){var o=this;o.prefs=a.dashboardPreferences,o.close=function(){t.close(!1)},o.save=function(){n.updateDashboardPreferences(o.prefs).then(function(e){t.close(!0)},function(e){t.close(!1),console.log(e)})}}])},function(e,t){angular.module("Dashboard").controller("Dashboard.DashboardController",["$scope","$uibModal","NgTableParams","providerService","ticklerService","messageService","inboxService","k2aService","noteService","securityService","personaService",function(e,t,n,a,o,r,i,l,s,c,u){var d=this;d.displayDate=function(){return new Date},console.log("TABLE PARAMS",n),d.me=null,d.k2aActive=!1,d.k2aFeedActive=!1,d.busyLoadingData=!1,u.getDashboardPreferences().then(function(e){d.prefs=e.dashboardPreferences},function(e){console.log(e)}),c.hasRights({items:[{objectName:"_tickler",privilege:"w"},{objectName:"_tickler",privilege:"r"}]}).then(function(e){null!=e.content&&2==e.content.length&&(d.ticklerWriteAccess=e.content[0],d.ticklerReadAccess=e.content[1])},function(e){console.log(e)}),d.inboxTableParams=new n({page:1,count:10},{getData:function(e){return i.getDashboardItems(e.count()).then(function(t){return console.log("INBOX DATA: ",t),e.total(t.total),t.content},function(e){console.log(e)})}}),d.openInbox=function(){newwindow=window.open("../dms/inboxManage.do?method=prepareForIndexPage","inbox","height=700,width=1000"),window.focus&&newwindow.focus()},d.updateK2aActive=function(){l.isK2AInit().then(function(e){d.k2aActive=e})},d.loadMoreK2aFeed=function(){d.updateFeed(d.k2afeed.length,10)},d.authenticateK2A=function(e){window.open("../apps/oauth1.jsp?id="+e,"appAuth","width=700,height=450")},d.agreeWithK2aPost=function(e){e.agree?l.removeK2AComment(e.agreeId).then(function(t){e.agree=!1,e.agreeCount--,e.agreeId=""},function(e){alert(e)}):e.agree||e.disagree||(void 0===e.newComment&&(e.newComment={}),e.newComment.agree=!0,e.newComment.body="",d.commentOnK2aPost(e))},d.disagreeWithK2aPost=function(e){e.disagree&&l.removeK2AComment(e.agreeId).then(function(t){e.disagree=!1,e.disagreeCount--,e.agreeId=""},function(e){alert(e)}),e.agree||e.disagree||(void 0===e.newComment&&(e.newComment={}),e.newComment.agree=!1,e.newComment.body="",d.commentOnK2aPost(e))},d.commentOnK2aPost=function(e){e.newComment.postId=e.id,l.postK2AComment(e.newComment).then(function(t){e.newComment.body="",e.newComment.agree="",e.agreeId=t.agreeId,void 0!==t.post[0].agree?t.post[0].agree?(e.agree=!0,e.agreeId=t.post[0].agreeId,e.agreeCount++):(e.disagree=!0,e.agreeId=t.post[0].agreeId,e.disagreeCount++):(e.commentCount++,e.comments.unshift(t.post[0]))},function(e){alert(e)})},d.updateTicklers=function(){o.search({status:"A",creator:d.me.providerNo,overdueOnly:"property"},0,6).then(function(e){if(d.totalTicklers=e.total,null!=e.content)if(e.content instanceof Array)d.ticklers=e.content;else{var t=new Array;t[0]=e.content,d.ticklers=t}},function(e){console.log(e)})},d.updateMessages=function(){r.getUnread(6).then(function(e){if(d.totalMessages=e.total,null!=e.content)if(e.content instanceof Array)d.messages=e.content;else{var t=new Array;t[0]=e.content,d.messages=t}},function(e){console.log(e)})},d.updateReports=function(){i.getDashboardItems(5).then(function(e){if(null!=e.content){if(e.content instanceof Array)d.inbox=e.content;else{var t=new Array;t[0]=e.content,d.inbox=t}d.totalInbox=e.total}},function(e){console.log(e)})},d.updateFeed=function(e,t){d.busyLoadingData||(d.busyLoadingData=!0,l.getK2aFeed(e,t).then(function(e){if(console.log("k2a feed response",e),e.content instanceof Array){for(var t=e.content,n=0;n<t.length;n++){if(!Array.isArray(t[n].comments))(a=new Array)[0]=t[n].comments,t[n].comments=a}void 0===d.k2afeed?d.k2afeed=t:d.k2afeed=d.k2afeed.concat(t),d.k2aFeedActive=!0,d.busyLoadingData=!1}else{var a;if(e.content.authenticatek2a)d.authenticatek2a=e.content.description;else(a=new Array)[0]=e.content,d.k2afeed=a,d.k2aFeedActive=!0}},function(e){alert(e),d.busyLoadingData=!1}))},d.updateDashboard=function(){d.updateTicklers(),d.updateMessages(),d.updateReports(),d.updateFeed(0,10),d.updateK2aActive()},e.$watch(function(){return c.getUser()},function(e){d.me=e,null!=e&&d.updateDashboard()},!0),d.isTicklerExpiredOrHighPriority=function(e){var t=!1;return Date.parse(e.serviceDate)<new Date&&(t=!0),"High"==e.priority&&(t=!0),t},d.isTicklerHighPriority=function(e){Date.parse(e.serviceDate),new Date;var t=!1;return"High"==e.priority&&(t=!0),t},d.openClassicMessenger=function(){null!=d.me&&window.open("../oscarMessenger/DisplayMessages.do?providerNo="+d.me.providerNo,"msgs","height=700,width=1024,scrollbars=1")},d.viewMessage=function(e){window.open("../oscarMessenger/ViewMessage.do?messageID="+e.id+"&boxType=0","msg"+e.id,"height=700,width=1024,scrollbars=1")},d.viewTickler=function(e){t.open({templateUrl:"src/tickler/ticklerView.jsp",controller:"Tickler.TicklerViewController as  ticklerViewCtrl",backdrop:"static",size:"lg",resolve:{tickler:function(){return e},ticklerNote:function(){return s.getTicklerNote(e.id)},ticklerWriteAccess:function(){return d.ticklerWriteAccess},me:function(){return d.me}}}).result.then(function(e){null!=e&&1==e&&d.updateTicklers()},function(e){console.log(e)})},d.configureTicklers=function(){t.open({templateUrl:"src/tickler/configureDashboard.jsp",controller:"Dashboard.TicklerConfigureController as ticklerConfigureCtrl",backdrop:"static",size:"md",resolve:{prefs:function(){return u.getDashboardPreferences()}}}).result.then(function(e){1==e&&(d.updateTicklers(),u.getDashboardPreferences().then(function(e){d.prefs=e.dashboardPreferences}))},function(e){console.log(e)})}}])},function(e,t,n){"use strict";angular.module("Dashboard",["Common","Common.Services"])},function(e,t,n){"use strict";angular.module("Patient").controller("Patient.NewPatientController",["$scope","$uibModal","$uibModalInstance","demographicService","securityService","programService","staticDataService",function(e,t,n,a,o,r,i){var l=this;l.demographic={},l.submitDisabled=!1,o.hasRight("_demographic","w").then(function(e){l.hasRight=e},function(e){console.log(e)}),r.getPrograms().then(function(e){l.programs=e,1==l.programs.length&&(l.demographic.admissionProgramId=l.programs[0].id)},function(e){console.log(e)}),l.genders=i.getGenders(),l.save=function(t){if(console.log(l.demographic.lastName),console.log(l.demographic.firstName),console.log(l.demographic.dobYear),console.log(l.demographic.dobMonth),console.log(l.demographic.dobDay),console.log(l.demographic.sex),console.log(l.demographic),console.log(t.$valid),console.log(e),l.submitDisabled=!0,t.$valid){if(console.log("Saving..."),!l.isCorrectDate(l.demographic.dobYear,l.demographic.dobMonth,l.demographic.dobDay))return alert("Incorrect Date of Birth!"),void(l.submitDisabled=!1);l.demographic.dateOfBirth=l.demographic.dobYear+"-"+l.demographic.dobMonth+"-"+l.demographic.dobDay,l.demographic.patientStatusDate=new Date,l.demographic.dateJoined=new Date,l.demoRetVal={},a.saveDemographic(l.demographic).then(function(e){console.log(e),l.demoRetVal=e,n.close(e)},function(e){console.log(e),l.submitDisabled=!1})}else console.log("ERR!!"),l.submitDisabled=!1},l.ok=function(){n.close(l.selected.item)},l.cancel=function(){n.dismiss("cancel")},l.capName=function(){null!=l.demographic.lastName&&(l.demographic.lastName=l.demographic.lastName.toUpperCase()),null!=l.demographic.firstName&&(l.demographic.firstName=l.demographic.firstName.toUpperCase())},l.isCorrectDate=function(e,t,n){var a=new Date(e,t-1,n);return"Invalid Date"!=a&&(a.getFullYear()==e&&(a.getMonth()==t-1&&a.getDate()==n))}}])},function(e,t,n){"use strict";angular.module("Patient",["Common","Common.Services"])},function(e,t,n){"use strict";(function(e){angular.module("Layout").controller("Layout.NavBarController",["$rootScope","$scope","$q","$timeout","$location","$state","$uibModal","securityService","personaService","billingService","inboxService","messageService",function(t,n,a,o,r,i,l,s,c,u,d,p){var m=this;m.init=function(){m.unAckLabDocTotal=0,m.unreadMessageTotal=0,m.demographicSearch=null,u.getBillingRegion().then(function(e){m.billRegion=e.message},function(e){console.log(e)}),s.hasRights({items:[{objectName:"_search",privilege:"r"},{objectName:"_demographic",privilege:"w"},{objectName:"_msg",privilege:"r"}]}).then(function(e){null!==e.content&&(m.searchRights=e.content[0],m.newDemographicRights=e.content[1],m.messageRights=e.content[2])},function(e){console.log(e)}),c.getDashboardMenu().then(function(e){e.menus&&(m.dashboardMenu=e.menus.menu)},function(e){console.log(e)}),c.getNavBar().then(function(e){m.currentProgram=e.currentProgram.program,e.programDomain.program instanceof Array?m.programDomain=e.programDomain.program:m.programDomain=[e.programDomain.program],m.unreadMessagesCount=e.unreadMessagesCount,m.unreadPatientMessagesCount=e.unreadPatientMessagesCount,m.getUnAckLabDocCount(),m.getUnreadMessageCount(),m.demographicSearchDropDownItems=e.menus.patientSearchMenu.items,m.menuItems=e.menus.menu.items,m.userMenuItems=e.menus.userMenu.items,m.messengerMenu=e.menus.messengerMenu.items},function(e){console.log(e)})},n.$watch(function(){return s.getUser()},function(e){m.me=e},!0),n.$watch(function(){return m.demographicSearch},function(e){console.log("NavBarController::watch demographicSearch",m.demographicSearch),null==e||e.isTypeaheadSearchQuery||(e.moreResults?m.goToPatientSearch(e.searchQuery):m.goToPatientRecord(e.demographicNo),m.demographicSearch=null)},!0),m.getUnAckLabDocCount=function(){d.getUnAckLabDocCount().then(function(e){m.unAckLabDocTotal=e},function(e){console.log(e)})},m.getUnreadMessageCount=function(){p.getUnreadCount().then(function(e){m.unreadMessageTotal=e},function(e){console.log(e)})},m.getNavBar=function(){c.getNavBar().then(function(e){m.currentProgram=e.currentProgram.program,e.programDomain.program instanceof Array?m.programDomain=e.programDomain.program:m.programDomain=[e.programDomain.program],m.unreadMessagesCount=e.unreadMessagesCount,m.unreadPatientMessagesCount=e.unreadPatientMessagesCount,m.demographicSearchDropDownItems=e.menus.patientSearchMenu.items,m.menuItems=e.menus.menu.items,m.userMenuItems=e.menus.userMenu.items,m.messengerMenu=e.menus.messengerMenu.items},function(e){console.log(e)})},m.onPatientSearch=function(e){null===e?m.goToPatientSearch():e.isTypeaheadSearchQuery&&m.goToPatientSearch(e.searchQuery),m.demographicSearch=null},m.goToPatientSearch=function(e){i.go("search",{term:e},{reload:"search"})},m.goToPatientRecord=function(e){i.go("record.details",{demographicNo:e,hideNote:!0},{reload:"record.details"})},m.transition=function(e){var t;if(console.log("transition",e),angular.isDefined(e)&&angular.isDefined(e.state)&&null!==e.state){var n="",a="";"Inbox"===e.label?(n="../dms/inboxManage.do?method=prepareForIndexPage",a="inbox"):"Billing"===e.label?(n="../billing.do?billRegion=CLINICAID&action=invoice_reports",a="billing"):"Admin"===e.label?(n="../administration/",a="admin"):"eDocs"===e.label?(n="../dms/documentReport.jsp?function=provider&functionid="+encodeURIComponent(m.me.providerNo),a="edocView"):o(function(){i.go(e.state)}),""!==n&&""!==a&&(t=window.open(n,a,"scrollbars=1,height=700,width=1000"),window.focus&&t.focus())}else if(angular.isDefined(e)&&angular.isDefined(e.url)&&null!==e.url){if("Schedule"===e.label){var l="",s=r.path(),c=(s=s.substring(1)).split("/");return 1===c.length?l="?module="+encodeURIComponent(c[0]):3===c.length&&(l="?record="+encodeURIComponent(c[1])+"&module="+encodeURIComponent(c[2])),window.location=e.url+l,!1}angular.isDefined(e)&&angular.isDefined(e.openNewWindow)&&e.openNewWindow?(t=window.open(e.url),window.focus&&t.focus()):window.location=e.url}},m.openMessenger=function(e){if(null!=m.me)if(angular.isDefined(e)&&angular.isDefined(e.url)&&"phr"===e.url)window.open("../phr/PhrMessage.do?method=viewMessages","INDIVOMESSENGER"+encodeURIComponent(m.me.providerNo),"height=700,width=1024,scrollbars=1");else if(angular.isDefined(e)&&angular.isDefined(e.url)&&"k2a"===e.url){"-"===e.extra?window.open("../apps/oauth1.jsp?id=K2A","appAuth","width=700,height=450,scrollbars=1").focus():window.open("../apps/notifications.jsp","appAuth","width=450,height=700,scrollbars=1").focus()}else window.open("../oscarMessenger/DisplayMessages.do?providerNo="+encodeURIComponent(m.me.providerNo),"msgs","height=700,width=1024,scrollbars=1")},m.newDemographic=function(t){l.open({templateUrl:"src/patient/newPatient.jsp",controller:"Patient.NewPatientController as newPatientCtrl",backdrop:"static",size:t}).result.then(function(e){console.log(e),console.log("patient #: ",e.demographicNo),console.log(r.path()),r.path("/record/"+encodeURIComponent(e.demographicNo)+"/details"),console.log(r.path())},function(e){console.log("Modal dismissed at: "+new Date),console.log(e)}),console.log(e("#myModal"))},m.isActive=function(e){return i.current.name===e.state},m.changeProgram=function(e){c.setCurrentProgram(e).then(function(e){m.getNavBar()},function(e){console.log(e)})},m.mediumNavItemFilter=function(t){return function(n){var a=-1!=e.inArray(n.label,["Dashboard","Schedule","Inbox","Consultations","Ticklers"]);return!0===t?!a:a}},m.smallNavItemFilter=function(t){return function(n){var a=-1!=e.inArray(n.label,["Dashboard"]);return!0===t?!a:a}}}])}).call(this,n(0))},function(e,t){angular.module("Layout").controller("Layout.BodyController",["$rootScope","$scope","providerService","securityService",function(e,t,n,a){var o=this;o.init=function(){n.getMe().then(function(e){a.setUser(e)},function(e){console.log(e)})},o.showPatientList=!0,t.$on("configureShowPatientList",function(e,t){console.log("Layout.BodyController updating showPatientList",t),o.showPatientList=t})}])},function(e,t,n){"use strict";angular.module("Layout",["Common","Common.Services"])},function(e,t){angular.module("Common").directive("caZeroPad",["$filter",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,a,o){o.$formatters.unshift(function(t){var n=a.caZeroPad;return n||(n=0),e("numberFixedLength")(t,n)}),o.$parsers.unshift(function(t){var n=a.caZeroPad;return n||(n=0),e("numberFixedLength")(t,n)})}}}])},function(e,t){angular.module("Common").directive("scroll",["$window",function(e){return{link:function(t){angular.element(e).on("scroll",function(e){t.$broadcast("scroll::scroll")})}}}])},function(e,t){angular.module("Common").directive("scrollHandler",["$parse",function(e){return{restrict:"A",link:function(t,n,a){t.$on("scroll::scroll",function(){e(a.scrollHandler)(t)})}}}])},function(e,t){angular.module("Common").directive("resize",["$window",function(e){return{link:function(t){angular.element(e).on("resize",function(e){t.$broadcast("resize::resize")})}}}])},function(e,t){angular.module("Common").directive("resizeHandler",["$parse",function(e){return{restrict:"A",link:function(t,n,a){t.$on("resize::resize",function(){e(a.resizeHandler)(t)})}}}])},function(e,t){angular.module("Common").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,n,a){var o=e(a.fileModel).assign;n.bind("change",function(){t.$apply(function(){o(t,n[0].files[0])})})}}}])},function(e,t){angular.module("Common").directive("compileHtml",["$compile",function(e){return function(t,n,a){t.$watch(function(e){return e.$eval(a.compileHtml)},function(a){n.jsp(a),e(n.contents())(t)})}}])},function(e,t){angular.module("Common").directive("zeroPad",["$filter",function(e){return{restrict:"A",link:function(t,n,a,o){o.$formatters.unshift(function(t){return e("numberFixedLength")(t,4)}),o.$parsers.unshift(function(t){return e("numberFixedLength")(t,4)})}}}])},function(e,t,n){(function(e){angular.module("Common").directive("caStickySearchResultsFooter",["$document","$timeout",function(t,n){return{restrict:"A",scope:{eventName:"@caEventName"},link:function(a,o,r,i){var l=angular.element(o[0].querySelector(".search-results-records")),s=angular.element(o[0].querySelector(".search-results-scrollbar")),c=angular.element(s[0].querySelector(".scrollbar")),u=angular.element(o[0].querySelector(".stickied-table-wrapper")),d=angular.element(u[0].querySelector("table")),p=angular.element(o[0].querySelector(".search-results-footer")),m=angular.element(o[0].querySelector(".search-results-records")),h=angular.element(t.find("#center-panel-wrapper")),g=angular.element(t.find("#layout-sidebar"));s.scroll(function(){u.scrollLeft(s.scrollLeft())}),u.scroll(function(){s.scrollLeft(u.scrollLeft())}),a.$on(a.eventName,function(){n(a.update_search_results_footer)}),a.update_search_results_footer=function(){h.height()>=g.height()&&m.offset().top+m.height()>e(window).height()?(p.addClass("fixed").removeClass("static"),p.css("width",l.width()),s.width(u.width()),c.width(d.width()),s.width()<c.width()?u.css("padding-bottom",p.height()-15):u.css("padding-bottom",p.height())):(p.addClass("static").removeClass("fixed"),p.css("width","initial"),u.css("padding-bottom",0))}}}}])}).call(this,n(0))},function(e,t){angular.module("Common").directive("caQuill",["$timeout",function(e){return{restrict:"A",require:"ngModel",replace:!0,templateUrl:"src/common/directives/clinicaid/ca_quill.jsp",link:function(t,n,a,o){var r,i={modules:{toolbar:{container:".wysiwyg-toolbar"},"image-tooltip":!0,"link-tooltip":!0},theme:"snow"},l=a.quill?t.$eval(a.quill):{};angular.extend(i,l),e(function(){r=new Quill(n.children()[1],i),o.$render(),r.on("text-change",function(e,n){var a;a=this.getHTML(),t.$apply(function(){o.$setViewValue(a)})})}),o.$render=function(){angular.isDefined(r)&&e(function(){r.setHTML(o.$viewValue||"")})}}}}])},function(e,t){angular.module("Common").directive("caPagination",["$timeout",function(e){return{restrict:"E",scope:{pagination:"=caModel",change_page_callback:"=caChangePage"},templateUrl:"src/common/directives/clinicaid/ca_pagination.jsp",replace:!0,link:function(t,n,a,o){t.mode="pages",t.change_page=function(e){Juno.Common.Util.exists(e)&&e!=t.pagination.current_page&&e>0&&e<=t.pagination.total_pages&&t.change_page_callback(e)},t.expand_ellipsis=function(){t.go_to_page_num=t.pagination.current_page,t.mode="goto",e(function(){n.find("input").focus().select()})},t.close_ellipsis=function(){t.mode="pages"},t.go_to_page=function(){if(Juno.Common.Util.isIntegerString(t.go_to_page_num)){var e=parseInt(t.go_to_page_num);e<=0?e=1:e>t.pagination.total_pages&&(e=t.pagination.total_pages),t.change_page(e),t.close_ellipsis()}}}}}])},function(e,t,n){(function(e){angular.module("Common").directive("caKeyBindScope",["$rootScope",function(t){return{scope:{identifier:"@caIdentifier",key_combo:"@caKeyCombo",callback_fn:"=caCallbackFn",key_bind_settings:"=caKeyBindSettings"},restrict:"EA",link:function(n,a,o,r){if(null==n.identifier)return console.log("The following ca_key_bind_scope element is missing the required ca-identifier attribute"),void console.log(a);var i=function(t){var n=t.parents("ca-key-bind-scope"),a=[];return e.each(n,function(e,n){try{a.unshift(n.attributes["ca-identifier"].nodeValue)}catch(e){console.log("This ca-key-bind-scope element has an invalid parent: "),console.log(t)}}),a}(a);if(null!=n.key_bind_settings)for(var l in n.key_bind_settings)t.ca_key_binding.bind_key_element(n,a,n.identifier,angular.copy(i),l,n.key_bind_settings[l]);else console.log("No key bind settings set for ca-key-bind-scope directive ("+n.identifier+")")}}}])}).call(this,n(0))},function(e,t){angular.module("Common").directive("caInfoMessages",[function(){return{restrict:"E",scope:{saving:"=?caSavingFlag",errors:"=caErrorsObject",field_value_map:"=?caFieldValueMap",success_message:"@caSuccessMessage",field_value_map_label_key:"@caFieldValueMapLabelKey",display_field_errors:"=?caDisplayFieldErrors",prepend_name_to_field_errors:"=?caPrependNameToFieldErrors",error_link_functions:"=?caErrorLinkFunctions"},templateUrl:"src/common/directives/clinicaid/ca_info_messages.jsp",link:function(e,t,n,a){Juno.Common.Util.exists(e.display_field_errors)&&!1===e.display_field_errors||(e.display_field_errors=!0),Juno.Common.Util.exists(e.prepend_name_to_field_errors)&&!1===e.prepend_name_to_field_errors||(e.prepend_name_to_field_errors=!0),e.get_label=function(t){var n=t;return Juno.Common.Util.exists(e.field_value_map)&&e.field_value_map.hasOwnProperty(t)&&(n=Juno.Common.Util.exists(e.field_value_map_label_key)?e.field_value_map[t][e.field_value_map_label_key]:e.field_value_map[t]),n},e.force_array=function(e){return angular.isArray(e)?e:[e]},e.has_sub_errors=function(e){return!angular.isString(e)&&angular.isObject(e)},e.error_link_has_function=function(t){var n=e.errors.error_links()[t];return e.error_link_functions&&n.js_fn&&angular.isFunction(e.error_link_functions[n.js_fn])},e.execute_error_link_fn=function(t){var n=e.errors.error_links()[t];e.error_link_has_function(t)?e.error_link_functions[n.js_fn](n.uuid):console.log("error link does not have a function!",n)},e.should_display_field_errors=function(){return Juno.Common.Util.exists(e.errors)&&e.errors.has_field_errors()&&e.display_field_errors&&e.errors.display_field_errors}}}}])},function(e,t){angular.module("Common").directive("caFocusField",[function(){return{restrict:"A",replace:!1,priority:100,require:["?^caFieldAlpha","?^caFieldAlphadate","?^caFieldAutocomplete","?^caFieldBoolean","?^caFieldColor","?^caFieldCurrency","?^caFieldDate","?^caFieldDate3","?^caFieldNumber","?^caFieldSelect","?^caFieldText","?^caFieldTime"],link:function(e,t,n,a){for(var o=n.caName,r=!1,i=0;i<a.length;i++)if(a[i]&&a[i].ignore_focus_field()){r=!0;break}if(angular.isDefined(e.form_nav)&&!r){var l=n.caFocusField;e.$watch(l,function(){Juno.Common.Util.exists(o)&&o==e.form_nav.focus_field&&t[0].focus().select()}),e.$on("focusCaFocusField",function(e,n){Juno.Common.Util.exists(o)&&o==n&&t[0].focus().select()})}}}}])},function(e,t){angular.module("Common").directive("caFieldToggle",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);return t.true_text="@caTrueText",t.false_text="@caFalseText",t.true_value="@caTrueValue",t.false_value="@caFalseValue",{restrict:"EAC",scope:t,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_toggle")},replace:!0,link:function(t,n,a,o){e.default_link_function(t,n,a,o)},controller:e.default_controller}}])},function(e,t,n){(function(e){angular.module("Common").directive("caFieldTime",["fieldHelperService","$timeout",function(t,n){var a=angular.copy(t.default_scope);a.minute_step="=caMinuteStep";return{restrict:"EAC",scope:a,templateUrl:function(e,n){return t.resolve_template(n,"src/common/directives/clinicaid/ca_field_time")},replace:!0,link:function(a,o,r,i){a.picker_container=null,a.toggle_widget=function(){a.picker_container.timepicker("showWidget")},n(function(){a.picker_container=e("#input-"+a.name),a.picker_container.timepicker({defaultTime:!1,minuteStep:a.minute_step,icons:{up:"fa fa-chevron-up",down:"fa fa-chevron-down"}})}),t.default_link_function(a,o,r,i)},controller:t.default_controller}}])}).call(this,n(0))},function(e,t){angular.module("Common").directive("caFieldText",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);t.rows="@caRows",t.max_characters="@caMaxCharacters";return{restrict:"EAC",scope:t,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_text")},replace:!0,link:function(t,n,a,o){t.model||(t.model=""),t.$watch("model",function(e,n){Juno.Common.Util.exists(t.model)&&t.model.length>t.max_characters&&(t.error_message="Character limit exceeded. Max allowed: "+t.max_characters)}),e.default_link_function(t,n,a,o)},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldSelect",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);t.options="=caOptions",t.include_empty_option="@caEmptyOption";return{restrict:"EAC",scope:t,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_select")},replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldNumber",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);t.pad_length="@caPadLength";return{restrict:"EAC",scope:t,templateUrl:"src/common/directives/clinicaid/ca_field_number.jsp",replace:!0,link:function(t,n,a,o){t.pad_length||(t.pad_length=0),e.default_link_function(t,n,a,o)},controller:e.default_controller}}])},function(e,t,n){(function(e){angular.module("Common").directive("caFieldDate",["$compile","$timeout","fieldHelperService",function(t,n,a){var o=angular.copy(a.default_scope);o.date_picker_id="@caDatePickerId",o.orientation="@caOrientation",o.use_multi_date="@caUseMultiDate",o.container_id="@caContainerId";return{restrict:"EA",scope:o,replace:!0,templateUrl:function(e,t){return"bare"==t.caTemplate?"src/common/directives/clinicaid/ca_field_date_bare.jsp":"src/common/directives/clinicaid/ca_field_date.jsp"},link:function(o,r,i,l){o.initialization_complete=!1,o.delayed_change_fn=function(){!0===o.initialization_complete&&o.change_fn()},a.merge_title_messages(o),o.datepicker=null,o.is_multi_date=!1,o.CTRL_KEY=17,o.LEFT_SHIFT_KEY=16,o.ctrl_key_down=!1,o.shift_key_down=!1,o.is_visible=!1,o.container=e("body"),o.container_id||(o.container=e("#"+o.container_id));o.create_datepicker=function(){null==o.container_id?o.datepicker.datepicker({multidate:o.is_multi_date,autoclose:!o.is_multi_date,todayHighlight:!0,todayBtn:"linked",clearBtn:!0,toggleActive:o.is_multi_date,orientation:o.orientation,format:"yyyy-mm-dd",showOnFocus:!1,keyboardNavigation:!1}):o.datepicker.datepicker({multidate:o.is_multi_date,autoclose:!o.is_multi_date,todayHighlight:!0,todayBtn:"linked",clearBtn:!0,toggleActive:o.is_multi_date,orientation:o.orientation,format:"yyyy-mm-dd",container:"#"+o.container_id,showOnFocus:!1,keyboardNavigation:!1}),o.datepicker.datepicker().on("show",function(){o.is_visible=!0}),o.datepicker.datepicker().on("hide",function(){o.is_visible=!1})},o.toggle_multi=function(e,t){"true"==o.use_multi_date&&(o.is_multi_date=e||!o.is_multi_date,o.datepicker.datepicker("remove"),o.create_datepicker(),o.datepicker.datepicker("show"),t&&t.length>0&&r.find("input").val(t))},o.key_up=function(e){if("true"==o.use_multi_date){if(!o.is_multi_date){var t=r.find("input").val();-1!=t.search(",")&&o.toggle_multi(!0,t)}e.keyCode==o.CTRL_KEY?(o.close_date_picker(e),o.ctrl_key_down=!1):e.keyCode==o.LEFT_SHIFT_KEY&&(o.close_date_picker(e),o.shift_key_down=!1)}},o.key_down=function(e){if("true"==o.use_multi_date){if(o.ctrl_key_down)return;e.keyCode==o.CTRL_KEY?(o.ctrl_key_down=!0,o.toggle_multi(!0)):e.keyCode==o.LEFT_SHIFT_KEY&&(o.shift_key_down=!0,o.toggle_multi(!0))}},o.on_focus=function(e){o.is_visible||o.open_date_picker(e),o.focus_fn()},o.on_click=function(e){o.is_visible||o.open_date_picker(e)},o.open_date_picker=function(e){var t=r.find("input").val().split(","),n=!1;t&&t.length>1&&(n=!0),o.datepicker.datepicker("setDates",t),"true"==o.use_multi_date&&n!=o.is_multi_date?o.toggle_multi():o.datepicker.datepicker("show")},o.close_date_picker=function(e){o.datepicker.datepicker("hide")},o.focus_fn=function(){angular.isFunction(o.on_focus_fn)&&n(function(){e(r).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?o.on_focus_fn():console.log("ignoring on focus function - element is no longer in focus",o.name)})},o.$watch("focus_field",function(){if(o.focus_field==o.name){var e=r.find("input");n(function(){e.is(":focus")||e.focus(),e.select()})}}),n(function(){var n=i.caDatePickerId;n||(n="ca-date-picker"),o.datepicker=e("#"+n).find("input"),o.create_datepicker(),o.datepicker.on("show",function(n){var a=e(".datepicker.datepicker-dropdown"),r=a.find("tfoot");"true"==o.use_multi_date?r.replaceWith("<tfoot><tr><th style='display: table-cell;' ng-class=\"{active: is_multi_date}\" ng-click='toggle_multi()' colspan='2' class='multi'>Multi</th><th style='display: table-cell;' ng-click='close_date_picker()' colspan='3' class='multi'>Close</th><th style='display: table-cell;' colspan='2' class='clear'>Clear</th></tr>"):r.replaceWith("<tfoot><tr><th style='display: table-cell;' colspan='4' class='today'>Today</th><th style='display: table-cell;' colspan='3' class='clear'>Clear</th></tr>"),r=a.find("tfoot"),t(r.contents())(o),o.initialization_complete=!0})})},controller:a.default_controller}}])}).call(this,n(0))},function(e,t,n){(function(e){angular.module("Common").directive("caFieldDate3",["$timeout","fieldHelperService",function(t,n){var a=angular.copy(n.default_scope);delete a.focus_fn,a.on_focus_fn_year="&caFocusYear",a.on_focus_fn_month="&caFocusMonth",a.on_focus_fn_day="&caFocusDay";var o=function(e,t,n){if(n.field_year="",n.field_month="",n.field_day="",e){var a=e.split("-");angular.isDefined(a[0])&&(n.field_year=a[0]),angular.isDefined(a[1])&&(n.field_month=a[1]),angular.isDefined(a[2])&&(n.field_day=a[2])}},r=function(e,t,n){n.field_year||n.field_month||n.field_day?n.model=n.field_year+"-"+n.field_month+"-"+n.field_day:n.model=null};return{restrict:"E",scope:a,templateUrl:function(e,t){return n.resolve_template(t,"src/common/directives/clinicaid/ca_field_date3")},replace:!0,link:function(a,i,l,s){n.merge_title_messages(a),a.field_year="",a.field_month="",a.field_day="",a.focus_fn_year=function(){angular.isFunction(a.on_focus_fn_year)&&t(function(){e(i).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?a.on_focus_fn_year():console.log("ignoring on focus function - element is no longer in focus",a.name)})},a.focus_fn_month=function(){angular.isFunction(a.on_focus_fn_month)&&t(function(){e(i).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?a.on_focus_fn_month():console.log("ignoring on focus function - element is no longer in focus",a.name)})},a.focus_fn_day=function(){angular.isFunction(a.on_focus_fn_day)&&t(function(){e(i).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?a.on_focus_fn_day():console.log("ignoring on focus function - element is no longer in focus",a.name)})},a.$watch("focus_field",function(t,n,a){a.focus_field==a.name+"[year]"?e(i).find(".ca-field-date3 input").get(0).focus().select():a.focus_field==a.name+"[month]"?e(i).find(".ca-field-date3 input").get(1).focus().select():a.focus_field==a.name+"[day]"&&e(i).find(".ca-field-date3 input").get(2).focus().select()}),a.$on("focusCaFocusField",function(t,n){Juno.Common.Util.exists(a.name)&&a.name==n&&e(i).find(".ca-field-date3 input").get(0).focus().select()}),a.$watch("model",o),a.$watch("field_year",r),a.$watch("field_month",r),a.$watch("field_day",r)},controller:n.default_controller}}])}).call(this,n(0))},function(e,t){angular.module("Common").directive("caFieldCurrency",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:"src/common/directives/clinicaid/ca_field_currency.jsp",replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldCurrencyFilter",["$filter",function(e){return{require:"ngModel",restrict:"EAC",link:function(t,n,a,o){o.$parsers.push(function(e){null==e&&(e="0");var t=e.replace(/[$,]/g,"");""==t.trim()&&(t="0");var n=parseFloat(t).toFixed(4);return isNaN(n)&&(n=null),n}),o.$formatters.unshift(function(t){return null==t?null:e("myCurrencyFilter")(t)})}}}])},function(e,t){angular.module("Common").directive("caFieldColor",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:"src/common/directives/clinicaid/ca_field_color.jsp",replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldButtonGroup",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);return t.field_settings="=caFieldSettings",t.field_default="=caFieldDefault",{restrict:"EAC",scope:t,templateUrl:"src/common/directives/clinicaid/ca_field_button_group.jsp",replace:!0,link:function(t,n,a,o){e.default_link_function(t,n,a,o),t.selected_values=[t.field_default],t.is_selected=function(e){return-1!=t.selected_values.indexOf(e)},t.toggle_selected=function(e){var n=t.selected_values.indexOf(e);-1==n?t.selected_values.push(e):t.selected_values.splice(n,1),t.model=t.selected_values.join(",")}},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldBoolean",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_boolean")},replace:!0,link:function(t,n,a,o){Juno.Common.Util.exists(t.model)||(t.model=!1),e.default_link_function(t,n,a,o)},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldAutocomplete",["$q","globalStateService","$timeout","fieldHelperService","autoCompleteService","resultsService","focusService",function(e,t,n,a,o,r,i){var l=["yes_no_boolean","gender","schedule","schedule_type","schedule_template","schedule_event_status","user_roles","user_type","province","country","custom_tax","alberta_location_code","alberta_default_time_role_modifier","service_modifier","ontario_office_code","ontario_service_location_indicator","bc_service_location_code","bc_referral_code","sask_clinic","sask_oop_province","sask_mode","sask_location_of_service","sask_location_of_service_short","sask_corporation_indicator","sask_submission_type","sask_submission_file","provider"],s=angular.copy(a.default_scope);s.placeholder="@caPlaceholder",s.input_group_class="@caInputGroupClass",s.autocomplete_type="@caAutocompleteType",s.params="=caParams",s.params_fn="&caParamsFn",s.on_select_fn="&caOnSelect",s.on_select_data="=caOnSelectData",s.on_clear_fn="&caClear",s.on_clear_data="=caClearData",s.on_create_fn="&caCreate",s.create_if="=caCreateIf",s.on_modify_fn="&caModify",s.modify_if="=caModifyIf",s.create_on_not_found="=?caCreateOnNotFound",s.editable="=?caEditable",s.ca_exclude_list="=caExcludeList";return{restrict:"E",scope:s,templateUrl:function(e,t){return a.resolve_template(t,"code/common/directives/ca_field_autocomplete")},replace:!0,link:function(t,n,r,s){t.autocomplete=o,t.search_field=null,angular.isDefined(t.model)||(t.model=null),Juno.Common.Util.exists(t.create_on_not_found)||(t.create_on_not_found=!1),Juno.Common.Util.exists(t.editable)||(t.editable=!1),-1!=Object.keys(t.autocomplete.dao_map).indexOf(t.autocomplete_type)||-1!=Object.keys(Clinicaid.Model.GenericRef.REF_DEFINITIONS).indexOf(t.autocomplete_type)?(t.autocomplete_min_length=-1!=l.indexOf(t.autocomplete_type)?0:1,t.input_placeholder=t.placeholder,angular.isDefined(t.input_placeholder)||(t.input_placeholder="Search..."),t.clear_autocomplete_search=function(){t.search_field=null},t.clear_autocomplete_model=function(e){t.model=null,angular.isFunction(t.on_clear_fn())&&t.on_clear_fn()(t.on_clear_data),e&&i.element(n.find("input"))},t.on_select=function(e,n,a,o){t.model=e,t.change_fn(),angular.isFunction(t.on_select_fn())&&t.on_select_fn()(e,n,a,o,t.on_select_data)},t.create_on_not_found_fn=function(e){Juno.Common.Util.exists(e)&&t.autocomplete.create_on_not_found(e,t.autocomplete_type,!0).then(function(e){t.on_select(e.data,e.data,null,null,t.on_select_data),angular.isFunction(t.change_fn)&&t.change_fn()},function(e){console.log("error:",e)})},t.on_change=function(){if(t.editable){var e=t.autocomplete.build_model_object(t.autocomplete_type,t.search_field);t.on_select(e,e,null,null,t.on_select_data),t.create_on_not_found&&t.create_on_not_found_fn(e)}else t.clear_autocomplete_model()},t.on_blur=function(){null==t.model&&(t.clear_autocomplete_model(),t.clear_autocomplete_search(),Juno.Common.Util.exists(t.model_on_focus)&&angular.isFunction(t.change_fn)&&t.change_fn()),angular.isFunction(t.blur_fn)&&t.blur_fn()},t.on_focus=function(){t.model_on_focus=angular.copy(t.model),angular.isFunction(t.focus_fn)&&t.focus_fn()},t.on_create=null,angular.isFunction(t.on_create_fn())&&(t.on_create=function(){t.on_create_fn()()}),t.on_modify=null,angular.isFunction(t.on_modify_fn())&&(t.on_modify=function(){t.on_modify_fn()()}),t.show_modify_if=void 0===t.modify_if||t.modify_if,t.autocomplete_items=function(n){var a=e.defer(),r=t.params?t.params:{};if(angular.isFunction(t.params_fn)){var i=t.params_fn();angular.isFunction(i)&&(i=i()),angular.extend(r,i)}return o.get_items(t.autocomplete_type,n,r).then(function(e){var n=e.data;Juno.Common.Util.exists(t.ca_exclude_list)&&(n=t.prune_items(n)),a.resolve(n)},function(e){a.reject(e)}),a.promise},t.prune_items=function(e){for(var n=[],a=0;a<e.length;a++){for(var o=!1,r=0;r<t.ca_exclude_list.length;r++){var i=t.ca_exclude_list[r];"string"==typeof i?e[a].data[e[a].value_field]==i&&(o=!0):e[a].data[e[a].value_field]==i.data[t.ca_exclude_list[r].value_field]&&(o=!0)}o||n.push(e[a])}return n},t.autocomplete_input_formatter=function(e){return null!=e?e.autocomplete_input_formatted:null},t.show_create=function(){return t.on_create&&!t.model&&(void 0===t.create_if||t.create_if)},t.show_modify=function(){return t.on_modify&&t.model&&!t.model.dummy_record&&(void 0===t.modify_if||t.modify_if)},t.show_buttons=function(){return!t.disabled&&(t.model||t.show_create())},t.$watch("model",function(e,n){t.search_field=t.model}),a.default_link_function(t,n,r,s)):console.log("invalid autocomplete type:",t.autocomplete_type,"valid values: (",Object.keys(t.autocomplete.dao_map),Object.keys(Clinicaid.Model.GenericRef.REF_DEFINITIONS))},controller:a.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldAlpha",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_alpha")},replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t,n){(function(e){angular.module("Common").directive("caFieldAlphadate",["fieldHelperService",function(t){var n=angular.copy(t.default_scope);n.placeholder="@caPlaceholder";return{restrict:"EAC",scope:n,templateUrl:function(e,n){return t.resolve_template(n,"src/common/directives/clinicaid/ca_field_alphadate")},replace:!0,link:function(n,a,o,r){n.input_placeholder=n.placeholder,angular.isDefined(n.input_placeholder)||(n.input_placeholder="yyyy-mm-dd"),n.on_blur=function(){var t=e(n.model,["YYYY-MM-DD","YYYYMMDD"],!0);t.isValid()?n.model=t.format("YYYY-MM-DD"):n.model=null},t.default_link_function(n,a,o,r)},controller:t.default_controller}}])}).call(this,n(4))},function(e,t){angular.module("Common.Directives").directive("draggable",[function(){return console.log("DRAGGABLE DIRECTIVE LOADED"),{restrict:"A",link:function(e,t,n){t.draggable({axis:"x",containment:"#main-body"})}}}])},function(e,t,n){(function(e){n(57),angular.module("Common.Directives").directive("resizable",[function(){return console.log("RESIZABLE DIRECTIVE LOADED"),{restrict:"A",scope:{callback:"&onResize"},link:function(t,n,a){console.log("RESIZABLE DIRECTIVE HEIGHT ",e(".note-editor-textarea").height()),n.resizable({handles:"n, nw, ne",minHeight:250,minWidth:510,maxWidth:window.innerWidth,maxHeight:window.innerHeight/1.5}),n.on("resizestop",function(e,n){t.callback&&t.callback()}),n.on("resize",function(){e(".note-editor-textarea").css("height",n.height()-145-e(".note-editor-issues").height())}),t.$on("noteIssueAdded",function(){var t=e("#note-editor").height()+33;e("#note-editor").height(t)}),t.$on("noteIssueRemoved",function(){var t=e("#note-editor").height()-33;e("#note-editor").height(t)})}}}])}).call(this,n(0))},function(e,t,n){"use strict";angular.module("Common.Directives").directive("junoDatepickerPopup",[function(){var e={model:"=junoModel",placeholder:"@",showIcon:"=",disableInput:"="};return{restrict:"E",scope:e,templateUrl:function(e,t){return"src/common/directives/datepickerPopup"+t.type+".jsp"},replace:!0,link:function(e,t,n,a){e.format="yyyy-MM-dd",e.dateOptions={showWeeks:!1},e.opened=!1,e.openDatepicker=function(){e.opened=!0}}}}])},function(e,t,n){"use strict";angular.module("Common.Directives").directive("junoPatientTypeahead",["$q","typeaheadHelper","demographicsService",function(e,t,n){return{restrict:"E",scope:t.defaultTypeaheadScope(),templateUrl:"src/common/directives/typeahead.jsp",replace:!0,link:function(a,o,r,i){t.initTypeahead(a),a.forceSelection=!0,a.findMatches=function(t){var a=e.defer(),o={type:"Name",term:t,active:!0,integrator:!1,outofdomain:!0};return n.search(o,0,25).then(function(e){a.resolve(e.content),console.log("dataa",e)},function(){a.reject()}),a.promise},a.formatMatchSelection=function(e){return e.lastName+", "+e.firstName},a.typeaheadLabel=function(e){return a.formatMatchSelection(e)}}}}])},function(e,t,n){"use strict";angular.module("Common.Directives").directive("junoPatientSearchTypeahead",["$q","typeaheadHelper","demographicsService",function(e,t,n){return{restrict:"E",scope:t.defaultTypeaheadScope(),templateUrl:"src/common/directives/typeahead.jsp",replace:!0,link:function(a,o,r,i){t.initTypeahead(a),a.optionsTemplateUrl="src/common/directives/patientSearchTypeaheadOption.jsp",a.findMatches=function(t){var a=e.defer();return n.quickSearch(t).then(function(e){var n=e.content;e.total>10&&n.push({moreResults:!0,total:e.total,searchQuery:t}),a.resolve(n)},function(){a.reject()}),a.promise},a.formatMatchSelection=function(e){return e.moreResults?null:e.lastName+", "+e.firstName}}}}])},function(e,t,n){"use strict";angular.module("Common.Directives").service("typeaheadHelper",["$timeout",function(e){var t={defaultTypeaheadScope:function(){var e={model:"=junoModel",placeholder:"@junoPlaceholder",onSearchFn:"&junoOnSearchFn",onAddFn:"&junoOnAddFn",searchButtonTitle:"@junoSearchButtonTitle",addButtonTitle:"@junoAddButtonTitle"};return e},initTypeahead:function(t){t.findMatches=function(e){console.log("findMatches function must be defined by the typeahead implementation")},t.formatMatchSelection=function(e){console.log("formatMatch function must be defined by the typeahead implementation")},t.optionsTemplateUrl=null,t.forceSelection=!1,t.searchField=null,t.typeaheadModelOptions={debounce:{default:250,blur:250}},angular.isDefined(t.model)||(t.model=null),t.autocompleteMinLength=1,t.hasButtons=function(){return t.hasSearchButton()||t.hasAddButton()},t.hasSearchButton=function(){return angular.isFunction(t.onAddFn())},t.hasAddButton=function(){return angular.isFunction(t.onAddFn())},t.hasTemplateUrl=function(){return Juno.Common.Util.exists(t.optionsTemplateUrl)},t.hasForceSelectionEnabled=function(){return Juno.Common.Util.exists(t.forceSelection)&&t.forceSelection},t.formatMatch=function(e){return Juno.Common.Util.exists(e)?t.isDummySelection(e)?e.searchQuery:t.formatMatchSelection(e):null},t.onSelect=function(e,n,a,o){console.log("typeaheadHelper::onSelect - setting model",e),t.model=e},t.onBlur=function(){t.hasForceSelectionEnabled()&&angular.isString(t.searchField)&&(console.log("typeaheadHelper::onBlur - setting model to null (forceSelectionEnabled)"),t.model=null)},t.onChange=function(){t.hasForceSelectionEnabled()||(console.log("typeaheadHelper::onChange - setting model (isTypeaheadSearchQuery)"),t.onSelect(t.createDummySelection()))},t.onSearch=function(){e(function(){angular.isFunction(t.onSearchFn())&&t.onSearchFn()(t.model)})},t.onAdd=function(){e(function(){angular.isFunction(t.onAddFn())&&t.onAddFn()(t.model)})},t.createDummySelection=function(){return{isTypeaheadSearchQuery:!0,searchQuery:t.searchField}},t.isDummySelection=function(e){return Juno.Common.Util.exists(e)&&e.isTypeaheadSearchQuery},t.$watch("model",function(){t.searchField=t.model})}};return t}])},function(e,t,n){"use strict";angular.module("Common.Directives",["Common.Services"])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("startFrom",[function(){return function(e,t){return t=+t,e}}])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("offset",[function(){return function(e,t){return null===e?0:(t=parseInt(t,10),e.slice(t))}}])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("cut",[function(){return function(e,t,n,a){if(!e)return"";if(!(n=parseInt(n,10)))return e;if(e.length<=n)return e;if(e=e.substr(0,n),t){var o=e.lastIndexOf(" ");-1!==o&&(e=e.substr(0,o))}return e+(a||" ")}}])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("age",[function(){return function(e){return null!==e&&null!==e.years?e.years<1&&e.months<1?e.days+"d":e.years<2?e.months+"m":e.years+" y":""}}])},function(e,t,n){"use strict";angular.module("Common.Filters",[])},function(e,t,n){"use strict";angular.module("Common.Services").service("referralDoctorsService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/referralDoctors/",searchReferralDoctors:function(a,o,r,i){var l=e.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={searchName:a,searchRefNo:o,page:r,perPage:i},t.get(n.apiPath,s).then(function(e){l.resolve(e.data)},function(e){console.log("ReferralDoctorsService::searchReferralDoctors error",e),l.reject("An error occurred while searching ReferralDoctors")}),l.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("specialistsService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/specialists/",searchSpecialists:function(a,o,r,i){var l=e.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={searchName:a,searchRefNo:o,page:r,perPage:i},console.log("params",s.params),t.get(n.apiPath,s).then(function(e){l.resolve(e.data)},function(e){console.log("SpecialistsService::searchSpecialists error",e),l.reject("An error occurred while searching Specialists")}),l.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("uxService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/recordUX",menu:function(a){var o=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(a)+"/recordMenu").then(function(e){o.resolve(e.data)},function(e){console.log("uxService::menu error",e),o.reject("An error occurred while fetching menu")}),o.promise},searchTemplates:function(a,o,r){var i=t.defer();return e.post(n.apiPath+"/searchTemplates?startIndex="+encodeURIComponent(o)+"&itemsToReturn="+encodeURIComponent(r),a).then(function(e){i.resolve(e.data)},function(e){console.log("uxService::searchTemplates error",e),i.reject("An error occurred while searching templates")}),i.promise},getTemplate:function(a){var o=t.defer();return e.post(n.apiPath+"/template",a).then(function(e){o.resolve(e.data)},function(e){console.log("uxService::getTemplate error",e),o.reject("An error occurred while fetching template")}),o.promise},getDisplayProperties:function(){var a=t.defer();return e.get(n.apiPath+"/properties").then(function(e){a.resolve(e.data)},function(e){console.log("uxService:getDisplayProperties error",e),a.reject("An error occurred while fetching display properties.")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("reportByTemplateService",["$http","$q","junoHttp",function(e,t,n){var a={apiPath:"../ws/rs",isK2AInit:function(){var n=t.defer();return e({url:a.apiPath+"/reportByTemplate/K2AActive",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){n.resolve(e.data)},function(e){console.log("reportByTemplateService::isK2AInit error",e),n.reject("An error occurred while fetching k2a content")}),n.promise},getAllK2AReports:function(){var e=t.defer(),o=Juno.Common.ServiceHelper.configHeaders();return n.get(a.apiPath+"/reportByTemplate/allReports",o).then(function(t){e.resolve(t.data)},function(t){console.log("reportByTemplateService::getAllK2AReports error",t),e.reject("An error occurred while fetching k2a reports")}),e.promise},getK2AReportById:function(n){var o=t.defer();return e({url:a.apiPath+"/reportByTemplate/getReportById/"+encodeURIComponent(n),method:"POST",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("reportByTemplateService::getK2AReportById error",e),o.reject("An error occurred while fetching k2a report")}),o.promise},getK2AUrl:function(){var e=t.defer(),o=Juno.Common.ServiceHelper.configHeaders();return n.get(a.apiPath+"/reportByTemplate/K2AUrl/",o).then(function(t){e.resolve(t.data)},function(t){console.log("reportByTemplateService::getK2AUrl error",t),e.reject("An error occurred while fetching k2a url")}),e.promise}};return a}])},function(e,t,n){"use strict";angular.module("Common.Services").service("ticklerService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/tickler",setCompleted:function(a){var o=t.defer();return e({url:n.apiPath+"/complete",method:"POST",data:JSON.stringify({ticklers:a}),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("ticklerService::setCompleted error",e),o.reject("An error occurred while setting ticklers to completed status")}),o.promise},setDeleted:function(a){var o=t.defer();return e({url:n.apiPath+"/delete",method:"POST",data:JSON.stringify({ticklers:a}),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("ticklerService::setDeleted error",e),o.reject("An error occurred while setting ticklers to deleted status")}),o.promise},search:function(a,o,r){var i=t.defer();return e({url:n.apiPath+"/search?startIndex="+encodeURIComponent(o)+"&limit="+encodeURIComponent(r),method:"POST",data:JSON.stringify(a),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){i.resolve(e.data)},function(e){console.log("ticklerService::search error",e),i.reject("An error occurred while searching ticklers")}),i.promise},update:function(a){var o=t.defer();return e({url:n.apiPath+"/update",method:"POST",data:JSON.stringify(a),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("ticklerService::update error",e),o.reject("An error occurred while updating tickler")}),o.promise},getTextSuggestions:function(){var a=t.defer();return e({url:n.apiPath+"/textSuggestions",method:"GET"}).then(function(e){a.resolve(e.data)},function(e){console.log("ticklerService::getTextSuggestions error",e),a.reject("An error occurred while getting tickler text suggestions")}),a.promise},add:function(a){var o=t.defer();return e({url:n.apiPath+"/add",method:"POST",data:JSON.stringify(a),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("ticklerService::add error",e),o.reject("An error occurred while saving tickler")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("summaryService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/recordUX",getSummaryHeaders:function(a,o){var r=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(a)+"/summary/"+o).then(function(e){r.resolve(e.data)},function(e){console.log("summaryService::getSummaryHeaders error",e),r.reject("An error occurred while fetching summary headers")}),r.promise},getFullSummary:function(a,o){var r=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(a)+"/fullSummary/"+o).then(function(e){r.resolve(e.data)},function(e){console.log("summaryService::getFullSummary error",e),r.reject("An error occurred while fetching full summary")}),r.promise},getFamilyHistory:function(a){var o=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(a)+"/getFamilyHistory").then(function(e){o.resolve(e.data)},function(e){console.log("summaryService::getFamilyHistory error",e),o.reject("An error occurred while fetching family history")}),o.promise},getMedicalHistory:function(a){var o=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(a)+"/getMedicalHistory").then(function(e){o.resolve(e.data)},function(e){console.log("summaryService::getMedicalHistory error",e),o.reject("An error occurred while fetching medical history")}),o.promise},getSocialHistory:function(a){var o=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(a)+"/getSocialHistory").then(function(e){o.resolve(e.data)},function(e){console.log("summaryService::getSocialHistory error",e),o.reject("An error occurred while fetching social history")}),o.promise},getOngoingConcerns:function(a){var o=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(a)+"/getOngoingConcerns").then(function(e){o.resolve(e.data)},function(e){console.log("summaryService::getOngoingConcerns error",e),o.reject("An error occurred while fetching ongoing concerns")}),o.promise},getOtherMeds:function(a){var o=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(a)+"/getOtherMeds").then(function(e){o.resolve(e.data)},function(e){console.log("summaryService::getOtherMeds error",e),o.reject("An error occurred while fetching other meds")}),o.promise},getReminders:function(a){var o=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(a)+"/getReminders").then(function(e){o.resolve(e.data)},function(e){console.log("summaryService::getReminders error",e),o.reject("An error occurred while fetching reminders")}),o.promise},getRiskFactors:function(a){var o=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(a)+"/getRiskFactors").then(function(e){o.resolve(e.data)},function(e){console.log("summaryService::getRiskFactors error",e),o.reject("An error occurred while fetching risk factors")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("staticDataService",[function(){var e={getGenders:function(){var e=[];return e.push({value:"M",label:"Male"}),e.push({value:"F",label:"Female"}),e.push({value:"T",label:"Transgendered"}),e.push({value:"O",label:"Other"}),e.push({value:"U",label:"Undefined"}),e},getTitles:function(){var e=[];return e.push({value:"MISS",label:"MISS"}),e.push({value:"MRS",label:"MRS"}),e.push({value:"MS",label:"MS"}),e.push({value:"MR",label:"MR"}),e.push({value:"MSSR",label:"MSSR"}),e.push({value:"DR",label:"DR"}),e.push({value:"PROF",label:"PROF"}),e.push({value:"REEVE",label:"REEVE"}),e.push({value:"REV",label:"REV"}),e.push({value:"RT_HON",label:"RT_HON"}),e.push({value:"SEN",label:"SEN"}),e.push({value:"SGT",label:"SGT"}),e.push({value:"SR",label:"SR"}),e},getProvinces:function(){var e=[];return e.push({value:"AB",label:"AB-Alberta"}),e.push({value:"BC",label:"BC-British Columbia"}),e.push({value:"MB",label:"MB-Manitoba"}),e.push({value:"NB",label:"NB-New Brunswick"}),e.push({value:"NL",label:"NL-Newfoundland Labrador"}),e.push({value:"NT",label:"NT-Northwest Territory"}),e.push({value:"NS",label:"NS-Nova Scotia"}),e.push({value:"NU",label:"NU-Nunavut"}),e.push({value:"ON",label:"ON-Ontario"}),e.push({value:"PE",label:"PE-Prince Edward Island"}),e.push({value:"QC",label:"QC-Quebec"}),e.push({value:"SK",label:"SK-Saskatchewan"}),e.push({value:"YT",label:"YT-Yukon"}),e.push({value:"US",label:"US resident"}),e.push({value:"US-AK",label:"US-AK-Alaska"}),e.push({value:"US-AL",label:"US-AL-Alabama"}),e.push({value:"US-AR",label:"US-AR-Arkansas"}),e.push({value:"US-AZ",label:"US-AZ-Arizona"}),e.push({value:"US-CA",label:"US-CA-California"}),e.push({value:"US-CO",label:"US-CO-Colorado"}),e.push({value:"US-CT",label:"US-CT-Connecticut"}),e.push({value:"US-CZ",label:"US-CZ-Canal Zone"}),e.push({value:"US-DC",label:"US-DC-District Of Columbia"}),e.push({value:"US-DE",label:"US-DE-Delaware"}),e.push({value:"US-FL",label:"US-FL-Florida"}),e.push({value:"US-GA",label:"US-GA-Georgia"}),e.push({value:"US-GU",label:"US-GU-Guam"}),e.push({value:"US-HI",label:"US-HI-Hawaii"}),e.push({value:"US-IA",label:"US-IA-Iowa"}),e.push({value:"US-ID",label:"US-ID-Idaho"}),e.push({value:"US-IL",label:"US-IL-Illinois"}),e.push({value:"US-IN",label:"US-IN-Indiana"}),e.push({value:"US-KS",label:"US-KS-Kansas"}),e.push({value:"US-KY",label:"US-KY-Kentucky"}),e.push({value:"US-LA",label:"US-LA-Louisiana"}),e.push({value:"US-MA",label:"US-MA-Massachusetts"}),e.push({value:"US-MD",label:"US-MD-Maryland"}),e.push({value:"US-ME",label:"US-ME-Maine"}),e.push({value:"US-MI",label:"US-MI-Michigan"}),e.push({value:"US-MN",label:"US-MN-Minnesota"}),e.push({value:"US-MO",label:"US-MO-Missouri"}),e.push({value:"US-MS",label:"US-MS-Mississippi"}),e.push({value:"US-MT",label:"US-MT-Montana"}),e.push({value:"US-NC",label:"US-NC-North Carolina"}),e.push({value:"US-ND",label:"US-ND-North Dakota"}),e.push({value:"US-NE",label:"US-NE-Nebraska"}),e.push({value:"US-NH",label:"US-NH-New Hampshire"}),e.push({value:"US-NJ",label:"US-NJ-New Jersey"}),e.push({value:"US-NM",label:"US-NM-New Mexico"}),e.push({value:"US-NU",label:"US-NU-Nunavut"}),e.push({value:"US-NV",label:"US-NV-Nevada"}),e.push({value:"US-NY",label:"US-NY-New York"}),e.push({value:"US-OH",label:"US-OH-Ohio"}),e.push({value:"US-OK",label:"US-OK-Oklahoma"}),e.push({value:"US-OR",label:"US-OR-Oregon"}),e.push({value:"US-PA",label:"US-PA-Pennsylvania"}),e.push({value:"US-PR",label:"US-PR-Puerto Rico"}),e.push({value:"US-RI",label:"US-RI-Rhode Island"}),e.push({value:"US-SC",label:"US-SC-South Carolina"}),e.push({value:"US-SD",label:"US-SD-South Dakota"}),e.push({value:"US-TN",label:"US-TN-Tennessee"}),e.push({value:"US-TX",label:"US-TX-Texas"}),e.push({value:"US-UT",label:"US-UT-Utah"}),e.push({value:"US-VA",label:"US-VA-Virginia"}),e.push({value:"US-VI",label:"US-VI-Virgin Islands"}),e.push({value:"US-VT",label:"US-VT-Vermont"}),e.push({value:"US-WA",label:"US-WA-Washington"}),e.push({value:"US-WI",label:"US-WI-Wisconsin"}),e.push({value:"US-WV",label:"US-WV-West Virginia"}),e.push({value:"US-WY",label:"US-WY-Wyoming"}),e.push({value:"OT",label:"Other"}),e},getCountries:function(){var e=[];return e.push({value:"AF",label:"AFGHANISTAN"}),e.push({value:"AX",label:"ALAND ISLANDS"}),e.push({value:"AL",label:"ALBANIA"}),e.push({value:"DZ",label:"ALGERIA"}),e.push({value:"AS",label:"AMERICAN SAMOA"}),e.push({value:"AD",label:"ANDORRA"}),e.push({value:"AO",label:"ANGOLA"}),e.push({value:"AI",label:"ANGUILLA"}),e.push({value:"AQ",label:"ANTARCTICA"}),e.push({value:"AG",label:"ANTIGUA AND BARBUDA"}),e.push({value:"AR",label:"ARGENTINA"}),e.push({value:"AM",label:"ARMENIA"}),e.push({value:"AW",label:"ARUBA"}),e.push({value:"AU",label:"AUSTRALIA"}),e.push({value:"AT",label:"AUSTRIA"}),e.push({value:"AZ",label:"AZERBAIJAN"}),e.push({value:"BS",label:"BAHAMAS"}),e.push({value:"BH",label:"BAHRAIN"}),e.push({value:"BD",label:"BANGLADESH"}),e.push({value:"BB",label:"BARBADOS"}),e.push({value:"BY",label:"BELARUS"}),e.push({value:"BE",label:"BELGIUM"}),e.push({value:"BZ",label:"BELIZE"}),e.push({value:"BJ",label:"BENIN"}),e.push({value:"BM",label:"BERMUDA"}),e.push({value:"BT",label:"BHUTAN"}),e.push({value:"BO",label:"BOLIVIA"}),e.push({value:"BA",label:"BOSNIA AND HERZEGOVINA"}),e.push({value:"BW",label:"BOTSWANA"}),e.push({value:"BV",label:"BOUVET ISLAND"}),e.push({value:"BR",label:"BRAZIL"}),e.push({value:"IO",label:"BRITISH INDIAN OCEAN TERRITORY"}),e.push({value:"BN",label:"BRUNEI DARUSSALAM"}),e.push({value:"BG",label:"BULGARIA"}),e.push({value:"BF",label:"BURKINA FASO"}),e.push({value:"BI",label:"BURUNDI"}),e.push({value:"KH",label:"CAMBODIA"}),e.push({value:"CM",label:"CAMEROON"}),e.push({value:"CA",label:"CANADA"}),e.push({value:"CV",label:"CAPE VERDE"}),e.push({value:"KY",label:"CAYMAN ISLANDS"}),e.push({value:"CF",label:"CENTRAL AFRICAN REPUBLIC"}),e.push({value:"TD",label:"CHAD"}),e.push({value:"CL",label:"CHILE"}),e.push({value:"CN",label:"CHINA"}),e.push({value:"CX",label:"CHRISTMAS ISLAND"}),e.push({value:"CC",label:"COCOS (KEELING) ISLANDS"}),e.push({value:"CO",label:"COLOMBIA"}),e.push({value:"KM",label:"COMOROS"}),e.push({value:"CG",label:"CONGO"}),e.push({value:"CD",label:"CONGO, THE DEMOCRATIC REPUBLIC OF THE"}),e.push({value:"CK",label:"COOK ISLANDS"}),e.push({value:"CR",label:"COSTA RICA"}),e.push({value:"CI",label:"CTE D IVOIRE"}),e.push({value:"HR",label:"CROATIA"}),e.push({value:"CU",label:"CUBA"}),e.push({value:"CY",label:"CYPRUS"}),e.push({value:"CZ",label:"CZECH REPUBLIC"}),e.push({value:"DK",label:"DENMARK"}),e.push({value:"DJ",label:"DJIBOUTI"}),e.push({value:"DM",label:"DOMINICA"}),e.push({value:"DO",label:"DOMINICAN REPUBLIC"}),e.push({value:"EC",label:"ECUADOR"}),e.push({value:"EG",label:"EGYPT"}),e.push({value:"SV",label:"EL SALVADOR"}),e.push({value:"GQ",label:"EQUATORIAL GUINEA"}),e.push({value:"ER",label:"ERITREA"}),e.push({value:"EE",label:"ESTONIA"}),e.push({value:"ET",label:"ETHIOPIA"}),e.push({value:"FK",label:"FALKLAND ISLANDS (MALVINAS)"}),e.push({value:"FO",label:"FAROE ISLANDS"}),e.push({value:"FJ",label:"FIJI"}),e.push({value:"FI",label:"FINLAND"}),e.push({value:"FR",label:"FRANCE"}),e.push({value:"GF",label:"FRENCH GUIANA"}),e.push({value:"PF",label:"FRENCH POLYNESIA"}),e.push({value:"TF",label:"FRENCH SOUTHERN TERRITORIES"}),e.push({value:"GA",label:"GABON"}),e.push({value:"GM",label:"GAMBIA"}),e.push({value:"GE",label:"GEORGIA"}),e.push({value:"DE",label:"GERMANY"}),e.push({value:"GH",label:"GHANA"}),e.push({value:"GI",label:"GIBRALTAR"}),e.push({value:"GR",label:"GREECE"}),e.push({value:"GL",label:"GREENLAND"}),e.push({value:"GD",label:"GRENADA"}),e.push({value:"GP",label:"GUADELOUPE"}),e.push({value:"GU",label:"GUAM"}),e.push({value:"GT",label:"GUATEMALA"}),e.push({value:"GG",label:"GUERNSEY"}),e.push({value:"GN",label:"GUINEA"}),e.push({value:"GW",label:"GUINEA-BISSAU"}),e.push({value:"GY",label:"GUYANA"}),e.push({value:"HT",label:"HAITI"}),e.push({value:"HM",label:"HEARD ISLAND AND MCDONALD ISLANDS"}),e.push({value:"VA",label:"HOLY SEE (VATICAN CITY STATE)"}),e.push({value:"HN",label:"HONDURAS"}),e.push({value:"HK",label:"HONG KONG"}),e.push({value:"HU",label:"HUNGARY"}),e.push({value:"IS",label:"ICELAND"}),e.push({value:"IN",label:"INDIA"}),e.push({value:"ID",label:"INDONESIA"}),e.push({value:"IR",label:"IRAN, ISLAMIC REPUBLIC OF"}),e.push({value:"IQ",label:"IRAQ"}),e.push({value:"IE",label:"IRELAND"}),e.push({value:"IM",label:"ISLE OF MAN"}),e.push({value:"IL",label:"ISRAEL"}),e.push({value:"IT",label:"ITALY"}),e.push({value:"JM",label:"JAMAICA"}),e.push({value:"JP",label:"JAPAN"}),e.push({value:"JE",label:"JERSEY"}),e.push({value:"JO",label:"JORDAN"}),e.push({value:"KZ",label:"KAZAKHSTAN"}),e.push({value:"KE",label:"KENYA"}),e.push({value:"KI",label:"KIRIBATI"}),e.push({value:"KP",label:"KOREA, DEMOCRATIC PEOPLES REPUBLIC OF"}),e.push({value:"KR",label:"KOREA, REPUBLIC OF"}),e.push({value:"KW",label:"KUWAIT"}),e.push({value:"KG",label:"KYRGYZSTAN"}),e.push({value:"LA",label:"LAO PEOPLES DEMOCRATIC REPUBLIC"}),e.push({value:"LV",label:"LATVIA"}),e.push({value:"LB",label:"LEBANON"}),e.push({value:"LS",label:"LESOTHO"}),e.push({value:"LR",label:"LIBERIA"}),e.push({value:"LY",label:"LIBYAN ARAB JAMAHIRIYA"}),e.push({value:"LI",label:"LIECHTENSTEIN"}),e.push({value:"LT",label:"LITHUANIA"}),e.push({value:"LU",label:"LUXEMBOURG"}),e.push({value:"MO",label:"MACAO"}),e.push({value:"MK",label:"MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF"}),e.push({value:"MG",label:"MADAGASCAR"}),e.push({value:"MW",label:"MALAWI"}),e.push({value:"MY",label:"MALAYSIA"}),e.push({value:"MV",label:"MALDIVES"}),e.push({value:"ML",label:"MALI"}),e.push({value:"MT",label:"MALTA"}),e.push({value:"MH",label:"MARSHALL ISLANDS"}),e.push({value:"MQ",label:"MARTINIQUE"}),e.push({value:"MR",label:"MAURITANIA"}),e.push({value:"MU",label:"MAURITIUS"}),e.push({value:"YT",label:"MAYOTTE"}),e.push({value:"MX",label:"MEXICO"}),e.push({value:"FM",label:"MICRONESIA, FEDERATED STATES OF"}),e.push({value:"MD",label:"MOLDOVA"}),e.push({value:"MC",label:"MONACO"}),e.push({value:"MN",label:"MONGOLIA"}),e.push({value:"ME",label:"MONTENEGRO"}),e.push({value:"MS",label:"MONTSERRAT"}),e.push({value:"MA",label:"MOROCCO"}),e.push({value:"MZ",label:"MOZAMBIQUE"}),e.push({value:"MM",label:"MYANMAR"}),e.push({value:"NA",label:"NAMIBIA"}),e.push({value:"NR",label:"NAURU"}),e.push({value:"NP",label:"NEPAL"}),e.push({value:"NL",label:"NETHERLANDS"}),e.push({value:"AN",label:"NETHERLANDS ANTILLES"}),e.push({value:"NC",label:"NEW CALEDONIA"}),e.push({value:"NZ",label:"NEW ZEALAND"}),e.push({value:"NI",label:"NICARAGUA"}),e.push({value:"NE",label:"NIGER"}),e.push({value:"NG",label:"NIGERIA"}),e.push({value:"NU",label:"NIUE"}),e.push({value:"NF",label:"NORFOLK ISLAND"}),e.push({value:"MP",label:"NORTHERN MARIANA ISLANDS"}),e.push({value:"NO",label:"NORWAY"}),e.push({value:"OM",label:"OMAN"}),e.push({value:"PK",label:"PAKISTAN"}),e.push({value:"PW",label:"PALAU"}),e.push({value:"PS",label:"PALESTINIAN TERRITORY, OCCUPIED"}),e.push({value:"PA",label:"PANAMA"}),e.push({value:"PG",label:"PAPUA NEW GUINEA"}),e.push({value:"PY",label:"PARAGUAY"}),e.push({value:"PE",label:"PERU"}),e.push({value:"PH",label:"PHILIPPINES"}),e.push({value:"PN",label:"PITCAIRN"}),e.push({value:"PL",label:"POLAND"}),e.push({value:"PT",label:"PORTUGAL"}),e.push({value:"PR",label:"PUERTO RICO"}),e.push({value:"QA",label:"QATAR"}),e.push({value:"RE",label:"RUNION"}),e.push({value:"RO",label:"ROMANIA"}),e.push({value:"RU",label:"RUSSIAN FEDERATION"}),e.push({value:"RW",label:"RWANDA"}),e.push({value:"BL",label:"SAINT BARTHLEMY"}),e.push({value:"SH",label:"SAINT HELENA"}),e.push({value:"KN",label:"SAINT KITTS AND NEVIS"}),e.push({value:"LC",label:"SAINT LUCIA"}),e.push({value:"MF",label:"SAINT MARTIN"}),e.push({value:"PM",label:"SAINT PIERRE AND MIQUELON"}),e.push({value:"VC",label:"SAINT VINCENT AND THE GRENADINES"}),e.push({value:"WS",label:"SAMOA"}),e.push({value:"SM",label:"SAN MARINO"}),e.push({value:"ST",label:"SAO TOME AND PRINCIPE"}),e.push({value:"SA",label:"SAUDI ARABIA"}),e.push({value:"SN",label:"SENEGAL"}),e.push({value:"RS",label:"SERBIA"}),e.push({value:"SC",label:"SEYCHELLES"}),e.push({value:"SL",label:"SIERRA LEONE"}),e.push({value:"SG",label:"SINGAPORE"}),e.push({value:"SK",label:"SLOVAKIA"}),e.push({value:"SI",label:"SLOVENIA"}),e.push({value:"SB",label:"SOLOMON ISLANDS"}),e.push({value:"SO",label:"SOMALIA"}),e.push({value:"ZA",label:"SOUTH AFRICA"}),e.push({value:"GS",label:"SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS"}),e.push({value:"ES",label:"SPAIN"}),e.push({value:"LK",label:"SRI LANKA"}),e.push({value:"SD",label:"SUDAN"}),e.push({value:"SR",label:"SURINAME"}),e.push({value:"SJ",label:"SVALBARD AND JAN MAYEN"}),e.push({value:"SZ",label:"SWAZILAND"}),e.push({value:"SE",label:"SWEDEN"}),e.push({value:"CH",label:"SWITZERLAND"}),e.push({value:"SY",label:"SYRIAN ARAB REPUBLIC"}),e.push({value:"TW",label:"TAIWAN, PROVINCE OF CHINA"}),e.push({value:"TJ",label:"TAJIKISTAN"}),e.push({value:"TZ",label:"TANZANIA, UNITED REPUBLIC OF"}),e.push({value:"TH",label:"THAILAND"}),e.push({value:"TL",label:"TIMOR-LESTE"}),e.push({value:"TG",label:"TOGO"}),e.push({value:"TK",label:"TOKELAU"}),e.push({value:"TO",label:"TONGA"}),e.push({value:"TT",label:"TRINIDAD AND TOBAGO"}),e.push({value:"TN",label:"TUNISIA"}),e.push({value:"TR",label:"TURKEY"}),e.push({value:"TM",label:"TURKMENISTAN"}),e.push({value:"TC",label:"TURKS AND CAICOS ISLANDS"}),e.push({value:"TV",label:"TUVALU"}),e.push({value:"UG",label:"UGANDA"}),e.push({value:"UA",label:"UKRAINE"}),e.push({value:"AE",label:"UNITED ARAB EMIRATES"}),e.push({value:"GB",label:"UNITED KINGDOM"}),e.push({value:"US",label:"UNITED STATES"}),e.push({value:"UM",label:"UNITED STATES MINOR OUTLYING ISLANDS"}),e.push({value:"UY",label:"URUGUAY"}),e.push({value:"UZ",label:"UZBEKISTAN"}),e.push({value:"VU",label:"VANUATU"}),e.push({value:"VA",label:"VATICAN CITY STATE"}),e.push({value:"VE",label:"VENEZUELA"}),e.push({value:"VN",label:"VIET NAM"}),e.push({value:"VG",label:"VIRGIN ISLANDS, BRITISH"}),e.push({value:"VI",label:"VIRGIN ISLANDS, U.S."}),e.push({value:"WF",label:"WALLIS AND FUTUNA"}),e.push({value:"EH",label:"WESTERN SAHARA"}),e.push({value:"YE",label:"YEMEN"}),e.push({value:"ZM",label:"ZAMBIA"}),e.push({value:"ZW",label:"ZIMBABWE"}),e},getEngFre:function(){var e=[];return e.push({value:"English",label:"English"}),e.push({value:"French",label:"French"}),e.push({value:"Other",label:"Other"}),e},getSpokenLanguages:function(){var e=[];return e.push({value:"English",label:"English"}),e.push({value:"French",label:"French"}),e.push({value:"Abkhazian",label:"Abkhazian"}),e.push({value:"Achinese",label:"Achinese"}),e.push({value:"Acoli",label:"Acoli"}),e.push({value:"Adangme",label:"Adangme"}),e.push({value:"Adyghe",label:"Adyghe"}),e.push({value:"Afar",label:"Afar"}),e.push({value:"Afrihili",label:"Afrihili"}),e.push({value:"Afrikaans",label:"Afrikaans"}),e.push({value:"Afro-Asiatic (Other)",label:"Afro-Asiatic"}),e.push({value:"Ainu",label:"Ainu"}),e.push({value:"Akan",label:"Akan"}),e.push({value:"Akkadian",label:"Akkadian"}),e.push({value:"Albanian",label:"Albanian"}),e.push({value:"Aleut",label:"Aleut"}),e.push({value:"Algonquian Languages",label:"Algonquian Languages"}),e.push({value:"Altaic (Other)",label:"Altaic"}),e.push({value:"Amharic",label:"Amharic"}),e.push({value:"Angika",label:"Angika"}),e.push({value:"Apache Languages",label:"Apache Languages"}),e.push({value:"Arabic",label:"Arabic"}),e.push({value:"Aramaic",label:"Aramaic"}),e.push({value:"Arapaho",label:"Arapaho"}),e.push({value:"Araucanian",label:"Araucanian"}),e.push({value:"Arawak",label:"Arawak"}),e.push({value:"Argonese",label:"Argonese"}),e.push({value:"Armenian",label:"Armenian"}),e.push({value:"Aromanian",label:"Aromanian"}),e.push({value:"Artificial (Other)",label:"Artificial"}),e.push({value:"Assamese",label:"Assamese"}),e.push({value:"Asturian",label:"Asturian"}),e.push({value:"Athapascan Languages",label:"Athapascan Languages"}),e.push({value:"Australian Languages",label:"Australian Languages"}),e.push({value:"Austronesian (Other)",label:"Austronesian"}),e.push({value:"Avaric",label:"Avaric"}),e.push({value:"Avestan",label:"Avestan"}),e.push({value:"Awadhi",label:"Awadhi"}),e.push({value:"Aymara",label:"Aymara"}),e.push({value:"Azerbaijani",label:"Azerbaijani"}),e.push({value:"Balinese",label:"Balinese"}),e.push({value:"Baltic (Other)",label:"Baltic"}),e.push({value:"Baluchi",label:"Baluchi"}),e.push({value:"Bambara",label:"Bambara"}),e.push({value:"Bamileke Languages",label:"Bamileke Languages"}),e.push({value:"Banda",label:"Banda"}),e.push({value:"Bantu (Other)",label:"Bantu"}),e.push({value:"Basa",label:"Basa"}),e.push({value:"Bashkir",label:"Bashkir"}),e.push({value:"Basque",label:"Basque"}),e.push({value:"Batak (Indonesia)",label:"Batak (Indonesia)"}),e.push({value:"Beja",label:"Beja"}),e.push({value:"Belarusian",label:"Belarusian"}),e.push({value:"Bemba",label:"Bemba"}),e.push({value:"Bengali",label:"Bengali"}),e.push({value:"Berber (Other)",label:"Berber"}),e.push({value:"Bhojpuri",label:"Bhojpuri"}),e.push({value:"Bihari",label:"Bihari"}),e.push({value:"Bikol",label:"Bikol"}),e.push({value:"Bini",label:"Bini"}),e.push({value:"Bislama",label:"Bislama"}),e.push({value:"Blin",label:"Blin"}),e.push({value:"Bokmal, Norwegian",label:"Bokmal, Norwegian"}),e.push({value:"Bosnian",label:"Bosnian"}),e.push({value:"Braj",label:"Braj"}),e.push({value:"Breton",label:"Breton"}),e.push({value:"Buginese",label:"Buginese"}),e.push({value:"Bulgarian",label:"Bulgarian"}),e.push({value:"Buriat",label:"Buriat"}),e.push({value:"Burmese",label:"Burmese"}),e.push({value:"Caddo",label:"Caddo"}),e.push({value:"Cantonese",label:"Cantonese"}),e.push({value:"Carib",label:"Carib"}),e.push({value:"Catalan",label:"Catalan"}),e.push({value:"Caucasian (Other)",label:"Caucasian"}),e.push({value:"Cebuano",label:"Cebuano"}),e.push({value:"Celtic (Other)",label:"Celtic"}),e.push({value:"Central American Indian (Other)",label:"Central American Indian"}),e.push({value:"Chagatai",label:"Chagatai"}),e.push({value:"Chamic Languages",label:"Chamic Languages"}),e.push({value:"Chamorro",label:"Chamorro"}),e.push({value:"Chechen",label:"Chechen"}),e.push({value:"Cherokee",label:"Cherokee"}),e.push({value:"Cheyenne",label:"Cheyenne"}),e.push({value:"Chibcha",label:"Chibcha"}),e.push({value:"Chichewa",label:"Chichewa"}),e.push({value:"Chinese",label:"Chinese"}),e.push({value:"Chinook Jargon",label:"Chinook Jargon"}),e.push({value:"Chipewyan",label:"Chipewyan"}),e.push({value:"Choctaw",label:"Choctaw"}),e.push({value:"Chuukese",label:"Chuukese"}),e.push({value:"Chuvash",label:"Chuvash"}),e.push({value:"Classical Nepal Bhasa",label:"Classical Nepal Bhasa"}),e.push({value:"Coptic",label:"Coptic"}),e.push({value:"Cornish",label:"Cornish"}),e.push({value:"Corsican",label:"Corsican"}),e.push({value:"Cree",label:"Cree"}),e.push({value:"Creek",label:"Creek"}),e.push({value:"Creoles And Pidgins (Other)",label:"Creoles & Pidgins"}),e.push({value:"Creoles And Pidgins, English-Based (Other)",label:"Creoles & Pidgins, ENG-Based"}),e.push({value:"Creoles And Pidgins, French-Based (Other)",label:"Creoles & Pidgins, FRE-Based"}),e.push({value:"Creoles And Pidgins, Portuguese-Based (Other)",label:"Creoles & Pidgins, POR-Based"}),e.push({value:"Crimean Tatar",label:"Crimean Tatar"}),e.push({value:"Croatian",label:"Croatian"}),e.push({value:"Cushitic (Other)",label:"Cushitic"}),e.push({value:"Czech",label:"Czech"}),e.push({value:"Dakota",label:"Dakota"}),e.push({value:"Danish",label:"Danish"}),e.push({value:"Dargwa",label:"Dargwa"}),e.push({value:"Dayak",label:"Dayak"}),e.push({value:"Delaware",label:"Delaware"}),e.push({value:"Dhivehi",label:"Dhivehi"}),e.push({value:"Dinka",label:"Dinka"}),e.push({value:"Dogri",label:"Dogri"}),e.push({value:"Dogrib",label:"Dogrib"}),e.push({value:"Dravidian (Other)",label:"Dravidian"}),e.push({value:"Duala",label:"Duala"}),e.push({value:"Dutch",label:"Dutch"}),e.push({value:"Dyula",label:"Dyula"}),e.push({value:"Dzongkha",label:"Dzongkha"}),e.push({value:"Eastern Frisian",label:"Eastern Frisian"}),e.push({value:"Efik",label:"Efik"}),e.push({value:"Egyptian (Ancient)",label:"Egyptian (Ancient)"}),e.push({value:"Ekajuk",label:"Ekajuk"}),e.push({value:"Elamite",label:"Elamite"}),e.push({value:"Erzya",label:"Erzya"}),e.push({value:"Esperanto",label:"Esperanto"}),e.push({value:"Estonian",label:"Estonian"}),e.push({value:"Ewe",label:"Ewe"}),e.push({value:"Ewondo",label:"Ewondo"}),e.push({value:"Fang",label:"Fang"}),e.push({value:"Fanti",label:"Fanti"}),e.push({value:"Faroese",label:"Faroese"}),e.push({value:"Fijian",label:"Fijian"}),e.push({value:"Filipino; Pilipino",label:"Filipino; Pilipino"}),e.push({value:"Finnish",label:"Finnish"}),e.push({value:"Finno-Ugrian (Other)",label:"Finno-Ugrian"}),e.push({value:"Fon",label:"Fon"}),e.push({value:"Friulian",label:"Friulian"}),e.push({value:"Fulah",label:"Fulah"}),e.push({value:"Ga",label:"Ga"}),e.push({value:"Gaelic",label:"Gaelic"}),e.push({value:"Gallegan",label:"Gallegan"}),e.push({value:"Ganda",label:"Ganda"}),e.push({value:"Gayo",label:"Gayo"}),e.push({value:"Gbaya",label:"Gbaya"}),e.push({value:"Geez",label:"Geez"}),e.push({value:"Georgian",label:"Georgian"}),e.push({value:"German",label:"German"}),e.push({value:"Germanic (Other)",label:"Germanic"}),e.push({value:"Gikuyu",label:"Gikuyu"}),e.push({value:"Gilbertese",label:"Gilbertese"}),e.push({value:"Gondi",label:"Gondi"}),e.push({value:"Gorontalo",label:"Gorontalo"}),e.push({value:"Gothic",label:"Gothic"}),e.push({value:"Grebo",label:"Grebo"}),e.push({value:"Greek, Modern (1453-)",label:"Greek, Modern (1453-)"}),e.push({value:"Guarani",label:"Guarani"}),e.push({value:"Gujarati",label:"Gujarati"}),e.push({value:"Gwich'in",label:"Gwich'in"}),e.push({value:"Haida",label:"Haida"}),e.push({value:"Haitian Creole",label:"Haitian Creole"}),e.push({value:"Hausa",label:"Hausa"}),e.push({value:"Hawaiian",label:"Hawaiian"}),e.push({value:"Hebrew",label:"Hebrew"}),e.push({value:"Herero",label:"Herero"}),e.push({value:"Hiligaynon",label:"Hiligaynon"}),e.push({value:"Himachali",label:"Himachali"}),e.push({value:"Hindi",label:"Hindi"}),e.push({value:"Hiri Motu",label:"Hiri Motu"}),e.push({value:"Hittite",label:"Hittite"}),e.push({value:"Hmong",label:"Hmong"}),e.push({value:"Hungarian",label:"Hungarian"}),e.push({value:"Hupa",label:"Hupa"}),e.push({value:"Iban",label:"Iban"}),e.push({value:"Icelandic",label:"Icelandic"}),e.push({value:"Ido",label:"Ido"}),e.push({value:"Igbo",label:"Igbo"}),e.push({value:"Ijo",label:"Ijo"}),e.push({value:"Iloko",label:"Iloko"}),e.push({value:"Inari Sami",label:"Inari Sami"}),e.push({value:"Indic (Other)",label:"Indic"}),e.push({value:"Indo-European (Other)",label:"Indo-European"}),e.push({value:"Indonesian",label:"Indonesian"}),e.push({value:"Ingush",label:"Ingush"}),e.push({value:"Interlingua (International Auxiliary Lang. Assoc.)",label:"Interlingua (IALA)"}),e.push({value:"Interlingue",label:"Interlingue"}),e.push({value:"Inuktitut",label:"Inuktitut"}),e.push({value:"Inupiaq",label:"Inupiaq"}),e.push({value:"Iranian (Other)",label:"Iranian"}),e.push({value:"Irish",label:"Irish"}),e.push({value:"Iroquoian Languages",label:"Iroquoian Languages"}),e.push({value:"Italian",label:"Italian"}),e.push({value:"Japanese",label:"Japanese"}),e.push({value:"Javanese",label:"Javanese"}),e.push({value:"Judeo-Arabic",label:"Judeo-Arabic"}),e.push({value:"Judeo-Persian",label:"Judeo-Persian"}),e.push({value:"Kabardian",label:"Kabardian"}),e.push({value:"Kabyle",label:"Kabyle"}),e.push({value:"Kachin",label:"Kachin"}),e.push({value:"Kalaallisut",label:"Kalaallisut"}),e.push({value:"Kalmyk",label:"Kalmyk"}),e.push({value:"Kamba",label:"Kamba"}),e.push({value:"Kannada",label:"Kannada"}),e.push({value:"Kanuri",label:"Kanuri"}),e.push({value:"Kara-Kalpak",label:"Kara-Kalpak"}),e.push({value:"Karachay-Balkar",label:"Karachay-Balkar"}),e.push({value:"Karelian",label:"Karelian"}),e.push({value:"Karen",label:"Karen"}),e.push({value:"Kashmiri",label:"Kashmiri"}),e.push({value:"Kashubian",label:"Kashubian"}),e.push({value:"Kawi",label:"Kawi"}),e.push({value:"Kazakh",label:"Kazakh"}),e.push({value:"Khasi",label:"Khasi"}),e.push({value:"Khmer",label:"Khmer"}),e.push({value:"Khoisan (Other)",label:"Khoisan"}),e.push({value:"Khotanese",label:"Khotanese"}),e.push({value:"Kimbundu",label:"Kimbundu"}),e.push({value:"Kinyarwanda",label:"Kinyarwanda"}),e.push({value:"Kirghiz",label:"Kirghiz"}),e.push({value:"Klingon",label:"Klingon"}),e.push({value:"Komi",label:"Komi"}),e.push({value:"Kongo",label:"Kongo"}),e.push({value:"Konkani",label:"Konkani"}),e.push({value:"Korean",label:"Korean"}),e.push({value:"Kosraean",label:"Kosraean"}),e.push({value:"Kpelle",label:"Kpelle"}),e.push({value:"Kru",label:"Kru"}),e.push({value:"Kumyk",label:"Kumyk"}),e.push({value:"Kurdish",label:"Kurdish"}),e.push({value:"Kurukh",label:"Kurukh"}),e.push({value:"Kutenai",label:"Kutenai"}),e.push({value:"Kwanyama",label:"Kwanyama"}),e.push({value:"Ladino",label:"Ladino"}),e.push({value:"Lahnda",label:"Lahnda"}),e.push({value:"Lamba",label:"Lamba"}),e.push({value:"Lao",label:"Lao"}),e.push({value:"Latin",label:"Latin"}),e.push({value:"Latvian",label:"Latvian"}),e.push({value:"Lezghian",label:"Lezghian"}),e.push({value:"Limburgish",label:"Limburgish"}),e.push({value:"Lingala",label:"Lingala"}),e.push({value:"Lithuanian",label:"Lithuanian"}),e.push({value:"Lojban",label:"Lojban"}),e.push({value:"Low German",label:"Low German"}),e.push({value:"Lower Sorbian",label:"Lower Sorbian"}),e.push({value:"Lozi",label:"Lozi"}),e.push({value:"Luba-Katanga",label:"Luba-Katanga"}),e.push({value:"Luba-Lulua",label:"Luba-Lulua"}),e.push({value:"Luiseno",label:"Luiseno"}),e.push({value:"Lule Sami",label:"Lule Sami"}),e.push({value:"Lunda",label:"Lunda"}),e.push({value:"Luo (Kenya And Tanzania)",label:"Luo (Kenya & Tanzania)"}),e.push({value:"Lushai",label:"Lushai"}),e.push({value:"Luxembourgish",label:"Luxembourgish"}),e.push({value:"Macedonian",label:"Macedonian"}),e.push({value:"Madurese",label:"Madurese"}),e.push({value:"Magahi",label:"Magahi"}),e.push({value:"Maithili",label:"Maithili"}),e.push({value:"Makasar",label:"Makasar"}),e.push({value:"Malagasy",label:"Malagasy"}),e.push({value:"Malay",label:"Malay"}),e.push({value:"Malayalam",label:"Malayalam"}),e.push({value:"Maltese",label:"Maltese"}),e.push({value:"Manchu",label:"Manchu"}),e.push({value:"Mandar",label:"Mandar"}),e.push({value:"Mandarin",label:"Mandarin"}),e.push({value:"Mandingo",label:"Mandingo"}),e.push({value:"Manipuri",label:"Manipuri"}),e.push({value:"Manobo Languages",label:"Manobo Languages"}),e.push({value:"Manx",label:"Manx"}),e.push({value:"Maori",label:"Maori"}),e.push({value:"Marathi",label:"Marathi"}),e.push({value:"Mari",label:"Mari"}),e.push({value:"Marshall",label:"Marshall"}),e.push({value:"Marwari",label:"Marwari"}),e.push({value:"Masai",label:"Masai"}),e.push({value:"Mayan Languages",label:"Mayan Languages"}),e.push({value:"Mende",label:"Mende"}),e.push({value:"Micmac",label:"Micmac"}),e.push({value:"Minangkabau",label:"Minangkabau"}),e.push({value:"Mirandese",label:"Mirandese"}),e.push({value:"Miscellaneous Languages",label:"Miscellaneous Languages"}),e.push({value:"Mohawk",label:"Mohawk"}),e.push({value:"Moksha",label:"Moksha"}),e.push({value:"Moldavian",label:"Moldavian"}),e.push({value:"Mon-Khmer (Other)",label:"Mon-Khmer"}),e.push({value:"Mongo",label:"Mongo"}),e.push({value:"Mongolian",label:"Mongolian"}),e.push({value:"Mossi",label:"Mossi"}),e.push({value:"Multiple Languages",label:"Multiple Languages"}),e.push({value:"Munda Languages",label:"Munda Languages"}),e.push({value:"N'Ko",label:"N'Ko"}),e.push({value:"Nahuatl",label:"Nahuatl"}),e.push({value:"Nauru",label:"Nauru"}),e.push({value:"Navajo",label:"Navajo"}),e.push({value:"Ndonga",label:"Ndonga"}),e.push({value:"Neapolitan",label:"Neapolitan"}),e.push({value:"Nepal Bhasa",label:"Nepal Bhasa"}),e.push({value:"Nepali",label:"Nepali"}),e.push({value:"Nias",label:"Nias"}),e.push({value:"Niger-Kordofanian (Other)",label:"Niger-Kordofanian"}),e.push({value:"Nilo-Saharan (Other)",label:"Nilo-Saharan"}),e.push({value:"Niuean",label:"Niuean"}),e.push({value:"Nogai",label:"Nogai"}),e.push({value:"Norse, Old",label:"Norse, Old"}),e.push({value:"North American Indian (Other)",label:"North American Indian"}),e.push({value:"North Ndebele",label:"North Ndebele"}),e.push({value:"Northern Frisian",label:"Northern Frisian"}),e.push({value:"Northern Sami",label:"Northern Sami"}),e.push({value:"Northern Sotho",label:"Northern Sotho"}),e.push({value:"Norwegian",label:"Norwegian"}),e.push({value:"Norwegian Nynorsk",label:"Norwegian Nynorsk"}),e.push({value:"Nubian Languages",label:"Nubian Languages"}),e.push({value:"Nyamwezi",label:"Nyamwezi"}),e.push({value:"Nyankole",label:"Nyankole"}),e.push({value:"Nyoro",label:"Nyoro"}),e.push({value:"Nzima",label:"Nzima"}),e.push({value:"Occitan (Post 1500)",label:"Occitan (Post 1500)"}),e.push({value:"Ojibwa",label:"Ojibwa"}),e.push({value:"Old Church Slavonic",label:"Old Church Slavonic"}),e.push({value:"Oriya",label:"Oriya"}),e.push({value:"Oromo",label:"Oromo"}),e.push({value:"Osage",label:"Osage"}),e.push({value:"Ossetic",label:"Ossetic"}),e.push({value:"Otomian Languages",label:"Otomian Languages"}),e.push({value:"Pahlavi",label:"Pahlavi"}),e.push({value:"Palauan",label:"Palauan"}),e.push({value:"Pali",label:"Pali"}),e.push({value:"Pampanga",label:"Pampanga"}),e.push({value:"Pangasinan",label:"Pangasinan"}),e.push({value:"Papiamento",label:"Papiamento"}),e.push({value:"Papuan (Other)",label:"Papuan"}),e.push({value:"Persian",label:"Persian"}),e.push({value:"Philippine (Other)",label:"Philippine"}),e.push({value:"Phoenician",label:"Phoenician"}),e.push({value:"Pohnpeian",label:"Pohnpeian"}),e.push({value:"Polish",label:"Polish"}),e.push({value:"Portuguese",label:"Portuguese"}),e.push({value:"Prakrit Languages",label:"Prakrit Languages"}),e.push({value:"Punjabi",label:"Punjabi"}),e.push({value:"Pushto",label:"Pushto"}),e.push({value:"Quechua",label:"Quechua"}),e.push({value:"Raeto-Romance",label:"Raeto-Romance"}),e.push({value:"Rajasthani",label:"Rajasthani"}),e.push({value:"Rapanui",label:"Rapanui"}),e.push({value:"Rarotongan",label:"Rarotongan"}),e.push({value:"Romance (Other)",label:"Romance"}),e.push({value:"Romanian",label:"Romanian"}),e.push({value:"Romany",label:"Romany"}),e.push({value:"Rundi",label:"Rundi"}),e.push({value:"Russian",label:"Russian"}),e.push({value:"Salishan Languages",label:"Salishan Languages"}),e.push({value:"Samaritan Aramaic",label:"Samaritan Aramaic"}),e.push({value:"Sami Languages",label:"Sami Languages"}),e.push({value:"Samoan",label:"Samoan"}),e.push({value:"Sandawe",label:"Sandawe"}),e.push({value:"Sango",label:"Sango"}),e.push({value:"Sanskrit",label:"Sanskrit"}),e.push({value:"Santali",label:"Santali"}),e.push({value:"Sardinian",label:"Sardinian"}),e.push({value:"Sasak",label:"Sasak"}),e.push({value:"Scots",label:"Scots"}),e.push({value:"Selkup",label:"Selkup"}),e.push({value:"Semitic (Other)",label:"Semitic"}),e.push({value:"Serbian",label:"Serbian"}),e.push({value:"Serer",label:"Serer"}),e.push({value:"Shan",label:"Shan"}),e.push({value:"Shona",label:"Shona"}),e.push({value:"Sichuan Yi",label:"Sichuan Yi"}),e.push({value:"Sicilian",label:"Sicilian"}),e.push({value:"Sidamo",label:"Sidamo"}),e.push({value:"Sign Languages",label:"Sign Languages"}),e.push({value:"Siksika",label:"Siksika"}),e.push({value:"Sindhi",label:"Sindhi"}),e.push({value:"Sinhalese",label:"Sinhalese"}),e.push({value:"Sino-Tibetan (Other)",label:"Sino-Tibetan"}),e.push({value:"Siouan Languages",label:"Siouan Languages"}),e.push({value:"Skolt Sami",label:"Skolt Sami"}),e.push({value:"Slave (Athapascan)",label:"Slave (Athapascan)"}),e.push({value:"Slavic (Other)",label:"Slavic"}),e.push({value:"Slovak",label:"Slovak"}),e.push({value:"Slovenian",label:"Slovenian"}),e.push({value:"Sogdian",label:"Sogdian"}),e.push({value:"Somali",label:"Somali"}),e.push({value:"Songhai",label:"Songhai"}),e.push({value:"Soninke",label:"Soninke"}),e.push({value:"Sorbian Languages",label:"Sorbian Languages"}),e.push({value:"Sotho, Southern",label:"Sotho, Southern"}),e.push({value:"South American Indian (Other)",label:"South American Indian"}),e.push({value:"South Ndebele",label:"South Ndebele"}),e.push({value:"Southern Altai",label:"Southern Altai"}),e.push({value:"Southern Sami",label:"Southern Sami"}),e.push({value:"Spanish; Castilian",label:"Spanish; Castilian"}),e.push({value:"Sranan Togo",label:"Sranan Togo"}),e.push({value:"Sukuma",label:"Sukuma"}),e.push({value:"Sumerian",label:"Sumerian"}),e.push({value:"Sundanese",label:"Sundanese"}),e.push({value:"Susu",label:"Susu"}),e.push({value:"Swahili",label:"Swahili"}),e.push({value:"Swati",label:"Swati"}),e.push({value:"Swedish",label:"Swedish"}),e.push({value:"Swiss German",label:"Swiss German"}),e.push({value:"Syriac",label:"Syriac"}),e.push({value:"Tagalog",label:"Tagalog"}),e.push({value:"Tahitian",label:"Tahitian"}),e.push({value:"Tai (Other)",label:"Tai"}),e.push({value:"Tajik",label:"Tajik"}),e.push({value:"Tamashek",label:"Tamashek"}),e.push({value:"Tamil",label:"Tamil"}),e.push({value:"Tatar",label:"Tatar"}),e.push({value:"Telugu",label:"Telugu"}),e.push({value:"Tereno",label:"Tereno"}),e.push({value:"Tetum",label:"Tetum"}),e.push({value:"Thai",label:"Thai"}),e.push({value:"Tibetan",label:"Tibetan"}),e.push({value:"Tigre",label:"Tigre"}),e.push({value:"Tigrinya",label:"Tigrinya"}),e.push({value:"Timne",label:"Timne"}),e.push({value:"Tiv",label:"Tiv"}),e.push({value:"Tlingit",label:"Tlingit"}),e.push({value:"Tok Pisin",label:"Tok Pisin"}),e.push({value:"Tokelau",label:"Tokelau"}),e.push({value:"Tonga (Nyasa)",label:"Tonga (Nyasa)"}),e.push({value:"Tonga (Tonga Islands)",label:"Tonga (Tonga Islands)"}),e.push({value:"Tsimshian",label:"Tsimshian"}),e.push({value:"Tsonga",label:"Tsonga"}),e.push({value:"Tswana",label:"Tswana"}),e.push({value:"Tumbuka",label:"Tumbuka"}),e.push({value:"Tupi Languages",label:"Tupi Languages"}),e.push({value:"Turkish",label:"Turkish"}),e.push({value:"Turkmen",label:"Turkmen"}),e.push({value:"Tuvalu",label:"Tuvalu"}),e.push({value:"Tuvinian",label:"Tuvinian"}),e.push({value:"Twi",label:"Twi"}),e.push({value:"Udmurt",label:"Udmurt"}),e.push({value:"Ugaritic",label:"Ugaritic"}),e.push({value:"Ukrainian",label:"Ukrainian"}),e.push({value:"Umbundu",label:"Umbundu"}),e.push({value:"Undetermined",label:"Undetermined"}),e.push({value:"Upper Sorbian",label:"Upper Sorbian"}),e.push({value:"Urdu",label:"Urdu"}),e.push({value:"Uyghur",label:"Uyghur"}),e.push({value:"Uzbek",label:"Uzbek"}),e.push({value:"Vai",label:"Vai"}),e.push({value:"Venda",label:"Venda"}),e.push({value:"Vietnamese",label:"Vietnamese"}),e.push({value:"Volapuk",label:"Volapuk"}),e.push({value:"Votic",label:"Votic"}),e.push({value:"Wakashan Languages",label:"Wakashan Languages"}),e.push({value:"Walamo",label:"Walamo"}),e.push({value:"Walloon",label:"Walloon"}),e.push({value:"Waray",label:"Waray"}),e.push({value:"Washo",label:"Washo"}),e.push({value:"Welsh",label:"Welsh"}),e.push({value:"Western Frisian",label:"Western Frisian"}),e.push({value:"Wolof",label:"Wolof"}),e.push({value:"Xhosa",label:"Xhosa"}),e.push({value:"Yakut",label:"Yakut"}),e.push({value:"Yao",label:"Yao"}),e.push({value:"Yapese",label:"Yapese"}),e.push({value:"Yiddish",label:"Yiddish"}),e.push({value:"Yoruba",label:"Yoruba"}),e.push({value:"Yupik Languages",label:"Yupik Languages"}),e.push({value:"Zande",label:"Zande"}),e.push({value:"Zapotec",label:"Zapotec"}),e.push({value:"Zazaki",label:"Zazaki"}),e.push({value:"Zenaga",label:"Zenaga"}),e.push({value:"Zhuang",label:"Zhuang"}),e.push({value:"Zulu",label:"Zulu"}),e.push({value:"Zuni",label:"Zuni"}),e},getRosterTerminationReasons:function(){var e=[];return e.push({value:"39",label:"Assigned member status ended; roster transferred per physician request"}),e.push({value:"59",label:"Enrolment ended; patient out of geographic area"}),e.push({value:"57",label:"Enrolment terminated by patient"}),e.push({value:"12",label:"Health Number error"}),e.push({value:"38",label:"Long Term Care enrolment ended; patient has left Long Term Care"}),e.push({value:"82",label:"Ministry has not received enrolment/ Consent form"}),e.push({value:"60",label:"No current eligibility"}),e.push({value:"73",label:"No current eligibility"}),e.push({value:"74",label:"No current eligibility"}),e.push({value:"37",label:"Original enrolment ended; patient now enrolled as Long Term Care"}),e.push({value:"36",label:"Original enrolment ended; patient now re-enroled"}),e.push({value:"24",label:"Patient added to roster in error"}),e.push({value:"14",label:"Patient identified as deceased on ministry database"}),e.push({value:"51",label:"Patient no longer meets selection criteria for your roster"}),e.push({value:"41",label:"Patient no longer meets selection criteria for your roster - assigned to another physician"}),e.push({value:"61",label:"Patient out of geographic area; address over-ride applied"}),e.push({value:"62",label:"Patient out of geographic area; address over-ride removed"}),e.push({value:"35",label:"Patient transferred from roster per physician request"}),e.push({value:"42",label:"Physician ended enrolment; patient entered Long Term Care facility"}),e.push({value:"54",label:"Physician ended enrolment; patient left province"}),e.push({value:"53",label:"Physician ended enrolment; patient moved out of geographic area"}),e.push({value:"56",label:"Physician ended enrolment; per patient request"}),e.push({value:"44",label:"Physician ended patient enrolment"}),e.push({value:"40",label:"Physician reported member as deceased"}),e.push({value:"32",label:"Pre-member/ Assigned member ended; now enrolled or registered with photo health card"}),e.push({value:"30",label:"Pre-member/ Assigned member ended; now enrolled or registered with red and white health card"}),e.push({value:"33",label:"Termination reason cannot be released (due to patient confidentiality)"}),e.push({value:"84",label:"Termination reason cannot be released (due to patient confidentiality)"}),e.push({value:"90",label:"Termination reason cannot be released (due to patient confidentiality)"}),e.push({value:"91",label:"Termination reason cannot be released (due to patient confidentiality)"}),e},getSecurityQuestions:function(){var e=[];return e.push({value:"What was the name of your high school?",label:"What was the name of your high school?"}),e.push({value:"What is your spouse's maiden name?",label:"What is your spouse's maiden name?"}),e.push({value:"What is the name of the street you grew up on?",label:"What is the name of the street you grew up on?"}),e.push({value:"In what city were you born?",label:"In what city were you born?"}),e.push({value:"What is the middle name of your oldest child?",label:"What is the middle name of your oldest child?"}),e.push({value:"What is your oldest cousin's first name?",label:"What is your oldest cousin's first name?"}),e.push({value:"What is your mother's middle name?",label:"What is your mother's middle name?"}),e.push({value:"What is your grandmother's first name?",label:"What is your grandmother's first name?"}),e.push({value:"What year did you graduate from high school?",label:"What year did you graduate from high school?"}),e},getConsultUrgencies:function(){var e=[];return e.push({value:"2",name:"Non-Urgent"}),e.push({value:"1",name:"Urgent"}),e.push({value:"3",name:"Return"}),e},getConsultRequestStatuses:function(){var e=[];return e.push({value:"1",name:"Not Complete"}),e.push({value:"2",name:"Preliminary Pending Specialist"}),e.push({value:"3",name:"Pending Callback"}),e.push({value:"4",name:"Completed"}),e.push({value:"5",name:"Cancelled"}),e.push({value:"6",name:"Appointment Booked"}),e.push({value:"7",name:"Deleted"}),e},getConsultResponseStatuses:function(){var e=[];return e.push({value:1,name:"Not Complete"}),e.push({value:2,name:"Pending Referring Doctor Callback"}),e.push({value:3,name:"Pending Patient Callback"}),e.push({value:4,name:"Completed"}),e.push({value:5,name:"Cancelled"}),e},getHours:function(){return["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]},getMinutes:function(){return["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"]},getRxInteractionLevels:function(){var e=[];return e.push({value:0,name:"Not Specified"}),e.push({value:1,name:"Low"}),e.push({value:2,name:"Medium"}),e.push({value:3,name:"High"}),e.push({value:4,name:"None"}),e}};return e}])},function(e,t,n){"use strict";angular.module("Common.Services").service("securityService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/",user:null,getUser:function(){return n.user},setUser:function(e){n.user=e},hasRight:function(a,o,r){var i=t.defer(),l=n.apiPath+"persona/hasRight?objectName="+encodeURIComponent(a)+"&privilege="+encodeURIComponent(o)+"&demographicNo="+encodeURIComponent(r);return e.get(l,n.configHeadersWithCache).then(function(e){i.resolve(e.data.success)},function(e){console.log("securityService::hasRight error",e),i.reject("An error occured while fetching access right")}),i.promise},hasRights:function(a){var o=t.defer();return e({url:n.apiPath+"persona/hasRights",method:"POST",data:JSON.stringify(a),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("securityService::hasRights error",e),o.reject("An error occured while fetching access rights")}),o.promise},isAllowedAccessToPatientRecord:function(a){var o=t.defer();return e({url:n.apiPath+"persona/isAllowedAccessToPatientRecord",method:"POST",data:JSON.stringify({demographicNo:a}),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("securityService::isAllowedAccessToPatientRecord error",e),o.reject("An error occured while fetching access rights")}),o.promise},has_one_of_permissions:function(e){return!0},has_permission:function(e){return!0}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("scheduleService",["$http","$q","junoHttp",function(e,t,n){var a={apiPath:"../ws/rs/",getStatuses:function(){var n=t.defer();return e.get(a.apiPath+"schedule/statuses",a.configHeadersWithCache).then(function(e){n.resolve(e.data)},function(e){console.log("scheduleService::getStatuses error",e),n.reject("An error occured while fetching statuses")}),n.promise},getTypes:function(){var n=t.defer();return e.get(a.apiPath+"schedule/types",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){n.resolve(e.data)},function(e){console.log("scheduleService::getStatuses error",e),n.reject("An error occured while fetching types")}),n.promise},getAppointments:function(n){var o=t.defer();return e.get(a.apiPath+"schedule/day/"+encodeURIComponent(n)).then(function(e){o.resolve(e.data)},function(e){console.log("scheduleService::getAppointments error",e),o.reject("An error occured while getting appointments")}),o.promise},addAppointment:function(n){var o=t.defer();return e({url:a.apiPath+"schedule/add",method:"POST",data:JSON.stringify(n),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("scheduleService::addAppointment error",e),o.reject("An error occured while saving appointment")}),o.promise},getAppointment:function(n){var o=t.defer();return e({url:a.apiPath+"schedule/getAppointment",method:"POST",data:{id:n},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data.appointment)},function(e){console.log("scheduleService::getAppointment error",e),o.reject("An error occured while getting appointment")}),o.promise},deleteAppointment:function(n){var o=t.defer();return e({url:a.apiPath+"schedule/deleteAppointment",method:"POST",data:{id:n},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("scheduleService::deleteAppointment error",e),o.reject("An error occured while deleting appointment")}),o.promise},appointmentHistory:function(n){var o=t.defer();return e({url:a.apiPath+"schedule/"+encodeURIComponent(n)+"/appointmentHistory",method:"POST",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("scheduleService::appointmentHistory error",e),o.reject("An error occured while getting appointment history")}),o.promise},cancelAppointment:function(n){var o=t.defer();return e({url:a.apiPath+"schedule/appointment/"+encodeURIComponent(n)+"/updateStatus",method:"POST",data:{status:"C"},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("scheduleService::cancelAppointment error",e),o.reject("An error occured while cancelling appointment")}),o.promise},noShowAppointment:function(n){var o=t.defer();return e({url:a.apiPath+"schedule/appointment/"+encodeURIComponent(n)+"/updateStatus",method:"POST",data:{status:"N"},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("scheduleService::noShowAppointment error",e),o.reject("An error occured while setting no show appointment")}),o.promise},getScheduleGroups:function(){var e=t.defer();return n.get(a.apiPath+"schedule/groups",{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(t){e.resolve(t.data)},function(t){console.log("scheduleService::getScheduleGroups error",t),e.reject()}),e.promise},getSchedulesForCalendar:function(e,o,r,i){var l=t.defer(),s=a.apiPath+"schedule/calendar/";return s+=encodeURIComponent(e)+"/",s+="?startDate="+encodeURIComponent(o),s+="&endDate="+encodeURIComponent(r),null!=i&&(s+="&site="+encodeURIComponent(i)),n.get(s,{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){l.resolve(e.data)},function(e){console.log("scheduleService::getSchedulesForCalendar error",e),l.reject()}),l.promise},getScheduleTemplateCodes:function(){var e=t.defer();return n.get(a.apiPath+"schedule/templateCodes",{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(t){e.resolve(t.data)},function(t){console.log("scheduleService::getAvailabilityTypes error",t),e.reject()}),e.promise},getAppointmentStatuses:function(){var e=t.defer();return n.get(a.apiPath+"schedule/calendar/statuses",{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(t){e.resolve(t.data)},function(t){console.log("scheduleService::getAppointmentStatuses error",t),e.reject()}),e.promise},getSites:function(){var e=t.defer();return n.get(a.apiPath+"sites",{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(t){e.resolve(t.data)},function(t){console.log("scheduleService::getSites error",t),e.reject()}),e.promise}};return a}])},function(e,t,n){"use strict";angular.module("Common.Services").service("resultsService",[function(){var e={factory:function(e,t){var n={data:{},meta:{},has_results:!1,error_type:null};return util.exists(e)&&!angular.equals(e,{})&&(n.data=e,angular.equals(e,{})||angular.equals(e,[])||(n.has_results=!0)),util.exists(t)?n.meta=t:(n.meta={},n.meta.pagination={page:1,per_page:10,total:0,total_pages:0}),n}};return e}])},function(e,t,n){"use strict";angular.module("Common.Services").service("providersService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/providers",search:function(a,o,r,i){var l=e.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={searchText:a,searchMode:o,page:r,perPage:i},t.get(n.apiPath,s).then(function(e){l.resolve(e.data)},function(e){console.log("providersService::search error",e),l.reject("An error occurred while getting providers data")}),l.promise},getBySecurityRole:function(a){var o=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={role:a},t.get(n.apiPath+"/bySecurityRole",r).then(function(e){o.resolve(e.data)},function(e){console.log("providersService::getBySecurityRole error",e),o.reject("An error occurred while getting providers data")}),o.promise},getByType:function(a){var o=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={type:a},t.get(n.apiPath+"/byType",r).then(function(e){o.resolve(e.data)},function(e){console.log("providersService::getByType error",e),o.reject("An error occurred while getting providers data")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("providerService",["$http","$q","junoHttp",function(e,t,n){var a={apiPath:"../ws/rs/providerService",getMe:function(){var n=t.defer();return e.get(a.apiPath+"/provider/me",a.configHeaders).then(function(e){n.resolve(e.data)},function(e){console.log("providerService::getMe error",e),n.reject("An error occured while getting user data")}),n.promise},getProvider:function(n){var o=t.defer();return e.get(a.apiPath+"/provider/"+encodeURIComponent(n),a.configHeaders).then(function(e){o.resolve(e.data)},function(e){console.log("providerService::getProvider error",e),o.reject("An error occured while getting user data")}),o.promise},searchProviders:function(n){var o=t.defer();return e({url:a.apiPath+"/providers/search",method:"POST",data:JSON.stringify(n),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data.content)},function(e){console.log("providerService::searchProviders error",e),o.reject("An error occured while fetching provider list")}),o.promise},getSettings:function(){var n=t.defer();return e({url:a.apiPath+"/settings/get",method:"GET"}).then(function(e){n.resolve(e.data.content[0])},function(e){console.log("providerService::getSettings error",e),n.reject("An error occured while fetching provider settings")}),n.promise},saveSettings:function(n,o){var r=t.defer();return e({url:a.apiPath+"/settings/"+n+"/save",method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){r.resolve(e.data)},function(e){console.log("providerService::saveSettings error",e),r.reject("An error occured while saving settings")}),r.promise},getActiveTeams:function(){var n=t.defer();return e({url:a.apiPath+"/getActiveTeams",method:"GET"}).then(function(e){n.resolve(e.data.content)},function(e){console.log("providerService::getActiveTeams error",e),n.reject("An error occured while fetching provider teams")}),n.promise},getRecentPatientList:function(){var e=t.defer(),o=Juno.Common.ServiceHelper.configHeaders();return n.get(a.apiPath+"/getRecentDemographicsViewed",o).then(function(t){e.resolve(t.data)},function(t){console.log("providerService::getRecentDemographicsViewed error",t),e.reject("An error occurred while getting RecentDemographicsViewed")}),e.promise}};return a}])},function(e,t,n){"use strict";angular.module("Common.Services").service("programService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/",getPrograms:function(){var a=t.defer();return e.get(n.apiPath+"program/programList",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){console.log(e.data),a.resolve(e.data.content)},function(e){console.log("error fetching program list:",e),a.reject("An error occured while fetching program list")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("personaService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/persona",getDashboardMenu:function(){var a=t.defer();return e({url:n.apiPath+"/dashboardMenu",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("personaService::getDashboardMenu error",e),a.reject("An error occured while getting the dashboard menu from persona")}),a.promise},getNavBar:function(){var a=t.defer();return e({url:n.apiPath+"/navbar",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("personaService::getNavBar error",e),a.reject("An error occured while getting navbar from persona")}),a.promise},getPatientListConfig:function(){var a=t.defer();return e({url:n.apiPath+"/patientList/config",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("personaService::getPatientListConfig error",e),a.reject("An error occured while getting getPatientListConfig from persona")}),a.promise},setPatientListConfig:function(a){var o=t.defer();return e({url:n.apiPath+"/patientList/config",method:"POST",data:a,headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::setPatientListConfig error",e),o.reject("An error occured while setting setPatientListConfig from persona")}),o.promise},setCurrentProgram:function(a){var o=t.defer();return e({url:n.apiPath+"/setDefaultProgramInDomain?programId="+encodeURIComponent(a),method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::setCurrentProgram error",e),o.reject("An error occured while setting current")}),o.promise},getDashboardPreferences:function(){var a=t.defer();return e({url:n.apiPath+"/preferences",method:"POST",data:{type:"dashboard"},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("personaService::getDashboardPreferences error",e),a.reject("An error occured while getting preferences from persona")}),a.promise},updateDashboardPreferences:function(a){var o=t.defer();return e({url:n.apiPath+"/updatePreferences",method:"POST",data:JSON.stringify(a),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::updateDashboardPreferences error",e),o.reject("An error occured while updating preferences")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("patientDetailStatusService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/patientDetailStatusService",getStatus:function(a){var o=t.defer();return e.get(n.apiPath+"/getStatus?demographicNo="+encodeURIComponent(a),Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("patientDetailStatusService::getStatus error",e),o.reject("An error occurred while fetching status")}),o.promise},validateHC:function(a,o){var r=t.defer();return e.get(n.apiPath+"/validateHC?hin="+encodeURIComponent(a)+"&ver="+encodeURIComponent(o),Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.log("patientDetailStatusService::validateHC error",e),r.reject("An error occurred while fetching health card validation info")}),r.promise},isUniqueHC:function(a,o){var r=t.defer();return e.get(n.apiPath+"/isUniqueHC?hin="+encodeURIComponent(a)+"&demographicNo="+encodeURIComponent(o),Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.log("patientDetailStatusService::isUniqueHC error",e),r.reject("An error occurred while checking health card uniqueness")}),r.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("noteService",["$http","$q","junoHttp",function(e,t,n){var a={apiPath:"../ws/rs/notes",getNotesFrom:function(e,o,r,i){var l=t.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={offset:encodeURIComponent(o),numToReturn:encodeURIComponent(r),noteConfig:i},n.post(a.apiPath+"/"+encodeURIComponent(e)+"/all",s).then(function(e){l.resolve(e.data)},function(e){console.log("noteService::getNotesFrom error",e),l.reject("An error occurred while fetching notes")}),l.promise},saveNote:function(e,o){var r=t.defer();return n.post(a.apiPath+"/"+encodeURIComponent(e)+"/save",o).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::saveNote error",e),r.reject("An error occurred while saving note")}),r.promise},saveIssueNote:function(n,o){var r=t.defer();return e.post(a.apiPath+"/"+encodeURIComponent(n)+"/saveIssueNote",o).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::saveIssueNote error",e),r.reject("An error occurred while saving issue note")}),r.promise},getCurrentNote:function(n,o){var r=t.defer();return e.post(a.apiPath+"/"+encodeURIComponent(n)+"/getCurrentNote",o).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::getCurrentNote error",e),r.reject("An error occurred while fetching current note")}),r.promise},tmpSave:function(n,o){var r=t.defer();return e.post(a.apiPath+"/"+encodeURIComponent(n)+"/tmpSave",o).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::tmpSave error",e),r.reject("An error occurred while posting tmp save")}),r.promise},getNoteExt:function(n){var o=t.defer();return e.get(a.apiPath+"/getGroupNoteExt/"+encodeURIComponent(n)).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::getNoteExt error",e),o.reject("An error occurred while fetching note ext")}),o.promise},getIssueNote:function(e){var o=t.defer();return n.get(a.apiPath+"/getIssueNote/"+encodeURIComponent(e),Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::getIssueNote error",e),o.reject("An error occurred while fetching issue note")}),o.promise},getIssueId:function(n){var o=t.defer();return e.get(a.apiPath+"/getIssueId/"+encodeURIComponent(n)).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::getIssueId error",e),o.reject("An error occurred while fetching issue id")}),o.promise},getTicklerNote:function(n){var o=t.defer();return e.get(a.apiPath+"/ticklerGetNote/"+encodeURIComponent(n),{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::getTicklerNote error",e),o.reject("An error occurred while fetching tickler note")}),o.promise},saveTicklerNote:function(n){var o=t.defer();return e({url:a.apiPath+"/ticklerSaveNote",method:"POST",data:JSON.stringify(n),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::saveTicklerNote error",e),o.reject("An error occurred while saving tickler note")}),o.promise},searchIssues:function(n,o,r){var i=t.defer();return e.post(a.apiPath+"/searchIssues?startIndex="+encodeURIComponent(o)+"&itemsToReturn="+encodeURIComponent(r),n).then(function(e){i.resolve(e.data)},function(e){console.log("noteService::searchIssues error",e),i.reject("An error occurred while searching issues")}),i.promise},getIssue:function(n){var o=t.defer();return e.post(a.apiPath+"/getIssueById/"+encodeURIComponent(n)).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::getIssue error",e),o.reject("An error occurred while fetching issue")}),o.promise},setEditingNoteFlag:function(n,o){var r=t.defer();return e.post(a.apiPath+"/setEditingNoteFlag?noteUUID="+encodeURIComponent(n)+"&userId="+encodeURIComponent(o)).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::setEditingNoteFlag error",e),r.reject("An error occurred while setting editing note flag")}),r.promise},checkEditNoteNew:function(n,o){var r=t.defer();return e.post(a.apiPath+"/checkEditNoteNew?noteUUID="+encodeURIComponent(n)+"&userId="+encodeURIComponent(o)).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::checkEditNoteNew error",e),r.reject("An error occurred while checking edit note new")}),r.promise},removeEditingNoteFlag:function(n,o){var r=t.defer();return e.post(a.apiPath+"/removeEditingNoteFlag?noteUUID="+encodeURIComponent(n)+"&userId="+encodeURIComponent(o)).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::removeEditingNoteFlag error",e),r.reject("An error occurred while removing editing note flag")}),r.promise}};return a}])},function(e,t,n){"use strict";angular.module("Common.Services").service("messageService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/messaging",getUnread:function(a){var o=t.defer();return e({url:n.apiPath+"/unread?startIndex=0&limit="+encodeURIComponent(a),method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("messageService::getUnread error",e),o.reject("An error occurred while getting messages")}),o.promise},getUnreadCount:function(){var a=t.defer();return e({url:n.apiPath+"/count",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("messageService::getUnreadCount error",e),a.reject("An error occurred while getting messages")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("k2aService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs",getK2aFeed:function(a,o){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={key:"k2a",startPoint:encodeURIComponent(a),numberOfRows:encodeURIComponent(o)},t.get(n.apiPath+"/rssproxy/rss",i).then(function(e){r.resolve(e.data)},function(e){console.log("k2aService::getK2aFeed error",e),r.reject("An error occured while getting k2a content")}),r.promise},isK2AInit:function(){var a=e.defer(),o=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/app/K2AActive",o).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::isK2AInit error",e),a.reject("An error occured while getting k2a content")}),a.promise},initK2A:function(a){var o=e.defer(),r={name:a};return t.post(n.apiPath+"/app/K2AInit",r).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::initK2A error",e),o.reject("An error occured while trying to initialize k2a")}),o.promise},postK2AComment:function(a){var o=e.defer(),r={post:a};return t.post(n.apiPath+"/app/comment",r).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::postK2AComment error",e),o.reject("An error occured while trying to post a comment to k2a")}),o.promise},removeK2AComment:function(a){var o=e.defer();return t.del(n.apiPath+"/app/comment/"+encodeURIComponent(a)).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::removeK2AComment error",e),o.reject("An error occured while trying to remove a comment from k2a")}),o.promise},preventionRulesList:function(){var a=e.defer();return t.get(n.apiPath+"/resources/preventionRulesList",Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::preventionRulesList error",e),a.reject("An error occured while trying to remove a comment from k2a")}),a.promise},loadPreventionRuleById:function(a){var o=e.defer();return t.post(n.apiPath+"/resources/loadPreventionRulesById/"+encodeURIComponent(a.id),a).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::loadPreventionRuleById error",e),o.reject("An error occured while trying to loadPreventionRulesById")}),o.promise},getCurrentPreventionRulesVersion:function(){var a=e.defer();return t.get(n.apiPath+"/resources/currentPreventionRulesVersion",Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::getCurrentPreventionRulesVersion error",e),a.reject("An error occured while trying to getCurrentPreventionRulesVersion")}),a.promise},getNotifications:function(){var a=e.defer();return t.get(n.apiPath+"/resources/notifications",Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::getNotifications error",e),a.reject("An error occured while trying to getNotifications")}),a.promise},getMoreNotification:function(a){var o=e.defer();return t.post(n.apiPath+"/resources/notifications/readmore",a,Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::getMoreNotification error",e),o.reject("An error occured while trying to /resources/notifications/readmore")}),o.promise},ackNotification:function(a){var o=e.defer();return t.post(n.apiPath+"/resources/notifications/"+a+"/ack",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::ackNotification error",e),o.reject("An error occured while trying to /resources/notifications/ack")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("inboxService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/inbox",getDashboardItems:function(a){var o=t.defer();return e({url:n.apiPath+"/mine?limit="+encodeURIComponent(a),method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("inboxService::getDashboardItems error",e),o.reject("An error occured while getting inbox content")}),o.promise},getUnAckLabDocCount:function(){var a=t.defer();return e({url:n.apiPath+"/mine/count",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("inboxService::getUnAckLabDocCount error",e),a.reject("An error occured while getting inbox content")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("globalStateService",[function(){return{global_settings:{interface_preferences:{scheduler_license_key:""}}}}])},function(e,t,n){"use strict";angular.module("Common.Services").service("formService",["$http","$q","junoHttp",function(e,t,n){var a={apiPath:"../ws/rs/forms",getAllFormsByHeading:function(n,o){var r=t.defer();return e.get(a.apiPath+"/"+encodeURIComponent(n)+"/all?heading="+encodeURIComponent(o),Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.log("formService::getAllFormsByHeading error",e),r.reject("An error occurred while fetching forms")}),r.promise},getAllEncounterForms:function(){var n=t.defer();return e.get(a.apiPath+"/allEncounterForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getAllEncounterForms error",e),n.reject("An error occurred while fetching encounter forms")}),n.promise},getSelectedEncounterForms:function(){var n=t.defer();return e.get(a.apiPath+"/selectedEncounterForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getSelectedEncounterForms error",e),n.reject("An error occurred while fetching selected encounter forms")}),n.promise},getCompletedEncounterForms:function(e){var o=t.defer();return n.get(a.apiPath+"/"+e+"/completedEncounterForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("formService::getCompletedEncounterForms error",e),o.reject("An error occurred while fetching completed encounter forms")}),o.promise},getAllEForms:function(){var n=t.defer();return e.get(a.apiPath+"/allEForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data.content)},function(e){console.log("formService::getAllEForms error",e),n.reject("An error occurred while fetching eforms")}),n.promise},getGroupNames:function(){var n=t.defer();return e.get(a.apiPath+"/groupNames",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data.content)},function(e){console.log("formService::getGroupNames error",e),n.reject("An error occurred while fetching group names")}),n.promise},getFormGroups:function(){var n=t.defer();return e.get(a.apiPath+"/getFormGroups",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getFormGroups error",e),n.reject("An error occurred while fetching form groups")}),n.promise},getFavouriteFormGroup:function(){var n=t.defer();return e.get(a.apiPath+"/getFavouriteFormGroup",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getFavouriteFormGroup error",e),n.reject("An error occurred while fetching favourite form groups")}),n.promise},getFormOptions:function(n){var o=t.defer();return e.get(a.apiPath+"/"+encodeURIComponent(n)+"/formOptions",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("formService::getFormOptions error",e),o.reject("An error occurred while fetching form options")}),o.promise}};return a}])},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").factory("focusService",["$timeout","$window",function(t,n){var a={element:function(n){t(function(){e(n).focus()})},first_form_input:function(n){n||(n="form:visible:first"),t(function(){e(n+" input:enabled, "+n+" select:enabled, "+n+" textarea:enabled ").first().focus()})},first_error_input:function(n){angular.isObject(n)||(n={});var o=n.selector||"";t(function(){e(o+" .has-error:first input:enabled, "+o+" .has-error:first select:enabled, "+o+" .has-error:first textarea:enabled ").first().focus(),a.first_alert(n)})},first_alert:function(n){angular.isObject(n)||(n={});var a=n.selector||"",o=n.scroll_offset;(!o||o<0)&&(o=10),t(function(){e("body").hasClass("modal-open")?e(".modal").animate({scrollTop:0}):e("html, body").animate({scrollTop:e(a+" .alert:visible:first").offset().top-o},500)})}};return a}])}).call(this,n(0))},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").factory("fieldHelperService",["$timeout",function(t){var n={default_scope:{form_group_class:"@caFormGroupClass",label_size:"@caLabelSize",input_size:"@caInputSize",text_length:"@caTextLength",hide_label_colon:"@caTitleNoColon",template:"@caTemplate",name:"@caName",title:"@caTitle",hint:"@caHint",tab_index:"@caTabindex",error_message:"@caError",warning_message:"@caWarning",depends_on_field:"@caDependsOnField",depends_on_value:"@caDependsOnValue",model:"=caModel",disabled:"=caDisabled",hide:"=caHide",focus_field:"=caFocusField",on_focus_fn:"&caFocus",change_fn:"&caChange",blur_fn:"&caBlur"},resolve_template:function(e,t){return Juno.Common.Util.exists(e.caTemplate)?t+"_"+e.caTemplate+".jsp":t+".jsp"},merge_title_messages:function(e){e.title_array=[],Juno.Common.Util.exists(e.error_message)&&e.title_array.push(e.error_message),Juno.Common.Util.exists(e.warning_message)&&e.title_array.push(e.warning_message),0==e.title_array.length&&Juno.Common.Util.exists(e.hint)&&e.title_array.push(e.hint),e.title_string=e.title_array.join("|")},default_link_function:function(a,o,r,i){n.merge_title_messages(a),a.focus_fn=function(){angular.isFunction(a.on_focus_fn)&&t(function(){e(o).is("input:enabled, select:enabled, textarea:enabled")&&e(o).is(":focus")||e(o).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?a.on_focus_fn():console.log("ignoring on focus function - element is no longer in focus",a.name)})},a.$watch("focus_field",function(){Juno.Common.Util.exists(a.name)&&a.focus_field==a.name&&t(function(){e(o).is("input:enabled, select:enabled, textarea:enabled")?e(o).focus().select():e(o).find("input:enabled, select:enabled, textarea:enabled").first().focus().select()})}),a.$on("focusCaFocusField",function(t,n){Juno.Common.Util.exists(a.name)&&a.name==n&&(e(o).is("input:enabled, select:enabled, textarea:enabled")?e(o).focus().select():e(o).find("input:enabled, select:enabled, textarea:enabled").first().focus().select())})},default_controller:["$scope","$element","$attrs",function(e,t,n){this.ignore_focus_field=function(){return!0}}]};return n}])}).call(this,n(0))},function(e,t,n){"use strict";angular.module("Common.Services").factory("errorsService",[function(){var e={factory:function(e,t){return new Juno.Common.DisplayMessages(e,t)}};return e}])},function(e,t,n){"use strict";angular.module("Common.Services").service("diseaseRegistryService",["$http","$q","junoHttp",function(e,t,n){var a={apiPath:"../ws/rs/dxRegisty/",getQuickLists:function(){var e=t.defer();return n.get(a.apiPath+"quickLists/",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(t){e.resolve(t.data)},function(t){console.log("diseaseRegistryService::getQuickLists error",t),e.reject("An error occurred while fetching quick lists")}),e.promise},getIssueQuickLists:function(){var e=t.defer();return n.get(a.apiPath+"issueQuickLists/",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(t){e.resolve(t.data)},function(t){console.log("diseaseRegistryService::getIssueQuickLists error",t),e.reject("An error occurred while fetching quick lists")}),e.promise},addToDxRegistry:function(n,o){var r=t.defer(),i={};return i.id=o.id,i.type=o.type,i.code=o.code,i.description=o.description,e.post(a.apiPath+encodeURIComponent(n)+"/add",i).then(function(e){r.resolve(e.data)},function(e){console.log("diseaseRegistryService::addToDxRegistry error",e),r.reject("An error occurred while adding to dx registry")}),r.promise},findDxIssue:function(e,o){var r=t.defer(),i=Juno.Common.ServiceHelper.configHeadersWithCache();return i.params={codingSystem:o,code:e},n.get(a.apiPath+"findDxIssue",i).then(function(e){r.resolve(e.data)},function(e){console.log("diseaseRegistryService::findDxIssue error",e),r.reject("An error occurred while retrieving a dx issue")}),r.promise}};return a}])},function(e,t,n){"use strict";angular.module("Common.Services").service("demographicsService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/demographics",quickSearch:function(a){var o=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={query:a},t.get(n.apiPath+"/quickSearch",r).then(function(e){o.resolve(e.data)},function(e){console.log("demographicsService::quickSearch error",e),o.reject("An error occurred while searching")}),o.promise},search:function(a,o,r){var i=e.defer(),l=Juno.Common.ServiceHelper.configHeaders();return l.params={jsonData:a,startIndex:o,itemsToReturn:r},t.get(n.apiPath+"/search",l).then(function(e){i.resolve(e.data)},function(e){console.log("demographicsService::search error",e),i.reject("An error occurred while searching")}),i.promise},searchIntegrator:function(a,o){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={jsonData:a,itemsToReturn:o},t.get(n.apiPath+"/searchIntegrator",i).then(function(e){r.resolve(e.data)},function(e){console.log("demographicsService::searchIntegrator error",e),r.reject("An error occurred while searching")}),r.promise},getStatusList:function(a){var o=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={type:a},t.get(n.apiPath+"/statusList",r).then(function(e){o.resolve(e.data)},function(e){console.log("demographicsService::getStatusList error",e),o.reject("An error occurred while getting status list")}),o.promise}};return n}])},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").service("demographicService",["$q","junoHttp",function(t,n){var a={apiPath:"../ws/rs/demographic",getDemographic:function(o){var r=t.defer();return n.get(a.apiPath+"/"+encodeURIComponent(o),Juno.Common.ServiceHelper.configHeaders()).then(function(t){t.data.effDate&&(t.data.effDate=e(t.data.effDate).toDate()),t.data.hcRenewDate&&(t.data.hcRenewDate=e(t.data.hcRenewDate).toDate()),t.data.endDate&&(t.data.endDate=e(t.data.endDate).toDate()),t.data.patientStatusDate&&(t.data.patientStatusDate=e(t.data.patientStatusDate).toDate()),t.data.onWaitingListSinceDate&&(t.data.onWaitingListSinceDate=e(t.data.onWaitingListSinceDate).toDate()),t.data.scrPaperChartArchivedDate&&(t.data.scrPaperChartArchivedDate=e(t.data.scrPaperChartArchivedDate).toDate()),t.data.dateJoined&&(t.data.dateJoined=e(t.data.dateJoined).toDate()),t.data.rosterTerminationDate&&(t.data.rosterTerminationDate=e(t.data.rosterTerminationDate).toDate()),t.data.rosterDate&&(t.data.rosterDate=e(t.data.rosterDate).toDate()),console.log("converted RESULTS: ",t.data),r.resolve(t.data)},function(e){console.log("demographicServices::getDemographic error",e),r.reject("An error occurred while fetching demographic")}),r.promise},getDemographicContacts:function(e,o){var r=t.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={category:o},n.get(a.apiPath+"/"+encodeURIComponent(e)+"/contacts",i).then(function(e){r.resolve(e.data)},function(e){console.log("demographicServices::getDemographicContacts error",e),r.reject("An error occurred while fetching demographic contacts")}),r.promise},saveDemographic:function(e){var o=t.defer();return n.post(a.apiPath,e).then(function(e){o.resolve(e.data)},function(e){console.log("demographicServices::updateDemographic error",e),o.reject("An error occurred while saving demographic")}),o.promise},updateDemographic:function(e){var o=t.defer();return n.put(a.apiPath,e).then(function(e){o.resolve(e.data)},function(e){console.log("demographicServices::updateDemographic error",e),o.reject("An error occurred while updating demographic")}),o.promise}};return a}])}).call(this,n(4))},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").service("consultService",["$http","$q","junoHttp",function(t,n,a){var o={apiPath:"../ws/rs/consults/",searchRequests:function(e){var t=n.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params=e,a.get(o.apiPath+"searchRequests",r).then(function(e){t.resolve(e)},function(e){console.log("consultService::searchRequests error",e),t.reject("An error occured while searching consult requests")}),t.promise},getRequest:function(t){var r=n.defer(),i=Juno.Common.ServiceHelper.configHeaders();return a.get(o.apiPath+"getRequest/"+encodeURIComponent(t),i).then(function(t){t.data.referralDate&&(t.data.referralDate=e(t.data.referralDate).toDate()),t.data.appointmentDate&&(t.data.appointmentDate=e(t.data.appointmentDate).toDate()),t.data.followUpDate&&(t.data.followUpDate=e(t.data.followUpDate).toDate()),r.resolve(t.data)},function(e){console.log("consultService::getRequest error",e),r.reject("An error occurred while getting consult request (requestId="+t+")")}),r.promise},getNewRequest:function(t){var r=n.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={demographicNo:t},a.get(o.apiPath+"getNewRequest",i).then(function(t){t.data.referralDate&&(t.data.referralDate=e(t.data.referralDate).toDate()),t.data.appointmentDate&&(t.data.appointmentDate=e(t.data.appointmentDate).toDate()),t.data.followUpDate&&(t.data.followUpDate=e(t.data.followUpDate).toDate()),r.resolve(t.data)},function(e){console.log("consultService::getNewRequest error",e),r.reject("An error occurred while getting new consult request")}),r.promise},getRequestAttachments:function(e,t,r){var i=n.defer(),l=Juno.Common.ServiceHelper.configHeaders();return l.params={demographicId:encodeURIComponent(t),attached:encodeURIComponent(r)},a.get(o.apiPath+"getRequestAttachments/"+encodeURIComponent(e),l).then(function(e){i.resolve(e.data)},function(t){console.log("consultService::getRequestAttachments error",t),i.reject("An error occured while getting consult attachments (requestId="+e+")")}),i.promise},saveRequest:function(e){var t=n.defer();return a.post(o.apiPath+"saveRequest",e).then(function(e){t.resolve(e.data)},function e(n){console.log("consultService::saveRequest error",e),t.reject("An error occurred while fetching consult request after save")}),t.promise},eSendRequest:function(e){var t=n.defer();return a.get(o.apiPath+"eSendRequest/"+encodeURIComponent(e),Juno.Common.ServiceHelper.configHeaders()).then(function(e){t.resolve(e.data)},function(n){console.log("consultService::eSendRequest error",n),t.reject("An error occurred while e-sending consult request (requestId="+e+")")}),t.promise},searchResponses:function(e){var t=n.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params=e,a.get(o.apiPath+"searchResponses",r).then(function(e){t.resolve(e)},function(e){console.log("consultService::searchRequests error",e),t.reject("An error occured while searching consult requests")}),t.promise},getResponse:function(a,r){var i=n.defer();return"new"===a&&(a=0),t.get(o.apiPath+"getResponse",{params:{responseId:a,demographicNo:r}}).then(function(t){t.data.responseDate&&(t.data.responseDate=e(t.data.responseDate).toDate()),t.data.referralDate&&(t.data.referralDate=e(t.data.referralDate).toDate()),t.data.appointmentDate&&(t.data.appointmentDate=e(t.data.appointmentDate).toDate()),t.data.followUpDate&&(t.data.followUpDate=e(t.data.followUpDate).toDate()),i.resolve(t.data)},function(e){console.log("consultService::getResponse error",e),i.reject("An error occurred while getting consult response (responseId="+a+")")}),i.promise},getResponseAttachments:function(e,a,r){var i=n.defer();return t.get(o.apiPath+"getResponseAttachments?responseId="+encodeURIComponent(e)+"&demographicNo="+encodeURIComponent(a)+"&attached="+encodeURIComponent(r)).then(function(e){i.resolve(e.data)},function(t){console.log("consultService::getResponseAttachments error",t),i.reject("An error occurred while getting consult response attachments (responseId="+e+")")}),i.promise},saveResponse:function(e){var a=n.defer();return t.post(o.apiPath+"saveResponse",e).then(function(e){a.resolve(e.data)},function(e){console.log("consultService::saveResponse error",e),a.reject("An error occurred while fetching consult response after save")}),a.promise},getReferralPathwaysByService:function(e){var a=n.defer();return t.get(o.apiPath+"getReferralPathwaysByService?serviceName="+encodeURIComponent(e)).then(function(e){a.resolve(e.data)},function(e){console.log("consultService::getReferralPathwaysByService error",e),a.reject("An error occured while fetching referral pathways")}),a.promise}};return o}])}).call(this,n(4))},function(e,t,n){"use strict";angular.module("Common.Services").service("billingService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/",getUniqueServiceTypes:function(){var a=t.defer();return e.get(n.apiPath+"billing/uniqueServiceTypes",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){a.resolve(e.data.content)},function(e){console.log("billingService::getUniqueServiceTypes error",e),a.reject("An error occured while fetching billing service types")}),a.promise},getBillingRegion:function(){var a=t.defer();return e.get(n.apiPath+"billing/billingRegion",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){a.resolve(e.data)},function(e){console.log("billingService::getBillingRegion error",errorsz),a.reject("An error occured while setting billingRegion")}),a.promise},getDefaultView:function(){var a=t.defer();return e.get(n.apiPath+"billing/defaultView",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){a.resolve(e.data)},function(e){console.log("billingService::getDefaultView error",e),a.reject("An error occured while setting defaultView")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("autoCompleteService",["$q",function(e){var t={init_autocomplete_values:function(t){var n=e.defer();return console.log(t),n.resolve({data:{patient:{data:{uuid:null,full_name:null,patient_photo_url:"/imageRenderingServlet?source=local_client&clientId=0",data:{birth_date:null,health_number:null,ontario_version_code:null,phone_number_primary:null}}}}}),n.promise}};return t}])},function(e,t,n){"use strict";angular.module("Common.Services").service("appService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/app",getApps:function(){var a=t.defer();return e({url:n.apiPath+"/getApps",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("appServices::getApps error",e),a.reject("An error occured while getting app content")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services",["Common.Util"])},function(e,t,n){"use strict";angular.module("Common.Util").service("junoHttp",["$http","$window","$q",function(e,t,n){var a={request:function(t){var o=n.defer();return e(t).then(function(e){a.success_function(e,t,o)},function(e){a.errors_function(e,t,o)},function(e){o.notify(e)}),o.promise},success_function:function(e,t,n){var a=e;try{if("SUCCESS"===a.data.status){var o={meta:angular.copy(a.data.headers),data:angular.copy(a.data.body)};n.resolve(o)}else{if("ERROR"!==a.data.status)throw"Invalid Response Status";var r={meta:angular.copy(a.data.headers),data:angular.copy(a.data.error.message)};n.reject(r)}}catch(e){r={meta:{},data:"An Error has occurred. please contact technical support"};n.reject(r)}},errors_function:function(e,t,n){n.reject(e)},call:function(e,t,n){var o={method:e,url:t,data:n};return a.request(o)},get:function(e,t){var n={method:"GET",url:e};return Juno.Common.Util.mergeHash(n,t),a.request(n)},post:function(e,t){var n={method:"POST",url:e,data:t};return a.request(n)},put:function(e,t){var n={method:"PUT",url:e,data:t};return a.request(n)},del:function(e,t){var n={method:"DELETE",url:e,data:t};return a.request(n)}};return a}])},function(e,t,n){"use strict";angular.module("Common.Util").service("angularUtil",["$window",function(e){var t={inMobileView:function(){return e.innerWidth<768}};return t}])},function(e,t,n){"use strict";angular.module("Common.Util",[])},function(e,t,n){"use strict";angular.module("Common",[])},function(e,t,n){"use strict";(function(e,t){angular.module("cpCalendar").factory("cpCalendar.Util",[function(){var n={settings:{datetime_format:"YYYY-MM-DDTHH:mm:ssZ",time_format:"h:mma",date_format:"YYYY-MM-DD",dayofweek_format:"dddd"},exists:function(e){return null!==e&&void 0!==e&&""!==e},is_integer_string:function(e){parseInt(e);return!!/^-?\d+$/.test(e.toString())},escape_html:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})},get_datetime_moment:function(t){return e.utc(t,n.settings.datetime_format,!0)},get_date_string:function(e){return e.format(n.settings.date_format)},get_date_moment:function(t){return e.utc(t,n.settings.date_format,!0)},get_time_moment:function(t){return e.utc(t,n.settings.time_format,!0)},get_date_and_time_moment:function(t,a){return e.utc(t+" "+a,n.settings.date_format+" "+n.settings.time_format,!0)},get_time_string:function(e,t){return t||(t=n.settings.time_format),e.format(t)},validate_date_string:function(e,t,a,o,r){Juno.Common.Util.exists(e)?n.get_date_moment(e).isValid()||t.add_field_error(a,o+" is invalid"):r&&t.add_field_error(a,o+"is required")},validate_time_string:function(e,t,a,o,r){Juno.Common.Util.exists(e)?n.get_time_moment(e).isValid()||t.add_field_error(a,o+"is invalid"):r&&t.add_field_error(a,o+"is required")},datetime_range_overlaps:function(e,t,n,a){return(null===t||null===n||n.isBefore(t))&&(null===a||null===e||a.isAfter(e))},sort_by_property_fn:function(e,t){return["ASC","DESC"].indexOf(t)<0&&(t="ASC"),function(n,a){return n[e]>a[e]?"ASC"==t?1:-1:n[e]<a[e]?"ASC"==t?-1:1:0}},create_availability_events:function(e,a,o,r,i){var l=n.get_datetime_moment(a.start_time),s=n.get_datetime_moment(a.end_time);l=t.fullCalendar.moment(l),s=t.fullCalendar.moment(s);var c=o[a.availability_type_uuid];n.exists(c)&&n.datetime_range_overlaps(l,s,r,i)&&n.create_background_events(e,l,s,c,a.schedule_uuid)},create_relation_events:function(t,a,o,r,i,l){for(var s=a[r.schedule_template_uuid],c=n.exists(r.start_date)?e(r.start_date):null,u=n.exists(r.end_date)?e(r.end_date):null,d=e.utc().year(i.year()).month(i.month()).date(i.date()).hour(0).minute(0).second(0).milliseconds(0);d.unix()<=l.unix();)(null===c||c.unix()<=d.unix())&&(null===u||u.unix()>=d.unix())&&n.create_template_events(t,o,s,r,d),d.add(1,"d")},create_background_events:function(e,t,a,o,r){for(var i=n.get_available_time_ranges(e,t,a),l=0;l<i.length;l++)e.push({start:i[l].start,end:i[l].end,color:o.color,rendering:"background",resourceId:r,availability_type:o})},get_available_time_ranges:function(e,t,a){var o=n.get_overlapping_events(e,t,a);if(0===o.length)return[{start:t,end:a}];for(var r=[],i={},l=0;l<o.length;l++){var s=o[l];!n.exists(i.end)&&s.start.isAfter(t)&&(i.end=s.start,n.exists(i.start)||(i.start=t)),n.exists(i.start)&&n.exists(i.end)&&i.start.isBefore(i.end)&&(r.push(angular.copy(i)),i={}),!n.exists(i.start)&&s.end.isBefore(a)&&(i.start=s.end)}return!n.exists(i.end)&&n.exists(i.start)&&(i.end=a,r.push(angular.copy(i))),r},get_overlapping_events:function(e,t,a){for(var o=[],r=0;r<e.length;r++){var i=e[r];n.datetime_range_overlaps(t,a,i.start,i.end)&&o.push(i)}return o.sort(n.sort_by_property_fn("start")),o},create_template_events:function(e,t,a,o,r){for(var i=r.format("dddd").toLowerCase(),l=[],s=0;s<a.schedule_template_days.length;s++){var c=a.schedule_template_days[s];if(i==c.day_of_the_week){l=c.schedule_template_time_periods;break}}for(var u=0;u<l.length;u++){var d=l[u],p=r.clone().hour(d.start_time.split(":")[0]).minute(d.start_time.split(":")[1]),m=r.clone().hour(d.end_time.split(":")[0]).minute(d.end_time.split(":")[1]);0===m.hour()&&0===m.minute()&&m.add(1,"day");var h=t[d.availability_type_uuid];n.exists(h)&&n.create_background_events(e,p,m,h,o.schedule_uuid)}}};return n}])}).call(this,n(4),n(0))},function(e,t,n){"use strict";(function(e,t){angular.module("cpCalendar").controller("cpCalendar.EventController",["$scope","$q","$timeout","$state","$uibModalInstance","errorsService","cpCalendar.Util","access_control","key_binding","focus","type","parent_scope","label","edit_mode","data",function(n,a,o,r,i,l,s,c,u,d,p,m,h,g,f){n.parent_scope=m,n.access_control=c,n.label=h,n.edit_mode=g,n.key_binding=u,n.event_uuid=f.uuid,n.num_invoices=f.num_invoices,n.tag_names=f.tag_names,n.schedule=f.schedule,n.availability_types=f.availability_types,n.schedule_templates=f.schedule_templates,n.event_data={start_time:null,end_time:null,reason:null,description:null},n.time_interval=f.time_interval,n.start_date=null,n.start_time=null,n.end_date=null,n.end_time=null,n.last_event_length=null,n.patient=m.calendar_api_adapter.patient_model,n.autocomplete_values={},n.active_template_events=[],n.event_statuses=n.parent_scope.event_statuses,n.event_status_options=[],n.selected_event_status=null,n.default_event_status=null,n.selected_site_name=null,n.timepicker_format="h:mm A",n.field_value_mapping={start_date:"Start Date",start_time:"Start Time",end_date:"End Date",end_time:"End Time"},n.display_messages=l.factory(),n.initialized=!1,n.working=!1,n.init=function(){c.has_permission("scheduling_create")||o(function(){n.cancel()});var t=e(f.start_time),a=e(f.end_time);for(var r in n.start_time=s.get_time_string(t,n.timepicker_format),n.end_time=s.get_time_string(a,n.timepicker_format),n.start_date=s.get_date_string(t),n.end_date=s.get_date_string(a),n.last_event_length=a.diff(t,"minutes"),n.set_active_template_events(),n.event_statuses)n.event_statuses.hasOwnProperty(r)&&n.event_status_options.push(n.event_statuses[r]);n.default_event_status=f.default_event_status,n.set_selected_event_status(f.event_status_uuid),g?(n.event_data.reason=f.reason,n.event_data.description=f.description,n.patient.uuid=f.demographics_patient_uuid,n.init_patient_autocomplete().then(function(){n.initialized=!0})):(n.adjust_end_datetime(),n.patient.clear(),d.element("#input-patient"),n.initialized=!0)},n.init_patient_autocomplete=function(){var e=a.defer();return console.log(n.patient),s.exists(n.patient.uuid)&&0!=n.patient.uuid?m.autocomplete.init_autocomplete_values({patient:n.patient.uuid},n.autocomplete_values).then(function(t){console.log(t),n.autocomplete_values=t.data,n.patient.fill_data(n.autocomplete_values.patient.data),e.resolve()},function(t){console.log("error initializing patient autocomplete",t),n.patient.clear(),e.resolve()}):(n.patient.clear(),e.resolve()),e.promise},n.get_inclusive_days=function(e,t){for(var n=[],a=e.clone().hour(0).minute(0);a.isBefore(t);)n.push(a.clone()),a.add(1,"day");return n},n.set_selected_event_status=function(e){var t=n.default_event_status;s.exists(e)&&(t=e),s.exists(t)&&s.exists(n.event_statuses[t])||(t=n.event_status_options[0].uuid),n.selected_event_status=n.event_statuses[t]},n.set_active_template_events=function(){var e=[],a=s.get_date_and_time_moment(n.start_date,n.formatted_time(n.start_time)),o=s.get_date_and_time_moment(n.end_date,n.formatted_time(n.end_time));if(a.isValid()&&o.isValid()){var r=s.get_date_moment(n.start_date),i=s.get_date_moment(n.end_date).add(1,"day");if(s.exists(n.schedule.availabilities))for(var l=0;l<n.schedule.availabilities.length;l++)s.create_availability_events(e,n.schedule.availabilities[l],n.availability_types,r,i);if(s.exists(n.schedule.relations))for(var c=0;c<n.schedule.relations.length;c++)s.create_relation_events(e,n.schedule_templates,n.availability_types,n.schedule.relations[c],r,i);(e=t.grep(e,function(e){return e.start.isBefore(o)&&e.end.isAfter(a)})).sort(function(e,t){return e.availability_type.system_code===t.availability_type.system_code?e.start.unix()-t.start.unix():e.availability_type.system_code-t.availability_type.system_code}),n.active_template_events=e}},n.adjust_end_datetime=function(e){var t=s.get_date_and_time_moment(n.start_date,n.formatted_time(n.start_time));if(t.isValid()){var a=s.exists(e)?e:n.last_event_length,o=t.add(a,"minutes");n.end_date=s.get_date_string(o),n.end_time=s.get_time_string(o,n.timepicker_format)}},n.update_last_event_length=function(){var e=s.get_date_and_time_moment(n.start_date,n.formatted_time(n.start_time)),t=s.get_date_and_time_moment(n.end_date,n.formatted_time(n.end_time));if(e.isValid()&&t.isValid()){var a=t.diff(e,"minutes");a>0&&(n.last_event_length=a)}},n.validate_form=function(){if(n.display_messages.clear(),s.validate_date_string(n.start_date,n.display_messages,"start_date","Start Time",!0),s.validate_time_string(n.formatted_time(n.start_time),n.display_messages,"start_time","Start Time",!0),s.validate_date_string(n.end_date,n.display_messages,"end_date","End Time",!0),s.validate_time_string(n.formatted_time(n.end_time),n.display_messages,"end_time","End Time",!0),!n.display_messages.has_errors()){var e=s.get_date_and_time_moment(n.start_date,n.formatted_time(n.start_time)),t=s.get_date_and_time_moment(n.end_date,n.formatted_time(n.end_time));(t.isSame(e)||t.isBefore(e))&&n.display_messages.add_standard_error("The appointment must end after it starts")}return!n.display_messages.has_errors()},n.save_event=function(){var e=a.defer(),t=s.get_date_and_time_moment(n.start_date,n.formatted_time(n.start_time)),o=s.get_date_and_time_moment(n.end_date,n.formatted_time(n.end_time));return m.calendar_api_adapter.save_event(g,n.event_uuid,t,o,n.event_data,n.schedule.uuid,n.selected_event_status.uuid,n.patient.uuid,n.selected_site_name).then(function(t){m.calendar_api_adapter.process_save_results(t,n.display_messages)?e.resolve(t):e.reject(t)},function(t){m.calendar_api_adapter.process_save_results(t,n.display_messages),e.reject()}),e.promise},n.delete_event=function(){var e=a.defer();return m.calendar_api_adapter.delete_event(n.event_uuid).then(function(){e.resolve()},function(){e.reject()}),e.promise},n.formatted_time=function(e){return e.replace(/ /g,"")},n.$watch("start_date",function(e,t){e!==t&&(n.set_active_template_events(),n.adjust_end_datetime())}),n.$watch("start_time",function(e,t){e!==t&&(n.set_active_template_events(),n.adjust_end_datetime())}),n.$watch("end_date",function(e,t){e!==t&&(n.set_active_template_events(),n.update_last_event_length())}),n.$watch("end_time",function(e,t){e!==t&&(n.set_active_template_events(),n.update_last_event_length())}),n.loaded_new_photo=function(e,t){null!=e&&(n.preview_patient_image=e,n.new_photo=!0,n.patient.has_photo=!0,n.patient.upload_photo(e))},n.is_working=function(){return n.working},n.is_initialized=function(){return n.initialized},n.is_patient_selected=function(){return s.exists(n.patient.uuid)},n.clear_patient=function(){n.autocomplete_values.patient=null,n.patient.clear()},n.on_select_patient=function(e,t,a,o){n.patient.uuid=e.data[e.value_field],n.patient.fill_data(e.data)},n.set_event_length=function(e){n.adjust_end_datetime(e)},n.save=function(){if(!n.validate_form())return!1;n.working=!0,n.save_event().then(function(){n.parent_scope.refetch_events(),i.close(),n.working=!1},function(){n.display_messages.has_standard_errors()||n.display_messages.add_generic_fatal_error(),n.working=!1})},n.delete=function(){n.working=!0,n.delete_event().then(function(){n.parent_scope.refetch_events(),i.close(),n.working=!1},function(){n.display_messages.add_generic_fatal_error(),n.working=!1})},n.cancel=function(){i.dismiss("cancel")},n.save_and_bill=function(){if(!n.validate_form())return!1;n.working=!0,n.save_event().then(function(){n.parent_scope.refetch_events(),i.close(),n.working=!1,n.parent_scope.open_create_invoice(n.event_uuid,n.schedule.uuid,n.patient.uuid)},function(){n.display_messages.add_generic_fatal_error(),n.working=!1})},n.view_invoices=function(){n.parent_scope.open_view_invoices(n.event_uuid)},n.create_patient=function(){n.create_patient_dialog=m.calendar_api_adapter.open_patient_dialog(function(){return!1},function(){return n.on_patient_modal_save},function(){return n.on_patient_modal_save})},n.modify_patient=function(){if(n.patient.uuid){n.modify_patient_dialog=m.calendar_api_adapter.open_patient_dialog(function(){return!0},function(){return n.on_patient_modal_save},function(){return n.on_patient_modal_save})}},n.on_patient_modal_save=function(e){n.patient.uuid=e,n.init_patient_autocomplete()},n.key_bind_settings={"ctrl+enter":{title:"Ctrl+Enter",tooltip:"Save",description:"Save appointment",callback_fn:function(){n.is_working()||n.save()},target:null},"ctrl+shift+enter":{title:"Ctrl+Shift+Enter",tooltip:"Save And Bill",description:"Save and bill for appointment",callback_fn:function(){n.is_working()||n.save_and_bill()},target:null}},n.key_binding.bind_key_global("ctrl+enter",n.key_bind_settings["ctrl+enter"]),n.key_binding.bind_key_global("ctrl+shift+enter",n.key_bind_settings["ctrl+shift+enter"])}])}).call(this,n(4),n(0))},function(e,t,n){(function(e,t){angular.module("cpCalendar").controller("cpCalendar.Controller",["$scope","$q","$stateParams","$uibModal","$window","cpCalendar.Util","uiCalendarConfig",function(n,a,o,r,i,l,s){(n.availability_type_model=null,n.calendar_name="cpCalendar",n.event_sources=[],n.min_height=650,n.default_calendar_view="agendaWeek",n.default_time_interval="00:15:00",n.default_event_color="#333",n.default_auto_refresh_minutes=3,n.time_interval_options=["00:05:00","00:10:00","00:15:00","00:30:00"],n.selected_time_interval=n.default_time_interval,n.default_date=null,o.default_date)&&(l.get_date_moment(o.default_date).isValid()&&(n.default_date=l.get_date_moment(o.default_date)));n.selected_schedule=null,n.selected_site_name=null,n.schedule_options=[],n.resource_options=[],n.resource_option_hash={},n.selected_resources=[],n.event_statuses={},n.sites={},n.site_options=[],n.rotate_statuses=[],n.availability_types={},n.schedule_templates={},n.schedules=[],n.events=[],n.calendar_loading=!1,n.initialized=!1,n.opening_dialog=!1,n.dialog=null,n.calendar=function(){return s.calendars[n.calendar_name]},n.is_initialized=function(){return n.initialized},n.show_schedule_select=function(){return"resourceDay"!==n.view_name()},n.show_time_intervals=function(){return"month"!==n.view_name()},n.init=function(){n.default_date=n.global_state.selected_date,n.ui_config.calendar.schedulerlicensekey="0752822575-fcs-1459294728",n.ui_config.calendar.defaultView=n.calendar_view_name(),n.load_schedule_templates().then(n.load_availability_types).then(n.load_event_statuses).then(n.load_schedule_options).then(n.load_site_options).then(n.load_default_selections).then(n.load_selected_schedules).then(n.set_calendar_resources).then(n.set_event_sources).then(n.init_events_auto_refresh).then(function(){n.initialized=!0})},n.init_events_auto_refresh=function(){var e=n.get_global_state("schedule_auto_refresh");null!==e&&clearInterval(e);var t=n.get_global_preference_setting("schedule_auto_refresh_minutes");(t=l.exists(t)&&l.is_integer_string(t)?parseInt(t):n.default_auto_refresh_minutes)>0&&n.save_global_state("schedule_auto_refresh",setInterval(n.refetch_events,60*t*1e3))},n.get_global_preference_setting=function(e){return l.exists(n.global_state.preferences)&&l.exists(n.global_state.preferences.settings)?n.global_state.preferences.settings[e]:null},n.get_global_state=function(e){var t=n.global_state[e];return l.exists(t)||(t=null),t},n.save_global_state=function(e,t){n.global_state[e]=t},n.on_schedule_changed=function(e,t){if(l.exists(e)){var a=e.uuid;n.save_global_state("schedule_default",a),n.selected_schedule=n.calendar_api_adapter.get_selected_schedule(n.schedule_options),l.exists(t)?n.selected_site_name=t:n.selected_site_name=null,n.load_selected_schedules().then(n.refetch_events)}},n.on_time_interval_changed=function(){n.save_global_state("schedule_time_interval",n.selected_time_interval),n.ui_config.calendar.slotDuration=n.selected_time_interval,n.ui_config.calendar.slotLabelInterval=n.selected_time_interval},n.on_resources_changed=function(e){n.save_global_state("schedule_resources",e);for(var t=[],a=0;a<n.resource_options.length;a++){var o=n.resource_options[a];e.indexOf(o.uuid)>-1&&(o.name=o.display_name,t.push(o))}n.selected_resources=t,n.load_selected_schedules().then(n.set_calendar_resources)},n.on_view_render=function(){n.is_initialized()&&n.calendar()&&(n.global_state.selected_date=e(l.get_date_string(e(n.calendar().fullCalendar("getDate"))))),t("#ca-calendar").css("min-width",125*t(".fc-resource-cell").length)},n.after_render=function(){t(".fc-agendaDay-button").click(function(){t("#schedule_container").css("min-width",125*t(".fc-resource-cell").length)})},n.on_event_clicked=function(e,a,o){console.log(a.target),t(a.target).is(".event-status.rotate")?n.rotate_event_status(e):t(a.target).is(".event-invoice.edit")?n.open_view_invoices(e.data.uuid):t(a.target).is(".event-invoice")?n.open_create_invoice(e.data.uuid,e.data.schedule_uuid,e.data.demographics_patient_uuid):t(a.target).is(".event-demographic")||t(a.target).parent().is(".event-demographic")?n.open_patient_demographic(e):t(a.target).is(".event-note")||t(a.target).parent().is(".event-note")?n.open_create_chart_note(e):n.open_edit_event_dialog(e)},n.on_event_drop=function(e,t,a,o,r,i){n.access_control.has_permission("scheduling_create")?(n.set_calendar_loading(!0),n.calendar_api_adapter.drop_event(e.data.uuid,e.resourceId,t).then(function(t){e.data.start_time=t.start_time,e.data.end_time=t.end_time,e.data.schedule_uuid=t.schedule_uuid,n.update_event(e),n.set_calendar_loading(!1)},function(e){console.log("failed to save event",e),a(),n.set_calendar_loading(!1)})):a()},n.on_event_resize=function(e,t,a,o,r,i){n.access_control.has_permission("scheduling_create")?(n.set_calendar_loading(!0),n.calendar_api_adapter.resize_event(e.data.uuid,t).then(function(t){e.data.end_time=t.end_time,n.update_event(e),n.set_calendar_loading(!1)},function(e){console.log("failed to resize event",e),a(),n.set_calendar_loading(!1)})):a()},n.get_icon_path=function(e,t){if(!l.exists(e))return"";var n="";return l.exists(t)&&(n=t),"../images/"+n+e},n.on_event_render=function(e,a,o){if("background"!==e.rendering){var r="",i=n.sites[e.data.site];l.exists(i)&&(r+="<span style='background-color: "+i.color+"'>&nbsp;</span>");var s="",c=n.event_statuses[e.data.event_status_uuid];if(l.exists(c)&&l.exists(c.icon)&&l.exists(e)&&l.exists(e.data))s+="<img src='"+n.get_icon_path(c.icon,e.data.event_status_modifier)+"' />";else if(s='<span class="event-status',l.exists(c))l.exists(c.sort_order)&&(s+=" rotate "),s+='" title="'+l.escape_html(c.name)+'">'+l.escape_html(c.display_letter)+"</span>";else s+='" title="Unknown">?</span>';var u='<span class="event-invoice';e.data.num_invoices>0?u+=' edit" title="View Invoice'+(e.data.num_invoices>1?"s":"")+'">B</span>':u+='" title="Create Invoice">$</span>';var d="";l.exists(e.data.demographics_patient_name)?(d=l.escape_html(e.data.demographics_patient_name),l.exists(e.data.reason)&&(d+=" ("+l.escape_html(e.data.reason)+")")):l.exists(e.data.reason)&&(d=l.escape_html(e.data.reason));var p="<span class='event-details' title='"+d+"'>"+d+"</span>",m="";n.access_control.has_one_of_permissions(["patient_view","patient_manage"])&&l.exists(e.data.demographics_patient_uuid)&&(m='<span class="event-demographic" title="View Patient"><i class="fa fa-user"></i></span>');var h="";n.access_control.has_one_of_permissions(["chart_note_view","chart_note_manage"])&&l.exists(e.data.demographics_patient_uuid)&&(h='<span class="event-note" title="Add Patient Note"><i class="fa fa-file-text-o"></i></span>');var g="",f=a.hasClass("text-light")?"icon-white":"";l.exists(e.data.tag_names)&&(g='<span class="event-tags" title="'+e.data.tag_names.join(", ")+'"><i class="icon '+f+' icon-tags"/></span>'),t(a).find(".fc-content").html(r+s+u+m+h+g+p)}},n.change_view=function(e){var t=!1;"resourceDay"!==e&&"resourceDay"!==n.get_global_state("schedule_view_name")||(t=!0),n.save_global_state("schedule_view_name",e),t?n.load_selected_schedules().then(function(){n.set_calendar_resources(),n.update_calendar_view()}):n.update_calendar_view()},n.select_resources=function(){if(!n.opening_dialog&&!n.dialog){n.opening_dialog=!0;for(var e=[],t=0;t<n.selected_resources.length;t++)e.push(n.selected_resources[t].uuid);n.dialog=r.open({animation:!1,backdrop:"static",controller:"Schedule.SelectResourcesController",templateUrl:"code/schedule/select_resources.html",resolve:{resource_options:function(){return n.resource_options},selected_resources:function(){return e},on_update_callback:function(){return n.on_resources_changed}}}),n.dialog.closed.then(function(){n.dialog=null}),n.opening_dialog=!1}},n.show_legend=function(){if(!n.opening_dialog&&!n.dialog){n.opening_dialog=!0;var e={event_statuses:n.event_statuses,availability_types:n.availability_types};n.dialog=r.open({animation:!1,backdrop:"static",controller:"Schedule.LegendController",templateUrl:"code/schedule/legend.html",resolve:{data:function(){return e}}}),n.dialog.closed.then(function(){n.dialog=null}),n.opening_dialog=!1}},n.refetch_events=function(){n.calendar().fullCalendar("refetchEvents")},n.update_event=function(e){n.calendar().fullCalendar("updateEvent",e)},n.update_calendar_view=function(){n.ui_config.calendar.defaultView=n.calendar_view_name()},n.open_create_event_dialog=function(e,t,a,o,i){if(n.access_control.has_permission("scheduling_create")&&!n.opening_dialog&&!n.dialog){n.opening_dialog=!0;var s=null,c="";l.exists(i)?(s=i.id,c=i.display_name):null!==n.selected_schedule&&(s=n.selected_schedule.uuid);var u=n.get_loaded_schedule(s);if(null!==u){var d=u.new_event_status_uuid,p=angular.copy(u);p.display_name=c;var m={schedule:p,default_event_status:d,start_time:e,end_time:t,time_interval:n.time_interval_minutes(),schedule_templates:n.schedule_templates,availability_types:n.availability_types,sites:n.sites};n.dialog=r.open({animation:!1,backdrop:"static",controller:"cpCalendar.EventController",templateUrl:"src/schedule/event.jsp",resolve:{type:[function(){return"create_edit_event"}],label:[function(){return"Appointment"}],parent_scope:[function(){return n}],data:[function(){return m}],edit_mode:[function(){return!1}],access_control:[function(){return n.access_control}],key_binding:[function(){return{bind_key_global:function(){}}}],focus:[function(){return n.calendar_api_adapter.focus}]}}),n.dialog.result.catch(function(e){if("cancel"!==e&&"escape key press"!==e)throw e}),n.dialog.closed.then(function(){n.dialog=null})}n.opening_dialog=!1}},n.open_edit_event_dialog=function(e){if(n.access_control.has_permission("scheduling_create")&&!n.opening_dialog&&!n.dialog){n.opening_dialog=!0;var t=angular.extend({},e.data);t.start_time=l.get_datetime_moment(e.data.start_time),t.end_time=l.get_datetime_moment(e.data.end_time),t.num_invoices=e.data.num_invoices,t.schedule=n.get_loaded_schedule(e.data.schedule_uuid),t.time_interval=n.time_interval_minutes(),t.schedule_templates=n.schedule_templates,t.availability_types=n.availability_types,n.dialog=r.open({animation:!1,backdrop:"static",controller:"cpCalendar.EventController",templateUrl:"src/schedule/event.jsp",resolve:{type:function(){return"create_edit_event"},label:function(){return"Appointment"},parent_scope:function(){return n},data:function(){return t},edit_mode:function(){return!0},access_control:function(){return n.access_control},key_binding:function(){return{bind_key_global:function(){}}},focus:function(){return n.calendar_api_adapter.focus}}}),n.dialog.closed.then(function(){n.dialog=null}),n.opening_dialog=!1}},n.rotate_event_status=function(e){n.access_control.has_permission("scheduling_create")&&(n.set_calendar_loading(!0),n.calendar_api_adapter.rotate_event_status(e.data.uuid,n.rotate_statuses).then(function(t){var a=t.event_status_uuid,o=n.event_statuses[a]?n.event_statuses[a].color:n.default_event_color;e.data.event_status_uuid=a,e.color=o,e.className=[n.calendar_api_adapter.event_class(o)],n.update_event(e),n.set_calendar_loading(!1)}))},n.open_create_invoice=function(e,t,a){var o=n.get_loaded_schedule(t),r=n.calendar_api_adapter.get_create_invoice_url(e,o.demographics_practitioner_uuid,a);window.window_scope=n,i.open(r,"_blank")},n.open_patient_demographic=function(e){var t=n.calendar_api_adapter.get_patient_demographic_url(e);i.open(t,"_blank")},n.open_create_chart_note=function(e){var t=n.calendar_api_adapter.get_create_chart_note_url(e);i.open(t,"_blank")},n.get_schedule_height=function(){n.calendar_api_adapter&&n.calendar_api_adapter.get_schedule_height()},n.calendar_view_name=function(){var e=n.view_name();return"resourceDay"==e&&(e="agendaDay"),e},n.set_calendar_loading=function(e){n.calendar_loading=e},n.get_loaded_schedule=function(e){for(var t=null,a=0;a<n.schedules.length;a++)if(n.schedules[a].uuid===e){t=n.schedules[a];break}return t},n.view_name=function(){var e=n.get_global_state("schedule_view_name");return l.exists(e)||(e=n.get_global_preference_setting("schedule_view_name")),l.exists(e)||(e=n.default_calendar_view),n.save_global_state("schedule_view_name",e),e},n.calendar_events=function(e,t,o,r){for(var i=[],l=0;l<n.schedules.length;l++)i.push(n.calendar_api_adapter.load_schedule_events(n.schedules[l],n.selected_site_name,e,t,n.view_name(),n.schedule_templates,n.event_statuses,n.default_event_color,n.availability_types));a.all(i).then(function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].data);n.events=Array.prototype.concat.apply([],t);try{r(n.events)}catch(e){}})},n.load_schedule_templates=function(){var e=a.defer();return n.calendar_api_adapter.load_schedule_templates().then(function(t){n.schedule_templates=t,e.resolve(n.schedule_templates)}),e.promise},n.load_availability_types=function(){var e=a.defer();return n.calendar_api_adapter.load_availability_types().then(function(t){n.availability_types=t,e.resolve(n.availability_types)}),e.promise},n.load_event_statuses=function(){var e=a.defer();return n.event_statuses={},n.rotate_statuses=[],n.calendar_api_adapter.load_event_statuses().then(function(t){for(var a=0;a<t.length;a++){var o=t[a];n.event_statuses[o.uuid]=o,o.rotates&&n.rotate_statuses.push(o)}e.resolve(t)}),e.promise},n.load_site_options=function(){var e=a.defer();return n.calendar_api_adapter.load_sites().then(function(t){if(n.sites={},n.site_options=[],angular.isArray(t)&&t.length>0){for(var a=0;a<t.length;a++)n.sites[t[a].name]=t[a];n.site_options=[{uuid:null,name:null,display_name:"All"}],n.site_options=n.site_options.concat(t)}e.resolve(t)}),e.promise},n.load_schedule_options=function(){var e=a.defer();return n.calendar_api_adapter.load_schedule_options().then(function(t){for(var a=0;a<t.length;a++){var o=t[a];if(n.schedule_options.push(o),angular.isArray(o.providerNos)&&1==o.providerNos.length&&o.providerNos[0].toString()==o.identifier){var r=o.providerNos[0];n.resource_option_hash[r]={id:r,uuid:r,name:r,title:o.name,display_name:o.name}}}e.resolve(t)}),e.promise},n.build_selected_resources=function(e){for(var t=[],a=0;a<e.length;a++)t.push(n.resource_option_hash[e[a]]);return t},n.load_selected_schedules=function(){var e=a.defer(),t=[];return l.exists(n.selected_schedule.providerNos)&&angular.isArray(n.selected_schedule.providerNos)?(angular.forEach(n.selected_schedule.providerNos,function(e){t.push(n.calendar_api_adapter.load_schedule(e.toString()))}),n.selected_schedule.providerNos.length>1?(n.selected_resources=n.build_selected_resources(n.selected_schedule.providerNos),n.ui_config.calendar.resources=n.selected_resources,n.ui_config.calendar.defaultView="resourceDay",n.save_global_state("schedule_view_name","resourceDay"),n.update_calendar_view()):(n.ui_config.calendar.defaultView="agendaWeek",n.save_global_state("schedule_view_name","agendaWeek"),n.ui_config.calendar.resources=!1)):"resourceDay"!==n.view_name()&&null!==n.selected_schedule?t.push(n.calendar_api_adapter.load_schedule(n.selected_schedule.uuid)):angular.forEach(n.selected_resources,function(e){t.push(n.calendar_api_adapter.load_schedule(e.uuid))}),a.all(t).then(function(t){n.schedules=[];for(var a=0;a<t.length;a++)n.schedules[a]=t[a].data;e.resolve(t)},function(e){console.log("errors")}),e.promise},n.set_schedule_hour_range=function(){var t=n.get_global_preference_setting("schedule_min_time");l.exists(t)&&(n.ui_config.calendar.minTime=t+":00");var a=n.get_global_preference_setting("schedule_max_time");l.exists(a)&&(n.ui_config.calendar.maxTime=a+":00"),n.ui_config.calendar.scrollTime=e().subtract(1,"hours").format("HH:mm:ss")},n.load_default_selections=function(){n.selected_schedule=n.calendar_api_adapter.get_selected_schedule(n.schedule_options),n.selected_resources=n.calendar_api_adapter.get_selected_resources(n.resource_options),n.selected_time_interval=n.calendar_api_adapter.get_selected_time_interval(n.time_interval_options,n.default_time_interval),n.ui_config.calendar.slotDuration=n.selected_time_interval,n.ui_config.calendar.slotLabelInterval=n.selected_time_interval,n.ui_config.calendar.minTime=n.calendar_api_adapter.get_schedule_min_time(),n.ui_config.calendar.maxTime=n.calendar_api_adapter.get_schedule_max_time(),n.ui_config.calendar.scrollTime=e().subtract(1,"hours").format("HH:mm:ss")},n.set_calendar_resources=function(){"resourceDay"===n.view_name()?n.ui_config.calendar.resources=n.selected_resources:n.ui_config.calendar.resources=!1},n.set_event_sources=function(){n.event_sources.push(n.calendar_events)},n.time_interval_minutes=function(){return parseInt(n.selected_time_interval.split(":")[1])},n.create_invoice_callback=function(){n.calendar()&&n.refetch_events()},n.open_view_invoices=function(e){i.open("#/invoice/list?schedule_event_uuid="+encodeURIComponent(e),"_blank")},n.$watch(function(){return n.global_state.selected_date},function(e){n.calendar()&&n.calendar().fullCalendar("gotoDate",e)}),n.ui_config={calendar:{height:n.get_schedule_height(),nowIndicator:!0,header:{left:"title",center:"",right:"today prev,next"},allDaySlot:!1,defaultView:null,defaultDate:n.default_date,slotDuration:n.selected_time_interval,slotLabelInterval:n.selected_time_interval,slotLabelFormat:"h:mma",loading:n.set_calendar_loading,selectable:!0,select:n.open_create_event_dialog,eventClick:n.on_event_clicked,eventRender:n.on_event_render,viewRender:n.on_view_render,eventAfterAllRender:n.after_render,editable:!0,eventDrop:n.on_event_drop,eventResize:n.on_event_resize}}}])}).call(this,n(4),n(0))},function(e,t){angular.module("cpCalendar").directive("cpCalendar",["$parse","$injector","$timeout",function(e,t,n){return{restrict:"A",scope:{ui_config:"=cpCalendar",control:"=cpCalendarControl",selected_schedule:"=cpCalendarSelectedSchedule",selected_time_interval:"=cpCalendarSelectedTimeInterval",calendarWatchEvent:"&"},controller:"cpCalendar.Controller",template:'<div><div id="cp-calendar" class="calendar" ng-model="event_sources" calendar="cpCalendar" ui-calendar="ui_config.calendar"></div></div>',replace:!0,link:function(a,o,r,i){this.is_initialized=function(){return a.is_initialized()},this.has_schedules=function(){return a.schedules.length>0},this.has_sites=function(){return a.site_options.length>0},this.get_schedule_options=function(){return a.schedule_options},this.get_site_options=function(){return a.site_options},this.on_schedule_changed=function(e,t){return a.on_schedule_changed(e,t)},this.change_view=function(e){return a.change_view(e)},this.view_name=function(){return a.view_name()},this.get_time_interval_options=function(){return a.time_interval_options},this.show_legend=function(){return a.show_legend()},e(r.cpCalendarControl).assign(a.$parent,this),a.calendar_api_adapter=t.get(r.cpCalendarCalendarApiAdapter),a.access_control=t.get(r.cpCalendarAccessControl),a.autocomplete=t.get(r.cpCalendarAutoComplete),a.global_state=t.get(r.cpCalendarGlobalState),a.patient_model=t.get(r.cpCalendarPatientModel),n(function(){a.init()})}}}])},function(e,t,n){"use strict";angular.module("cpCalendar",["Common"])},,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(0),n(288),n(282),n(57),n(279),n(4),n(16),n(275),n(273),n(251),n(250),n(249),n(247),n(245),n(243),n(242),n(240),n(238),n(237),n(235),n(233),n(232),n(230),n(229),n(228),n(226),angular.module("oscarProviderViewModule",["ui.router","ui.router.state.events","ngResource","ui.bootstrap","ui.calendar","cpCalendar","angular-loading-bar","ngTable","ngStorage","Common","Common.Services","Common.Filters","Common.Directives","Common.Util","Layout","Tickler","Record","Record.Summary","Record.Tracker","Record.Details","Record.PHR","Record.Forms","Schedule","Settings","Report","Patient","Patient.Search","PatientList","Inbox","Help","Document","Dashboard","Consults","Admin","Admin.Integration","Admin.Integration.Know2act"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/dashboard"),e.state("dashboardManager",{url:"/dashboard/admin",templateUrl:"src/dashboard/admin/DashboardManager.jsp",controller:"dashboardManagerController"}).state("dashboard",{url:"/dashboard",templateUrl:"src/dashboard/dashboard.jsp",controller:"Dashboard.DashboardController"}).state("inbox",{url:"/inbox",templateUrl:"src/inbox/inbox_popup.jsp",controller:"Inbox.InboxController"}).state("consultRequests",{url:"/consults",templateUrl:"src/consults/consultRequestList.jsp",controller:"Consults.ConsultRequestListController as consultRequestListCtrl"}).state("consultResponses",{url:"/consultResponses",templateUrl:"src/consults/consultResponseList.jsp",controller:"Consults.ConsultResponseListController as consultResponseListCtrl"}).state("billing",{url:"/billing",templateUrl:"src/billing/billing_popup.jsp",controller:"BillingCtrl"}).state("schedule",{url:"/schedule",templateUrl:"src/schedule/view.jsp",controller:"Schedule.ScheduleController"}).state("admin",{url:"/admin",templateUrl:"src/admin/admin_popup.jsp",controller:"AdminCtrl"}).state("ticklers",{url:"/ticklers",templateUrl:"src/tickler/ticklerList.jsp",controller:"Tickler.TicklerListController as ticklerListCtrl",resolve:{providers:["providerService",function(e){return e.searchProviders({active:!0})}]}}).state("search",{url:"/search",templateUrl:"src/patient/search/patientSearch.jsp",controller:"Patient.Search.PatientSearchController as patientSearchCtrl",params:{term:null}}).state("reports",{url:"/reports",templateUrl:"src/report/reports.jsp",controller:"Report.ReportsController as reportsCtrl"}).state("documents",{url:"/documents",templateUrl:"src/document/documents_classic.jsp",controller:"Document.DocumentsController"}).state("settings",{url:"/settings",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",resolve:{user:["providerService",function(e){return e.getMe()}],billingServiceTypes:["billingService",function(e){return e.getUniqueServiceTypes()}],providerList:["providerService",function(e){return e.searchProviders({active:!0})}],loadedSettings:["providerService",function(e){return e.getSettings()}],encounterForms:["formService",function(e){return e.getAllEncounterForms()}],eforms:["formService",function(e){return e.getAllEForms()}],teams:["providerService",function(e){return e.getActiveTeams()}],groupNames:["formService",function(e){return e.getGroupNames()}],loadedApps:["appService",function(e){return e.getApps()}]}}).state("settings.persona",{url:"/persona",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"persona"}}).state("settings.general",{url:"/general",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"general"}}).state("settings.schedule",{url:"/schedule",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"schedule"}}).state("settings.billing",{url:"/billing",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"billing"}}).state("settings.rx",{url:"/rx",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"rx"}}).state("settings.masterdemo",{url:"/masterdemo",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"masterdemo"}}).state("settings.consults",{url:"/consults",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"consults"}}).state("settings.documents",{url:"/documents",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"documents"}}).state("settings.summary",{url:"/summary",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"summary"}}).state("settings.eforms",{url:"/eforms",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"eforms"}}).state("settings.inbox",{url:"/inbox",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"inbox"}}).state("settings.programs",{url:"/programs",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"programs"}}).state("settings.integration",{url:"/integration",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"integration"}}).state("support",{url:"/support",templateUrl:"src/help/support.jsp",controller:"Help.SupportController"}).state("help",{url:"/help",templateUrl:"src/help/help.jsp",controller:"Help.HelpController"}).state("record",{url:"/record/:demographicNo",templateUrl:"src/record/record.jsp",controller:"Record.RecordController as recordCtrl",resolve:{demo:["$stateParams","demographicService",function(e,t){return t.getDemographic(e.demographicNo)}],user:["providerService",function(e){return e.getMe()}],properties:["uxService",function(e){return e.getDisplayProperties()}]}}).state("record.details",{url:"/details",templateUrl:"src/record/details/details.jsp",controller:"Record.Details.DetailsController as detailsCtrl"}).state("record.summary",{url:"/summary?appointmentNo&encType",templateUrl:"src/record/summary/summary.jsp",controller:"Record.Summary.SummaryController as summaryCtrl"}).state("record.forms",{url:"/forms",templateUrl:"src/record/forms/forms.jsp",controller:"Record.Forms.FormController as formCtrl",params:{formListId:0}}).state("record.forms.view",{url:"/view/:type/:id?name",templateUrl:"src/record/forms/forms.jsp",params:{name:{dynamic:!0}},controller:"Record.Forms.FormController as formCtrl"}).state("record.forms.add",{url:"/add/:type/:id",templateUrl:"src/record/forms/forms.jsp",controller:"Record.Forms.FormController as formCtrl"}).state("record.consultRequests",{url:"/consults",templateUrl:"src/consults/consultRequestList.jsp",controller:"Consults.ConsultRequestListController as consultRequestListCtrl"}).state("record.consultResponses",{url:"/consultResponses",templateUrl:"src/consults/consultResponseList.jsp",controller:"Consults.ConsultResponseListController as consultResponseListCtrl"}).state("record.consultRequest",{url:"/consult/:requestId",templateUrl:"src/consults/consultRequest.jsp",controller:"Consults.ConsultRequestController as consultRequestCtrl",resolve:{consult:["$stateParams","consultService",function(e,t){return"new"===e.requestId?t.getNewRequest(e.demographicNo):t.getRequest(e.requestId)}],user:["providerService",function(e){return e.getMe()}]}}).state("record.consultResponse",{url:"/consultResponse/:responseId",templateUrl:"src/consults/consultResponse.jsp",controller:"Consults.ConsultResponseController as consultResponseCtrl",resolve:{consult:["$stateParams","consultService",function(e,t){return t.getResponse(e.responseId,e.demographicNo)}],user:["providerService",function(e){return e.getMe()}]}}).state("record.tickler",{url:"/tickler",templateUrl:"src/tickler/ticklerList.jsp",controller:"Tickler.TicklerListController as ticklerListCtrl",resolve:{providers:["providerService",function(e){return e.searchProviders({active:!0})}]}}).state("record.tracker",{url:"/tracker",templateUrl:"src/record/tracker/tracker.jsp",controller:"Record.Tracker.TrackerController as trackerCtrl"}).state("record.phr",{url:"/phr",templateUrl:"src/record/phr/phr.jsp",controller:"Record.PHR.PHRController as phrCtrl"}).state("k2aConfig",{url:"/k2aConfig",templateUrl:"src/admin/integration/know2act/Know2actConfiguration.jsp",controller:"Admin.Integration.Know2act.k2aConfigController as k2aConfigCtrl"}).state("k2aTemplate",{url:"/k2aTemplate",templateUrl:"src/admin/integration/know2act/Know2actTemplate.jsp",controller:"Admin.Integration.Know2act.k2aTemplateController as k2aTemplateCtrl"}).state("k2aNotification",{url:"/k2aNotification",templateUrl:"src/admin/integration/know2act/Know2actNotifications.jsp",controller:"Admin.Integration.Know2act.k2aNotificationController as k2aNoteCtrl"})}]),angular.module("oscarProviderViewModule").factory("Navigation",[function(){return{location:"",load:function(e){this.location=e}}}])},function(e,t,n){"use strict";window.Juno=window.Juno||{},Juno.Consults=Juno.Consults||{},Juno.Consults.Common={},Juno.Consults.Common.sortAttachmentDocs=function(e){e.sort(function(e,t){return e.documentType<t.documentType?-1:e.documentType>t.documentType?1:e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0})}},function(e,t,n){"use strict";window.Juno=window.Juno||{},Juno.Common=Juno.Common||{},Juno.Common.ServiceHelper={},Juno.Common.ServiceHelper.configHeaders=function(){return{headers:{"Content-Type":"application/json",Accept:"application/json"}}},Juno.Common.ServiceHelper.configHeadersWithCache=function(){return{headers:{"Content-Type":"application/json",Accept:"application/json"},cache:!0}}},function(e,t,n){"use strict";(function(e){window.Juno||(window.Juno={}),Juno.Common||(Juno.Common={}),Juno.Common.Util={},Juno.Common.Util.exists=function(e){return angular.isDefined(e)&&null!==e},Juno.Common.Util.isBlank=function(e){return!Juno.Common.Util.exists(e)||""===e},Juno.Common.Util.toArray=function(e){return e instanceof Array?e:null==e?[]:[e]},Juno.Common.Util.pad0=function(e){var t=e.toString();return 1==t.length&&(t="0"+t),t},Juno.Common.Util.toTrimmedString=function(e){return null==e&&(e=""),e instanceof String&&(e=e.trim()),e},Juno.Common.Util.formatDate=function(e){return(e=Juno.Common.Util.toTrimmedString(e))&&(e instanceof Date||(e=new Date(e)),e=e.getFullYear()+"-"+Juno.Common.Util.pad0(e.getMonth()+1)+"-"+Juno.Common.Util.pad0(e.getDate())),e},Juno.Common.Util.formatTime=function(e){return(e=Juno.Common.Util.toTrimmedString(e))&&(e instanceof Date||(e=new Date(e)),e=Juno.Common.Util.pad0(e.getHours())+":"+Juno.Common.Util.pad0(e.getMinutes())),e},Juno.Common.Util.addNewLine=function(e,t){return null==e||""==e.trim()?t:(null==t||""==t.trim()?t=e.trim():t+="\n"+e.trim(),t)},Juno.Common.Util.calcAge=function(e,t,n){var a=new Date(parseInt(e,10),parseInt(t,10),parseInt(n,10)),o=new Date,r=o.getFullYear()-a.getFullYear();return(o.getMonth()<a.getMonth()||o.getMonth()==a.getMonth()&&o.getDate()<a.getDate())&&r--,r},Juno.Common.Util.isInArray=function(e,t){return t.indexOf(e)>-1},Juno.Common.Util.mergeHash=function(t,n){return"undefined"!==n&&(e.extend(!0,t,n),!0)},Juno.Common.Util.noNull=function(e){return"string"==typeof e?e=e.trim():null===e&&(e=""),e},Juno.Common.Util.isUndefinedOrNull=function(e){return angular.isUndefined(e)||null===e},Juno.Common.Util.isDefinedAndNotNull=function(e){return angular.isDefined(e)&&null!==e},Juno.Common.Util.objectArrayIndexOf=function(e,t,n){for(var a=0,o=e.length;a<o;a++)if(e[a][n]===t)return a;return-1},Juno.Common.Util.isIntegerString=function(e){parseInt(e);return!!/^-?\d+$/.test(e.toString())}}).call(this,n(0))},function(e,t,n){"use strict";window.Juno=window.Juno||{},window.Juno.Common=window.Juno.Common||{},window.Juno.Common.DisplayMessages=function(e,t){var n=this;n.messages_hash={},n.display_field_errors=!0,n.field_errors_label_map={},n.field_errors_label_map_key=null,n.extra_info={},n.meta={},n.saving_message="Saving...",n.init=function(){Juno.Common.Util.exists(e)&&(n.messages_hash=e),n.force_field_error_arrays(),Juno.Common.Util.exists(t)&&(Juno.Common.Util.exists(t.display_field_errors)&&!1===t.display_field_errors&&(n.display_field_errors=!1),Juno.Common.Util.exists(t.field_errors_label_map)&&(n.field_errors_label_map=t.field_errors_label_map,Juno.Common.Util.exists(t.field_errors_label_map_key)&&(n.field_errors_label_map_key=t.field_errors_label_map_key)))},n.merge=function(e){n.messages_hash=angular.merge(n.messages_hash,e.messages_hash)},n.has_alert_warnings=function(){return n.alert_warnings().length>0},n.alert_warnings=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.alert_warnings)?n.messages_hash.alert_warnings:[]},n.add_alert_warning=function(e){n.has_alert_warnings()||(n.messages_hash.alert_warnings=[]),n.messages_hash.alert_warnings.push(e)},n.has_validation_warnings=function(){return n.validation_warnings().length>0},n.add_validation_warning=function(e){n.has_validation_warnings()||(n.messages_hash.validation_warnings=[]),n.messages_hash.validation_warnings.push(e)},n.validation_warnings=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.validation_warnings)?n.messages_hash.validation_warnings:[]},n.has_standard_errors=function(){return n.standard_errors().length>0},n.standard_errors=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_errors)?n.messages_hash.standard_errors:[]},n.add_standard_error=function(e){n.has_standard_errors()||(n.messages_hash.standard_errors=[]),n.messages_hash.standard_errors.push(e)},n.add_generic_fatal_error=function(){n.add_standard_error("Fatal Error")},n.has_standard_warnings=function(){return n.standard_warnings().length>0},n.standard_warnings=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_warnings)?n.messages_hash.standard_warnings:[]},n.add_standard_warning=function(e){n.has_standard_warnings()||(n.messages_hash.standard_warnings=[]),n.messages_hash.standard_warnings.push(e)},n.has_standard_info=function(){return n.standard_info().length>0},n.standard_info=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_info)?n.messages_hash.standard_info:[]},n.add_standard_info=function(e){n.has_standard_info()||(n.messages_hash.standard_info=[]),n.messages_hash.standard_info.push(e)},n.has_standard_success=function(){return n.standard_success().length>0},n.standard_success=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_success)?n.messages_hash.standard_success:[]},n.add_standard_success=function(e){n.has_standard_success()||(n.messages_hash.standard_success=[]),n.messages_hash.standard_success.push(e)},n.has_field_errors=function(){return n.field_errors()&&!angular.equals(n.field_errors(),{})},n.field_errors=function(e){var t={};if(Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.field_errors))if(Juno.Common.Util.exists(e)&&!0===e)for(var a in n.messages_hash.field_errors)t[a]=n.prepend_label(a,n.messages_hash.field_errors[a]);else t=n.messages_hash.field_errors;return t},n.has_one_of_field_error=function(e){for(var t in angular.isArray(e)||(e=[e]),e)if(n.has_field_error(e[t]))return!0;return!1},n.has_indexed_field_error=function(e,t){return!(!Juno.Common.Util.exists(n.extra_info)||!Juno.Common.Util.exists(n.extra_info.index)||n.extra_info.index!=t)&&n.has_field_error(e)},n.has_field_error=function(e){return!!(n.has_field_errors()&&e in n.field_errors())},n.field_error_string=function(e,t){return n.has_field_error(e)?(Juno.Common.Util.exists(t)||(t=", "),n.field_errors()[e].join(t)):""},n.add_field_error=function(e,t){n.has_field_errors()||(n.messages_hash.field_errors={}),n.has_field_error(e)||(n.messages_hash.field_errors[e]=[]),n.messages_hash.field_errors[e].push(t)},n.remove_field_error=function(e){n.has_field_error(e)&&delete n.messages_hash.field_errors[e]},n.has_error_links=function(){return n.error_links().length>0},n.add_error_link=function(e){n.has_error_links()||(n.messages_hash.error_links=[]),n.messages_hash.error_links.push(e)},n.error_links=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.error_links)?n.messages_hash.error_links:[]},n.has_errors=function(){return!!(n.has_field_errors()||n.has_standard_errors()||n.has_error_links())},n.clear=function(){n.messages_hash={}},n.force_field_error_arrays=function(){if(n.has_field_errors())for(var e in n.messages_hash.field_errors)angular.isArray(n.messages_hash.field_errors[e])||(n.messages_hash.field_errors[e]=[angular.copy(n.messages_hash.field_errors[e])])},n.prepend_label=function(e,t){var a="",o=[];if(e in n.field_errors_label_map)for(var r in a=n.field_errors_label_map[e],Juno.Common.Util.exists(n.field_errors_label_map_key)&&(a=n.field_errors_label_map[e][n.field_errors_label_map_key]),t){var i=[a,t[r]].join(" ").trim();o.push(i)}else o=t;return o},n.merge_messages=function(e){for(var t=e.field_errors(),a=e.error_links(),o=e.standard_info(),r=e.standard_warnings(),i=e.standard_errors(),l=e.alert_warnings(),s=e.validation_warnings(),c=e.standard_success(),u=0;u<c.length;u++)n.add_standard_success(c[u]);for(u=0;u<o.length;u++)n.add_standard_info(o[u]);for(u=0;u<r.length;u++)n.add_standard_warning(r[u]);for(u=0;u<i.length;u++)n.add_standard_error(i[u]);for(u=0;u<l.length;u++)n.add_alert_warning(l[u]);for(u=0;u<s.length;u++)n.add_validation_warning(s[u]);for(u=0;u<a.length;u++)n.add_error_link(a[u]);for(var d in t)if(t.hasOwnProperty(d))for(u=0;u<t[d].length;u++)n.add_field_error(d,t[d][u])},n.init()}},function(module,exports){function popup(e,t,n,a){return popup2(e,t,0,0,n,a)}function newWindow(e,t){var n=document.getElementsByTagName("body")[0].clientWidth,a=document.getElementsByTagName("body")[0].clientHeight;return n=Math.max(n,window.innerWidth),popup2(a=Math.max(a,window.innerHeight),n,0,0,e,t)}function popup2(e,t,n,a,o,r){return void 0===popup2.winRefs&&(popup2.winRefs={}),void 0===popup2.winRefs[r]||popup2.winRefs[r].closed?(windowprops="height="+e+",width="+t+",location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=yes,screenX=0,screenY=0,top="+n+",left="+a,popup2.winRefs[r]=window.open(o,r,windowprops)):(popup2.winRefs[r].location.href=o,popup2.winRefs[r].resizeTo(t,e),popup2.winRefs[r].focus()),popup2.winRefs[r]}function confirmNGo(e,t){return confirm(t)&&(location.href=e),!1}function showHideItem(e){"none"==document.getElementById(e).style.display?showItem(e):hideItem(e)}function showItem(e){document.getElementById(e).style.display=""}function hideItem(e){document.getElementById(e).style.display="none"}function validDate(e){return validDateText(document.getElementById(e).value)}function validDateText(e){var t="/";-1==e.indexOf("/")&&(t="-");var n=e.split(t);return 3==n.length&&(year=n[0]-0,month=n[1]-1,day=n[2]-0,dateObject=new Date(year,month,day),day==dateObject.getDate()&&month==dateObject.getMonth()&&year==dateObject.getFullYear())}function validDateFieldsByClass(e,t){for(var n=document.getElementsByClassName(e,t),a=0;a<n.length;a++)if(!validDateText(n[a].value))return n[a].focus(),!1;return!0}function getMouseCoords(e){var t=new Array(2),n=0,a=0;if(!e)e=window.event;return e.pageX||e.pageY?(n=e.pageX,a=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),t[0]=n,t[1]=a,t}function checkAll(e,t,n){var a=e.checked,o=document.getElementsByClassName(n,t);for(i=0;i<o.length;i++)o[i].checked=a}function oscarLog(e){window.console&&console.log(e)}function grabEnter(event,callb){if(window.event&&13==window.event.keyCode||event&&13==event.which)return eval(callb),!1}function isNumericInt(e){var t,n=!0;for(i=0;i<e.length&&1==n;i++)t=e.charAt(i),-1=="0123456789".indexOf(t)&&(n=!1);return n}function isNumeric(e){var t,n=!0;for(i=0;i<e.length&&1==n;i++)t=e.charAt(i),-1=="0123456789.".indexOf(t)&&(n=!1);return n}function trim(e){return e=(e=e.replace(/^\s+/g,"")).replace(/\s+$/g,"")}document.getElementsByAttribute=function(e,t,n,a){for(var o,r,i="*"==t&&e.all?e.all:e.getElementsByTagName(t),l=new Array,s=void 0!==a?new RegExp("(^|\\s)"+a+"(\\s|$)"):null,c=0;c<i.length;c++)"string"==typeof(r=(o=i[c]).getAttribute&&o.getAttribute(n))&&r.length>0&&(void 0===a||s&&s.test(r))&&l.push(o);return l}},function(e,t,n){n(294),n(293),n(292),n(291),n(290),n(289),n(224),n(223),n(222),n(221),n(220),n(219),n(218),n(217),n(216),n(215),n(214),n(213),n(212),n(211),n(210),n(209),n(208),n(207),n(206),n(205),n(204),n(203),n(202),n(201),n(200),n(199),n(198),n(197),n(196),n(195),n(194),n(193),n(192),n(191),n(190),n(189),n(188),n(187),n(186),n(185),n(184),n(183),n(182),n(181),n(180),n(179),n(178),n(177),n(176),n(175),n(174),n(173),n(172),n(171),n(170),n(169),n(168),n(167),n(166),n(165),n(164),n(163),n(162),n(161),n(160),n(159),n(158),n(157),n(156),n(155),n(154),n(153),n(152),n(151),n(150),n(149),n(148),n(147),n(146),n(145),n(144),n(143),n(142),n(141),n(140),n(139),n(138),n(137),n(136),n(135),n(134),n(133),n(132),n(131),n(130),n(129),n(128),n(127),n(126),n(125),n(124),n(123),n(122),n(121),n(120),n(119),n(118),n(117),n(116),n(115),n(114),n(113),n(112),n(111),n(110),n(109),n(108),n(107),n(106),n(105),n(104),n(103),n(102),n(101),n(100),n(99),n(98),n(97),n(96),n(95),n(94),n(93),n(92),n(91),n(90),n(89),n(88),n(87),n(86),n(85),n(84),n(83),n(82),n(81),n(80),n(79),n(78),n(77),n(76),n(75),n(74),n(73),n(72),n(71),n(70),n(69),n(68),n(67),n(66),n(65),n(64),n(63),e.exports=n(62)}]),[[295,0,1]]]);
//# sourceMappingURL=bundle.333436ac890e3119670e.js.map